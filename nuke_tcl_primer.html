<!DOCTYPE html>
<html>
<head>
<link rel="Stylesheet" type="text/css" href="style.css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<title>nuke_tcl_primer</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<p>
<a href="index.html">index</a>
</p>

<p>
<a href="nuke_index.html">Nuke Index</a>
</p>

<div id="Nuke TCL - General Primer"><h1 id="Nuke TCL - General Primer" class="header"><a href="#Nuke TCL - General Primer">Nuke TCL - General Primer</a></h1></div>

<div id="Contents" class="toc"><h1 id="Contents" class="header"><a href="#Contents">Contents</a></h1></div>
<ul>
<li>
<a href="nuke_tcl_primer.html#Nuke TCL - General Primer">Nuke TCL - General Primer</a>

<ul>
<li>
<a href="nuke_tcl_primer.html#TCL Syntax Primer For Expressions In Nuke">TCL Syntax Primer For Expressions In Nuke</a>

<ul>
<li>
<a href="nuke_tcl_primer.html#Accessing knob values">Accessing knob values</a>

<li>
<a href="nuke_tcl_primer.html#Conditional statements (if/else)">Conditional statements (if/else)</a>

<li>
<a href="nuke_tcl_primer.html#String manipulation">String manipulation</a>

<li>
<a href="nuke_tcl_primer.html#Useful examples for node labels">Useful examples for node labels</a>

<li>
<a href="nuke_tcl_primer.html#Metadata access">Metadata access</a>

<li>
<a href="nuke_tcl_primer.html#Variables and comments">Variables and comments</a>

</ul>
</ul>
<li>
<a href="nuke_tcl_primer.html#Practical TCL Expressions">Practical TCL Expressions</a>

<ul>
<li>
<a href="nuke_tcl_primer.html#Node and knob interaction">Node and knob interaction</a>

<ul>
<li>
<a href="nuke_tcl_primer.html#Referencing Knobs:">Referencing Knobs:</a>

<li>
<a href="nuke_tcl_primer.html#Setting Knob Values:">Setting Knob Values:</a>

<li>
<a href="nuke_tcl_primer.html#File and path manipulation">File and path manipulation</a>

<li>
<a href="nuke_tcl_primer.html#Manipulating Paths:">Manipulating Paths:</a>

<li>
<a href="nuke_tcl_primer.html#Conditional logic and flow control">Conditional logic and flow control</a>

<ul>
<li>
<a href="nuke_tcl_primer.html#Conditional Statements:">Conditional Statements:</a>

<li>
<a href="nuke_tcl_primer.html#Checking for existence:">Checking for existence:</a>

</ul>
<li>
<a href="nuke_tcl_primer.html#Metadata access and manipulation">Metadata access and manipulation</a>

<ul>
<li>
<a href="nuke_tcl_primer.html#Listing Metadata:">Listing Metadata:</a>

<li>
<a href="nuke_tcl_primer.html#Accessing Specific Metadata:">Accessing Specific Metadata:</a>

</ul>
<li>
<a href="nuke_tcl_primer.html#Other useful expressions">Other useful expressions</a>

<li>
<a href="nuke_tcl_primer.html#Sampling Pixels:">Sampling Pixels:</a>

<li>
<a href="nuke_tcl_primer.html#Node labels">Node labels</a>

<li>
<a href="nuke_tcl_primer.html#Input filename">Input filename</a>

<li>
<a href="nuke_tcl_primer.html#Displaying filename from any connected node:">Displaying filename from any connected node:</a>

<li>
<a href="nuke_tcl_primer.html#Connected camera">Connected camera</a>

<li>
<a href="nuke_tcl_primer.html#Bounding box information">Bounding box information</a>

<li>
<a href="nuke_tcl_primer.html#Displaying the center point of the bounding box:">Displaying the center point of the bounding box:</a>

<li>
<a href="nuke_tcl_primer.html#Frame range">Frame range</a>

<ul>
<li>
<a href="nuke_tcl_primer.html#Displaying the input's frame range:">Displaying the input's frame range:</a>

<li>
<a href="nuke_tcl_primer.html#Displaying the global project frame range:">Displaying the global project frame range:</a>

</ul>
<li>
<a href="nuke_tcl_primer.html#Error status">Error status</a>

<li>
<a href="nuke_tcl_primer.html#Important notes">Important notes</a>

</ul>
</ul>
</ul>
<div id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke"><h2 id="TCL Syntax Primer For Expressions In Nuke" class="header"><a href="#Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke">TCL Syntax Primer For Expressions In Nuke</a></h2></div>

<p>
Tcl (Tool Command Language) plays a crucial role in Nuke for creating dynamic and interactive scripts, particularly in knob expressions, node labels, and when you need to execute programmatic commands. 
</p>

<div id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Accessing knob values"><h3 id="Accessing knob values" class="header"><a href="#Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Accessing knob values">Accessing knob values</a></h3></div>

<ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Accessing knob values-Direct Knob Reference"></span><strong id="Direct Knob Reference">Direct Knob Reference</strong>: You can refer to any knob on any node using the format NodeName.KnobName.

<ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Accessing knob values-Example"></span><strong id="Example">Example</strong>: <code>[value Transform1.translate.x]</code> would return the X-translation value of a node named Transform1.

</ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Accessing knob values-Current Node's Knob"></span><strong id="Current Node's Knob">Current Node's Knob</strong>: Use this to refer to the current node and access its knob values.

<ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Accessing knob values-Example"></span><strong id="Example">Example</strong>: <code>[value this.first_frame]</code> would get the first frame value of the current node.

</ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Accessing knob values-Input Node's Knob"></span><strong id="Input Node's Knob">Input Node's Knob</strong>: Use input to refer to the input node and access its knob values.

<ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Accessing knob values-Example"></span><strong id="Example">Example</strong>: <code>[value input.name]</code> would return the name of the input node. 

</ul>
</ul>
 
<div id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Conditional statements (if/else)"><h3 id="Conditional statements (if/else)" class="header"><a href="#Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Conditional statements (if/else)">Conditional statements (if/else)</a></h3></div>

<ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Conditional statements (if/else)-Syntax"></span><strong id="Syntax">Syntax</strong>: Tcl conditional statements use the if command followed by a boolean expression, then a block of code to execute if true, and optionally elseif or else clauses for alternative actions.

<ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Conditional statements (if/else)-Note"></span><strong id="Note">Note</strong>: It is best practice to always wrap expressions and bodies of the if statement in curly braces {} to prevent double substitution and ensure faster evaluation. According to Gritty Engineer, the then keyword is often omitted, while else is retained for clarity.

<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Conditional statements (if/else)-Example"></span><strong id="Example">Example</strong>:

</ul>
</ul>
  
<pre tcl>
[if {[value Switch1.which]==1} {return "Viewing the first option"} \
elseif {[value Switch1.which]==2} {return "Viewing the second option"} \
else {return "No Value Returned"}]
</pre>
<p>
Use code with caution.
</p>

<p>
In this example, if the which knob of the Switch1 node is 1, the text "Viewing the first option" is returned. If it is 2, the text "Viewing the second option" is returned. Otherwise, "No Value Returned" is returned. 
</p>

<div id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-String manipulation"><h3 id="String manipulation" class="header"><a href="#Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-String manipulation">String manipulation</a></h3></div>

<ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-String manipulation-Replacing Strings"></span><strong id="Replacing Strings">Replacing Strings</strong>: The regsub command can replace all occurrences of a string with another using regular expressions.

<ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-String manipulation-Example"></span><strong id="Example">Example</strong>: <code>[regsub -all "proj" [value [node this].file] "projects"]</code> replaces all instances of "proj" with "projects" in the current node's file path.

</ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-String manipulation-Mapping Strings"></span><strong id="Mapping Strings">Mapping Strings</strong>: The string map command can perform multiple string replacements at once.

<ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-String manipulation-Example"></span><strong id="Example">Example</strong>: <code>[string map {"aa" "xx" "bb" "yy"} "aaffffaabb" ]</code> replaces "aa" with "xx" and "bb" with "yy" in the input string.

</ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-String manipulation-Comparing Strings"></span><strong id="Comparing Strings">Comparing Strings</strong>: The string equal command compares two strings.

<ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-String manipulation-Example"></span><strong id="Example">Example</strong>: <code>[string equal [value Text1.message] "bla"]</code> checks if the message of the Text1 node is "bla". 

</ul>
</ul>
<div id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Useful examples for node labels"><h3 id="Useful examples for node labels" class="header"><a href="#Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Useful examples for node labels">Useful examples for node labels</a></h3></div>

<ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Useful examples for node labels-Displaying Node Information"></span><strong id="Displaying Node Information">Displaying Node Information</strong>: You can use Tcl to dynamically display information about the node itself or its inputs on the label.

<ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Useful examples for node labels-Example"></span><strong id="Example">Example</strong>: <code>[basename [value [topnode].file]]</code> would display the filename (without the full path) of the Read node connected to the topmost input.

</ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Useful examples for node labels-Example"></span><strong id="Example">Example</strong>: Motion: <code>[value transform]\nRef Frame: [value reference_frame]</code> would display motion tracking data and reference frame from a Tracker node, according to benmcewan.com. 

</ul>
 
<div id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Metadata access"><h3 id="Metadata access" class="header"><a href="#Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Metadata access">Metadata access</a></h3></div>

<ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Metadata access-Retrieving Metadata"></span><strong id="Retrieving Metadata">Retrieving Metadata</strong>: You can access metadata using Tcl expressions.

<ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Metadata access-Example"></span><strong id="Example">Example</strong>: <code>[metadata input/filename]</code> would display the filename from the input metadata.

</ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Metadata access-Example"></span><strong id="Example">Example</strong>: <code>[metadata keys *f*]</code> would list all metadata keys containing the letter 'f'. 

</ul>
<div id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Variables and comments"><h3 id="Variables and comments" class="header"><a href="#Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Variables and comments">Variables and comments</a></h3></div>

<ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Variables and comments-Setting Variables"></span><strong id="Setting Variables">Setting Variables</strong>: Use set to set a variable.

<ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Variables and comments-Example"></span><strong id="Example">Example</strong>: <code>[set seq [value Read1.file]; return]</code> sets a variable seq with the file path of Read1.

</ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Variables and comments-Comments"></span><strong id="Comments">Comments</strong>: Tcl uses the hash character (#) for comments. According to Intel, a semicolon ; is required before the # if the comment is on the same line as a command. 

</ul>
<p>
This overview provides a foundation for using Tcl expressions in Nuke. The ability to dynamically link knobs, implement conditional logic, and manipulate strings is invaluable for creating more flexible and efficient Nuke scripts. Remember, Nuke expressions using TCL are typically evaluated during the "knob store" phase, before pixel processing begins.
</p>

<div id="Practical TCL Expressions"><h1 id="Practical TCL Expressions" class="header"><a href="#Practical TCL Expressions">Practical TCL Expressions</a></h1></div>

<p>
The following is a curated list of useful Tcl expressions and commands, categorized for clarity. 
</p>

<div id="Practical TCL Expressions-Node and knob interaction"><h2 id="Node and knob interaction" class="header"><a href="#Practical TCL Expressions-Node and knob interaction">Node and knob interaction</a></h2></div>

<div id="Practical TCL Expressions-Node and knob interaction-Referencing Knobs:"><h3 id="Referencing Knobs:" class="header"><a href="#Practical TCL Expressions-Node and knob interaction-Referencing Knobs:">Referencing Knobs:</a></h3></div>

<ul>
<li>
<code>[value NodeName.KnobName]</code>: Get the value of a specific knob on a specific node. E.g., [value Read1.file].

<li>
<code>[value this.KnobName]</code>: Get the value of a knob on the current node. E.g., [value this.size].

<li>
<code>[value input.KnobName]</code>: Get the value of a knob on the input node. E.g., [value input.name].

<li>
<code>[value NodeName.KnobName(frame)]</code>: Get the value of a knob at a specific frame. E.g., [value Transform1.translate.x(1001)].

<li>
<code>[value NodeName.KnobName(frame+offset)]</code>: Get the value of a knob with an offset from the current frame. E.g., [value Transform1.translate.x(frame-10)].

</ul>
<div id="Practical TCL Expressions-Node and knob interaction-Setting Knob Values:"><h3 id="Setting Knob Values:" class="header"><a href="#Practical TCL Expressions-Node and knob interaction-Setting Knob Values:">Setting Knob Values:</a></h3></div>

<ul>
<li>
<code>[knob NodeName.KnobName Value]</code>: Set a specific knob's value. E.g., [knob Blur1.size 10].

<li>
<code>[setkey NodeName.KnobName FrameNumber Value]</code>: Set a keyframe on a knob at a specific frame. 

</ul>
<div id="Practical TCL Expressions-Node and knob interaction-File and path manipulation"><h3 id="File and path manipulation" class="header"><a href="#Practical TCL Expressions-Node and knob interaction-File and path manipulation">File and path manipulation</a></h3></div>

<p>
Getting File Paths:
</p>

<ul>
<li>
<code>[value [topnode].file]</code>: Get the full file path of the topmost Read node in the script.

<li>
<code>[basename [value [topnode].file]]</code>: Get the filename only from the topmost Read node's path.

<li>
<code>[file rootname [value [topnode].file]]</code>: Get the filename without the extension.

<li>
<code>[file dirname [value root.name]]</code>: Get the directory of the current Nuke script.

</ul>
<div id="Practical TCL Expressions-Node and knob interaction-Manipulating Paths:"><h3 id="Manipulating Paths:" class="header"><a href="#Practical TCL Expressions-Node and knob interaction-Manipulating Paths:">Manipulating Paths:</a></h3></div>

<ul>
<li>
<code>[split "string" "delimiter"]</code>: Splits a string into a list based on a delimiter.

<li>
<code>[join {list} "delimiter"]</code>: Joins a list of strings into a single string using a delimiter. 

</ul>
<div id="Practical TCL Expressions-Node and knob interaction-Conditional logic and flow control"><h3 id="Conditional logic and flow control" class="header"><a href="#Practical TCL Expressions-Node and knob interaction-Conditional logic and flow control">Conditional logic and flow control</a></h3></div>

<div id="Practical TCL Expressions-Node and knob interaction-Conditional logic and flow control-Conditional Statements:"><h4 id="Conditional Statements:" class="header"><a href="#Practical TCL Expressions-Node and knob interaction-Conditional logic and flow control-Conditional Statements:">Conditional Statements:</a></h4></div>

<ul>
<li>
<code>[if {condition} {expr1} else {expr2}]</code>: Conditional if-else statement. E.g., [if {[value Switch1.which]==1} {return "A"} {return "B"}].

</ul>
<div id="Practical TCL Expressions-Node and knob interaction-Conditional logic and flow control-Checking for existence:"><h4 id="Checking for existence:" class="header"><a href="#Practical TCL Expressions-Node and knob interaction-Conditional logic and flow control-Checking for existence:">Checking for existence:</a></h4></div>

<ul>
<li>
<code>[exists NodeName]</code>: Checks if a node exists. 

</ul>
<div id="Practical TCL Expressions-Node and knob interaction-Metadata access and manipulation"><h3 id="Metadata access and manipulation" class="header"><a href="#Practical TCL Expressions-Node and knob interaction-Metadata access and manipulation">Metadata access and manipulation</a></h3></div>

<div id="Practical TCL Expressions-Node and knob interaction-Metadata access and manipulation-Listing Metadata:"><h4 id="Listing Metadata:" class="header"><a href="#Practical TCL Expressions-Node and knob interaction-Metadata access and manipulation-Listing Metadata:">Listing Metadata:</a></h4></div>

<ul>
<li>
<code>[metadata]</code>: Lists all metadata keys in the incoming image.

<li>
<code>[metadata values]</code>: Lists all metadata keys and their values.

<li>
<code>[metadata keys *filter*]</code>: Lists metadata keys matching a filter. E.g., [metadata keys <span id="Practical TCL Expressions-Node and knob interaction-Metadata access and manipulation-Listing Metadata:-f"></span><strong id="f">f</strong>].

</ul>
<div id="Practical TCL Expressions-Node and knob interaction-Metadata access and manipulation-Accessing Specific Metadata:"><h4 id="Accessing Specific Metadata:" class="header"><a href="#Practical TCL Expressions-Node and knob interaction-Metadata access and manipulation-Accessing Specific Metadata:">Accessing Specific Metadata:</a></h4></div>

<ul>
<li>
<code>[metadata KeyName]</code>: Get the value of a specific metadata key. E.g., [metadata input/filename].

<li>
<code>[metadata -n NodeName KeyName]</code>: Get metadata from a specific node. 

</ul>
<div id="Practical TCL Expressions-Node and knob interaction-Other useful expressions"><h3 id="Other useful expressions" class="header"><a href="#Practical TCL Expressions-Node and knob interaction-Other useful expressions">Other useful expressions</a></h3></div>

<ul>
<li>
<span id="Practical TCL Expressions-Node and knob interaction-Other useful expressions-Frame Number"></span><strong id="Frame Number">Frame Number</strong>: frame (or t or x) returns the current frame number.

<li>
<span id="Practical TCL Expressions-Node and knob interaction-Other useful expressions-Frame Range Checking"></span><strong id="Frame Range Checking">Frame Range Checking</strong>: inrange(value, min, max) checks if a value (typically frame) is within a range.

</ul>
<div id="Practical TCL Expressions-Node and knob interaction-Sampling Pixels:"><h3 id="Sampling Pixels:" class="header"><a href="#Practical TCL Expressions-Node and knob interaction-Sampling Pixels:">Sampling Pixels:</a></h3></div>
<ul>
<li>
<code>[sample NodeName ChannelName x y]</code>: Sample a pixel value at specific coordinates.

<li>
<code>[sample [node input] ChannelName x y]</code>. 

</ul>
<div id="Practical TCL Expressions-Node and knob interaction-Node labels"><h3 id="Node labels" class="header"><a href="#Practical TCL Expressions-Node and knob interaction-Node labels">Node labels</a></h3></div>

<p>
Dynamic Labels: Using Tcl in node labels for displaying useful information about a node is very common. Examples include displaying:
</p>
<ul>
<li>
Input filename

<li>
Connected camera

<li>
Bounding box information

<li>
Frame range

<li>
Error status 

</ul>
<p>
These are just a few examples, and the possibilities are endless with TCL in Nuke. Remember that square brackets [] are used for evaluating Tcl commands within expressions. According to Foundry Learn, you can open the Expression dialog for any parameter by right-clicking on it and selecting Add expression or by typing the equals sign (=). 
</p>

<table>
<tr>
<td>
AI responses may include mistakes.
</td>
</tr>
</table>

<p>
This list covers common and highly valuable Tcl expressions for node labels in Nuke.
</p>

<div id="Practical TCL Expressions-Node and knob interaction-Input filename"><h3 id="Input filename" class="header"><a href="#Practical TCL Expressions-Node and knob interaction-Input filename">Input filename</a></h3></div>
<ul>
<li>
Displaying the filename from the first connected Read node:

</ul>
  
<pre tcl>
[basename [value [topnode].file]]
</pre>
<p>
Use code with caution.
</p>

<p>
This finds the topmost node (topnode), accesses its file knob, and then uses basename to extract the filename only.
</p>

<div id="Practical TCL Expressions-Node and knob interaction-Displaying filename from any connected node:"><h3 id="Displaying filename from any connected node:" class="header"><a href="#Practical TCL Expressions-Node and knob interaction-Displaying filename from any connected node:">Displaying filename from any connected node:</a></h3></div>

<pre tcl>
[basename [value input.file]]
</pre>
<p>
Use code with caution.
</p>

<p>
This gets the file knob value from the directly connected input node. This works for Read nodes, Write nodes, and other nodes that have a file knob. 
</p>

<div id="Practical TCL Expressions-Node and knob interaction-Connected camera"><h3 id="Connected camera" class="header"><a href="#Practical TCL Expressions-Node and knob interaction-Connected camera">Connected camera</a></h3></div>

<p>
Identifying an upstream Camera node (basic):
</p>

<pre tcl>
[if {[exists input.CameraName]} {return "Camera: [value input.CameraName]"} {return "No Camera"}]
</pre>
<p>
Use code with caution.
</p>

<p>
This example assumes a direct connection of the Camera node to the current node and that you know the Camera's name. It checks for the existence of a knob named CameraName and displays it if present. According to Foundry Community, more robust solutions for traversing upstream connections to find the first Camera node usually involve Python scripting for more complex scenarios. 
</p>

<div id="Practical TCL Expressions-Node and knob interaction-Bounding box information"><h3 id="Bounding box information" class="header"><a href="#Practical TCL Expressions-Node and knob interaction-Bounding box information">Bounding box information</a></h3></div>

<p>
Displaying the bounding box coordinates of the input:
</p>

<pre tcl>
bbox: x: [value input.bbox.x] y: [value input.bbox.y] r: [value input.bbox.r] t: [value input.bbox.t]
</pre>
<p>
Use code with caution.
</p>

<p>
This displays the x, y, right, and top coordinates of the input's bounding box.
</p>

<div id="Practical TCL Expressions-Node and knob interaction-Displaying the center point of the bounding box:"><h3 id="Displaying the center point of the bounding box:" class="header"><a href="#Practical TCL Expressions-Node and knob interaction-Displaying the center point of the bounding box:">Displaying the center point of the bounding box:</a></h3></div>

<pre tcl>
Center: x: [expr ([value input.bbox.x]+[value input.bbox.r])/2] y: [expr ([value input.bbox.y]+[value input.bbox.t])/2]
</pre>
<p>
Use code with caution.
</p>

<p>
This calculates and displays the center x and y coordinates of the input's bounding box. 
</p>

<div id="Practical TCL Expressions-Node and knob interaction-Frame range"><h3 id="Frame range" class="header"><a href="#Practical TCL Expressions-Node and knob interaction-Frame range">Frame range</a></h3></div>

<div id="Practical TCL Expressions-Node and knob interaction-Frame range-Displaying the input's frame range:"><h4 id="Displaying the input's frame range:" class="header"><a href="#Practical TCL Expressions-Node and knob interaction-Frame range-Displaying the input's frame range:">Displaying the input's frame range:</a></h4></div>

<pre tcl>
Frame Range: [value input.first_frame] - [value input.last_frame]
</pre>
<p>
Use code with caution.
</p>

<p>
This will show the first and last frame of the connected input node.
</p>

<div id="Practical TCL Expressions-Node and knob interaction-Frame range-Displaying the global project frame range:"><h4 id="Displaying the global project frame range:" class="header"><a href="#Practical TCL Expressions-Node and knob interaction-Frame range-Displaying the global project frame range:">Displaying the global project frame range:</a></h4></div>

<pre tcl>
Project Range: [value root.first_frame] - [value root.last_frame]
</pre>
<p>
Use code with caution.
</p>

<p>
This will display the global project first and last frame set in the Project Settings. 
</p>

<div id="Practical TCL Expressions-Node and knob interaction-Error status"><h3 id="Error status" class="header"><a href="#Practical TCL Expressions-Node and knob interaction-Error status">Error status</a></h3></div>

<p>
Checking if the node is currently in an error state:
</p>

<pre tcl>
[if {[value error] == 1} {return "ERROR!"} {return ""}]
</pre>
<p>
Use code with caution.
</p>

<p>
This expression checks if the error knob of the current node is 1 (indicating an error) and displays "ERROR!" if it is, otherwise nothing. According to Foundry Learn, you can often find more details about errors in the Nuke Error Console. 
</p>

<div id="Practical TCL Expressions-Node and knob interaction-Important notes"><h3 id="Important notes" class="header"><a href="#Practical TCL Expressions-Node and knob interaction-Important notes">Important notes</a></h3></div>

<ul>
<li>
<span id="Practical TCL Expressions-Node and knob interaction-Important notes-Placing TCL expressions"></span><strong id="Placing TCL expressions">Placing TCL expressions</strong>: These expressions are usually entered into the "label" knob of the node's properties.

<li>
<span id="Practical TCL Expressions-Node and knob interaction-Important notes-Backslash \n"></span><strong id="Backslash \n">Backslash \n</strong>: To create a new line within the label, use \n. According to Ben McEwan, this is used in the Tracker node example.

<li>
<code>[expr]</code>: When performing mathematical operations, especially with floating-point numbers, wrap the operation in [expr] for proper evaluation.

<li>
<span id="Practical TCL Expressions-Node and knob interaction-Important notes-Error handling"></span><strong id="Error handling">Error handling</strong>: The [exists] command is helpful to check if a knob or node exists before trying to access its value, preventing errors.

<li>
<span id="Practical TCL Expressions-Node and knob interaction-Important notes-Context matters"></span><strong id="Context matters">Context matters</strong>: input refers to the immediate upstream node. this refers to the current node. root refers to the Project Settings. topnode refers to the topmost Read node in the script's input chain. 

</ul>
<p>
These examples should give you a good starting point for leveraging Tcl expressions to create dynamic and informative node labels in your Nuke scripts.
</p>

<p>
<a href="nuke_index.html">Nuke Index</a>
</p>

<p>
<a href="index.html">index</a>
</p>

</body>
</html>
