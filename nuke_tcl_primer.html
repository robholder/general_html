<!DOCTYPE html>
<html>
<head>
<link rel="Stylesheet" type="text/css" href="style.css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<title>nuke_tcl_primer</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<p>
<a href="index.html">index</a>
</p>

<p>
<a href="nuke_index.html">Nuke Index</a>
</p>

<div id="Nuke TCL - General Primer"><h1 id="Nuke TCL - General Primer" class="header"><a href="#Nuke TCL - General Primer">Nuke TCL - General Primer</a></h1></div>

<div id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke"><h2 id="TCL Syntax Primer For Expressions In Nuke" class="header"><a href="#Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke">TCL Syntax Primer For Expressions In Nuke</a></h2></div>

<p>
Tcl (Tool Command Language) plays a crucial role in Nuke for creating dynamic and interactive scripts, particularly in knob expressions, node labels, and when you need to execute programmatic commands. 
</p>

<div id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Accessing knob values"><h3 id="Accessing knob values" class="header"><a href="#Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Accessing knob values">Accessing knob values</a></h3></div>

<ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Accessing knob values-Direct Knob Reference"></span><strong id="Direct Knob Reference">Direct Knob Reference</strong>: You can refer to any knob on any node using the format NodeName.KnobName.

<ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Accessing knob values-Example"></span><strong id="Example">Example</strong>: <code>[value Transform1.translate.x]</code> would return the X-translation value of a node named Transform1.

</ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Accessing knob values-Current Node's Knob"></span><strong id="Current Node's Knob">Current Node's Knob</strong>: Use this to refer to the current node and access its knob values.

<ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Accessing knob values-Example"></span><strong id="Example">Example</strong>: <code>[value this.first_frame]</code> would get the first frame value of the current node.

</ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Accessing knob values-Input Node's Knob"></span><strong id="Input Node's Knob">Input Node's Knob</strong>: Use input to refer to the input node and access its knob values.

<ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Accessing knob values-Example"></span><strong id="Example">Example</strong>: <code>[value input.name]</code> would return the name of the input node. 

</ul>
</ul>
 
<div id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Conditional statements (if/else)"><h3 id="Conditional statements (if/else)" class="header"><a href="#Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Conditional statements (if/else)">Conditional statements (if/else)</a></h3></div>

<ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Conditional statements (if/else)-Syntax"></span><strong id="Syntax">Syntax</strong>: Tcl conditional statements use the if command followed by a boolean expression, then a block of code to execute if true, and optionally elseif or else clauses for alternative actions.

<ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Conditional statements (if/else)-Note"></span><strong id="Note">Note</strong>: It is best practice to always wrap expressions and bodies of the if statement in curly braces {} to prevent double substitution and ensure faster evaluation. According to Gritty Engineer, the then keyword is often omitted, while else is retained for clarity.

<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Conditional statements (if/else)-Example"></span><strong id="Example">Example</strong>:

</ul>
</ul>
  
<pre tcl>
[if {[value Switch1.which]==1} {return "Viewing the first option"} \
elseif {[value Switch1.which]==2} {return "Viewing the second option"} \
else {return "No Value Returned"}]
</pre>
<p>
Use code with caution.
</p>

<p>
In this example, if the which knob of the Switch1 node is 1, the text "Viewing the first option" is returned. If it is 2, the text "Viewing the second option" is returned. Otherwise, "No Value Returned" is returned. 
</p>

<div id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-String manipulation"><h3 id="String manipulation" class="header"><a href="#Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-String manipulation">String manipulation</a></h3></div>

<ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-String manipulation-Replacing Strings"></span><strong id="Replacing Strings">Replacing Strings</strong>: The regsub command can replace all occurrences of a string with another using regular expressions.

<ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-String manipulation-Example"></span><strong id="Example">Example</strong>: <code>[regsub -all "proj" [value [node this].file] "projects"]</code> replaces all instances of "proj" with "projects" in the current node's file path.

</ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-String manipulation-Mapping Strings"></span><strong id="Mapping Strings">Mapping Strings</strong>: The string map command can perform multiple string replacements at once.

<ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-String manipulation-Example"></span><strong id="Example">Example</strong>: <code>[string map {"aa" "xx" "bb" "yy"} "aaffffaabb" ]</code> replaces "aa" with "xx" and "bb" with "yy" in the input string.

</ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-String manipulation-Comparing Strings"></span><strong id="Comparing Strings">Comparing Strings</strong>: The string equal command compares two strings.

<ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-String manipulation-Example"></span><strong id="Example">Example</strong>: <code>[string equal [value Text1.message] "bla"]</code> checks if the message of the Text1 node is "bla". 

</ul>
</ul>
<div id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Useful examples for node labels"><h3 id="Useful examples for node labels" class="header"><a href="#Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Useful examples for node labels">Useful examples for node labels</a></h3></div>

<ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Useful examples for node labels-Displaying Node Information"></span><strong id="Displaying Node Information">Displaying Node Information</strong>: You can use Tcl to dynamically display information about the node itself or its inputs on the label.

<ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Useful examples for node labels-Example"></span><strong id="Example">Example</strong>: <code>[basename [value [topnode].file]]</code> would display the filename (without the full path) of the Read node connected to the topmost input.

</ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Useful examples for node labels-Example"></span><strong id="Example">Example</strong>: Motion: <code>[value transform]\nRef Frame: [value reference_frame]</code> would display motion tracking data and reference frame from a Tracker node, according to benmcewan.com. 

</ul>
 
<div id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Metadata access"><h3 id="Metadata access" class="header"><a href="#Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Metadata access">Metadata access</a></h3></div>

<ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Metadata access-Retrieving Metadata"></span><strong id="Retrieving Metadata">Retrieving Metadata</strong>: You can access metadata using Tcl expressions.

<ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Metadata access-Example"></span><strong id="Example">Example</strong>: <code>[metadata input/filename]</code> would display the filename from the input metadata.

</ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Metadata access-Example"></span><strong id="Example">Example</strong>: <code>[metadata keys *f*]</code> would list all metadata keys containing the letter 'f'. 

</ul>
<div id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Variables and comments"><h3 id="Variables and comments" class="header"><a href="#Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Variables and comments">Variables and comments</a></h3></div>

<ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Variables and comments-Setting Variables"></span><strong id="Setting Variables">Setting Variables</strong>: Use set to set a variable.

<ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Variables and comments-Example"></span><strong id="Example">Example</strong>: <code>[set seq [value Read1.file]; return]</code> sets a variable seq with the file path of Read1.

</ul>
<li>
<span id="Nuke TCL - General Primer-TCL Syntax Primer For Expressions In Nuke-Variables and comments-Comments"></span><strong id="Comments">Comments</strong>: Tcl uses the hash character (#) for comments. According to Intel, a semicolon ; is required before the # if the comment is on the same line as a command. 

</ul>
<p>
This overview provides a foundation for using Tcl expressions in Nuke. The ability to dynamically link knobs, implement conditional logic, and manipulate strings is invaluable for creating more flexible and efficient Nuke scripts. Remember, Nuke expressions using TCL are typically evaluated during the "knob store" phase, before pixel processing begins.
</p>

<p>
<a href="nuke_index.html">Nuke Index</a>
</p>

<p>
<a href="index.html">index</a>
</p>

</body>
</html>
