<!DOCTYPE html>
<html>
<head>
<link rel="Stylesheet" type="text/css" href="style.css">
<title>nuke_python_callbacks_and_setup</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<p>
<a href="index.html">index</a>
</p>

<p>
<a href="nuke_index.html">Nuke Index</a>
</p>

<div id="Nuke - Python - Callbacks"><h1 id="Nuke - Python - Callbacks" class="header"><a href="#Nuke - Python - Callbacks">Nuke - Python - Callbacks</a></h1></div>

<p>
You can select a node in the Node Graph and immediately set its Python callbacks, add user knobs, or define complex expressions.
</p>

<p>
Here is the exact process to set your knobChanged callback directly via the Script Editor.
</p>

<div id="Nuke - Python - Callbacks-üõ†Ô∏è Script Editor Method for Setting Callbacks"><h2 id="üõ†Ô∏è Script Editor Method for Setting Callbacks" class="header"><a href="#Nuke - Python - Callbacks-üõ†Ô∏è Script Editor Method for Setting Callbacks">üõ†Ô∏è Script Editor Method for Setting Callbacks</a></h2></div>

<p>
This method uses the Python Script Editor to reference your node, define your function, and assign it to the callback knob, all at once.
</p>

<div id="Nuke - Python - Callbacks-üõ†Ô∏è Script Editor Method for Setting Callbacks-Define the Function in the Script Editor"><h3 id="Define the Function in the Script Editor" class="header"><a href="#Nuke - Python - Callbacks-üõ†Ô∏è Script Editor Method for Setting Callbacks-Define the Function in the Script Editor">Define the Function in the Script Editor</a></h3></div>

<p>
First, write your clean, multi-line Python function right into the top half of the Script Editor. Crucially, replace MyGroup and Mask_Switch with the actual names of your nodes.
</p>

<pre python>
<table>
<tr>
<td>
UNTESTED
</td>
</tr>
</table>
# Function Definition (Write this in the Script Editor)
def update_mask_switch_callback():
    """Checks input(1) and sets the internal Switch which knob."""
    
    # Get the node that triggered the event (the Group node)
    n = nuke.thisNode() 
    
    # Get the internal Switch node
    switch_node = n.node('Mask_Switch')
    
    # Check if the event is relevant (input change or panel show)
    if nuke.thisKnob().name() in ('inputChange', 'showPanel'):
        
        if switch_node:
            # Check for mask connection (Input index 1)
            is_connected = n.input(1) is not None
            switch_value = 1 if is_connected else 0
            
            # Set the internal Switch's 'which' knob
            switch_node.knob('which').setValue(switch_value)

# Register the function to the Group node (Run this command after defining the function)
nuke.toNode('MyGroup').knob('knobChanged').setValue('update_mask_switch_callback()')
</pre>

<div id="Nuke - Python - Callbacks-üõ†Ô∏è Script Editor Method for Setting Callbacks-Execution Steps"><h3 id="Execution Steps" class="header"><a href="#Nuke - Python - Callbacks-üõ†Ô∏è Script Editor Method for Setting Callbacks-Execution Steps">Execution Steps</a></h3></div>

<ul>
<li>
Open the Script Editor: (Workspace &gt; Script Editor, or press Alt/Option+S).

<li>
Paste the Code: Paste the entire block above (both the function definition and the final registration command) into the top (Python input) pane of the Script Editor.

<li>
Run the Script: Press Ctrl/Cmd + Enter or click the Run button.

</ul>

<div id="Nuke - Python - Callbacks-üõ†Ô∏è Script Editor Method for Setting Callbacks-Execution Steps-Why this works:"><h4 id="Why this works:" class="header"><a href="#Nuke - Python - Callbacks-üõ†Ô∏è Script Editor Method for Setting Callbacks-Execution Steps-Why this works:">Why this works:</a></h4></div>

<ul>
<li>
<span id="Nuke - Python - Callbacks-üõ†Ô∏è Script Editor Method for Setting Callbacks-Execution Steps-Why this works:-Function Definition"></span><strong id="Function Definition">Function Definition</strong>: When you run the script, Python defines the update_mask_switch_callback function in Nuke's global memory.

<li>
<span id="Nuke - Python - Callbacks-üõ†Ô∏è Script Editor Method for Setting Callbacks-Execution Steps-Why this works:-Registration"></span><strong id="Registration">Registration</strong>: The final line, nuke.toNode('MyGroup').knob('knobChanged').setValue('update_mask_switch_callback()'), tells the target node (MyGroup) that every time a relevant event occurs, it should execute the function defined in memory.

<li>
<span id="Nuke - Python - Callbacks-üõ†Ô∏è Script Editor Method for Setting Callbacks-Execution Steps-Why this works:-No One-Liner Syntax"></span><strong id="No One-Liner Syntax">No One-Liner Syntax</strong>: Since the function definition and the registration are separate steps, you never hit the single-line syntax constraint.

</ul>

<p>
This method is highly recommended for building and customizing individual tools within your current Nuke session. For distribution, you would typically save the custom node as a Gizmo or a Group preset after setting these callbacks.
</p>

<p>
<a href="nuke_index.html">Nuke Index</a>
</p>

<p>
<a href="index.html">index</a>
</p>

</body>
</html>
