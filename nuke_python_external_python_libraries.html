<!DOCTYPE html>
<html>
<head>
<link rel="Stylesheet" type="text/css" href="style.css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<title>nuke_python_external_python_libraries</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<p>
<a href="index.html">index</a>
</p>

<p>
<a href="nuke_index.html">Nuke Index</a>
</p>

<div id="External Python Libraries"><h1 id="External Python Libraries" class="header"><a href="#External Python Libraries">External Python Libraries</a></h1></div>

<div id="Finding Installed Python Modules"><h1 id="Finding Installed Python Modules" class="header"><a href="#Finding Installed Python Modules">Finding Installed Python Modules</a></h1></div>

<div id="Finding Installed Python Modules-QUESTION"><h4 id="QUESTION" class="header"><a href="#Finding Installed Python Modules-QUESTION">QUESTION</a></h4></div>

<table>
<tr>
<td>
How can you install an use external python library for use with Nuke?
</td>
</tr>
</table>

<p>
To use an external Python library in Nuke, you must ensure the library is accessible by Nuke's Python interpreter. This can be achieved by modifying the PYTHONPATH environment variable or by appending the library's path to sys.path within a Nuke startup script. 
</p>

<ul>
<li>
<a href="https://community.foundry.com/discuss/topic/141478/how-to-call-an-external-package-within-nuke">Foundry - Forum Post by Erwan Leroy</a>

</ul>
<div id="Finding Installed Python Modules-Method 1: Using Environment Variables (Recommended for studio pipelines)"><h3 id="Method 1: Using Environment Variables (Recommended for studio pipelines)" class="header"><a href="#Finding Installed Python Modules-Method 1: Using Environment Variables (Recommended for studio pipelines)">Method 1: Using Environment Variables (Recommended for studio pipelines)</a></h3></div>

<p>
This method makes the library available every time Nuke launches.
</p>

<div id="Finding Installed Python Modules-Method 1: Using Environment Variables (Recommended for studio pipelines)-1. Set the PYTHONPATH environment variable:"><h4 id="1. Set the PYTHONPATH environment variable:" class="header"><a href="#Finding Installed Python Modules-Method 1: Using Environment Variables (Recommended for studio pipelines)-1. Set the PYTHONPATH environment variable:">1. Set the PYTHONPATH environment variable:</a></h4></div>

<ul>
<li>
Add the directory containing your external Python packages to the PYTHONPATH environment variable in your operating system's environment settings (e.g., in your .bashrc or .cshrc file on Linux, or System Properties on Windows).

<li>
Example (Linux/macOS, bash shell):

</ul>
  
<pre bash>
<table>
<tr>
<td>
UNTESTED
</td>
</tr>
</table>
export PYTHONPATH=$PYTHONPATH:/path/to/my/python/libraries
</pre>

<ul>
<li>
Example (Windows): Add /path/to/my/python/libraries to the PYTHONPATH variable in the System Environment Variables.

</ul>
<div id="Finding Installed Python Modules-Method 1: Using Environment Variables (Recommended for studio pipelines)-2. Launch Nuke:"><h4 id="2. Launch Nuke:" class="header"><a href="#Finding Installed Python Modules-Method 1: Using Environment Variables (Recommended for studio pipelines)-2. Launch Nuke:">2. Launch Nuke:</a></h4></div>

<ul>
<li>
Nuke will now include the specified path when searching for Python modules. 

</ul>
<div id="Finding Installed Python Modules-Method 2: Modifying sys.path in Nuke's init.py"><h3 id="Method 2: Modifying sys.path in Nuke's init.py" class="header"><a href="#Finding Installed Python Modules-Method 2: Modifying sys.path in Nuke's init.py">Method 2: Modifying sys.path in Nuke's init.py</a></h3></div>

<p>
This method is good for personal setups or temporary additions.
</p>

<ul>
<li>
Locate your .nuke folder: This folder is usually in your home directory (~/.nuke on Linux/macOS, or C:\Users\&lt;username&gt;\.nuke on Windows).

<li>
Create or edit init.py: If it doesn't exist, create a file named init.py in your .nuke folder.

<li>
Add the library path: In init.py, append the path to your library's directory to the sys.path list:

</ul>
  
<pre python>
<table>
<tr>
<td>
UNTESTED
</td>
</tr>
</table>
import sys
sys.path.append("/path/to/my/python/libraries")
</pre>

<p>
Note: Use forward slashes (/) even on Windows for path consistency in Nuke Python scripts. 
</p>

<div id="Finding Installed Python Modules-Method 3: Using Nuke's pluginAddPath()"><h3 id="Method 3: Using Nuke's pluginAddPath()" class="header"><a href="#Finding Installed Python Modules-Method 3: Using Nuke's pluginAddPath()">Method 3: Using Nuke's pluginAddPath()</a></h3></div>

<p>
You can also use the Nuke Python API function nuke.pluginAddPath(): 
</p>

<pre python>
<table>
<tr>
<td>
UNTESTED
</td>
</tr>
</table>
import nuke
nuke.pluginAddPath("/path/to/my/python/libraries")
</pre>

<p>
This can also be placed in your init.py file. 
</p>

<div id="Finding Installed Python Modules-Important Considerations"><h2 id="Important Considerations" class="header"><a href="#Finding Installed Python Modules-Important Considerations">Important Considerations</a></h2></div>

<ul>
<li>
<span id="Finding Installed Python Modules-Important Considerations-Python Version Compatibility"></span><strong id="Python Version Compatibility">Python Version Compatibility</strong>: Nuke uses a specific, embedded Python interpreter version (e.g., Python 3.11.7 in Nuke 16.0). Ensure that the external library you want to use is installed for that exact Python version and architecture (32-bit vs. 64-bit).

<li>
<span id="Finding Installed Python Modules-Important Considerations-Installation"></span><strong id="Installation">Installation</strong>: The simplest way to handle this is to use Nuke's built-in Python executable to pip install packages directly, if possible, or install the package into Nuke's site-packages directory.

<li>
<span id="Finding Installed Python Modules-Important Considerations-Importing"></span><strong id="Importing">Importing</strong>: Once the path is correctly configured, you can simply import your_library in the Nuke Script Editor or any Nuke Python script. 

</ul>
<div id="Finding Installed Python Modules-Important Considerations-QUESTION"><h4 id="QUESTION" class="header"><a href="#Finding Installed Python Modules-Important Considerations-QUESTION">QUESTION</a></h4></div>

<table>
<tr>
<td>
I want to make an external python library accessible to Nuke's Python. How do I create a library source for accessing to Nuke? I want to use the mixbox python library, so I guess I have to get a package in a specific location to access. How do I ensure that the correct version of the library is stored for Nuke? How would I distribute the library for use with a custom tool which uses the library?
</td>
</tr>
</table>

<p>
To make the mixbox library accessible to Nuke and ensure version compatibility and easy distribution, you should manage it as a self-contained package.
</p>

<div id="Finding Installed Python Modules-Important Considerations-1. Create a Library Source for Nuke Access"><h4 id="1. Create a Library Source for Nuke Access" class="header"><a href="#Finding Installed Python Modules-Important Considerations-1. Create a Library Source for Nuke Access">1. Create a Library Source for Nuke Access</a></h4></div>

<p>
The goal is to place your mixbox library files where Nuke can find them.
</p>
<ul>
<li>
<span id="Finding Installed Python Modules-Important Considerations-1. Create a Library Source for Nuke Access-Locate your target directory"></span><strong id="Locate your target directory">Locate your target directory</strong>: Create a dedicated folder to store your custom tools and libraries. A common practice is to create a central location on your network or local drive. Let's call it /path/to/my_nuke_pipeline.

<li>
<span id="Finding Installed Python Modules-Important Considerations-1. Create a Library Source for Nuke Access-Install mixbox"></span><strong id="Install mixbox">Install mixbox</strong>: You need to install the mixbox package into this specific directory. You can use pip to do this:

</ul>
  
<pre bash>
<table>
<tr>
<td>
UNTESTED
</td>
</tr>
</table>
pip install mixbox -t /path/to/my_nuke_pipeline/libraries
</pre>

<p>
This command tells pip to install the package and all its dependencies into the specified /path/to/my_nuke_pipeline/libraries directory. 
</p>

<div id="Finding Installed Python Modules-Important Considerations-2. Ensure Correct Versioning and Compatibility"><h4 id="2. Ensure Correct Versioning and Compatibility" class="header"><a href="#Finding Installed Python Modules-Important Considerations-2. Ensure Correct Versioning and Compatibility">2. Ensure Correct Versioning and Compatibility</a></h4></div>

<p>
Nuke's Python interpreter has a specific version (e.g., Nuke 16.0 uses Python 3.11.7). The mixbox library must be compatible with this version. 
</p>

<ul>
<li>
Check Nuke's Python version: In Nuke's Script Editor, run:

</ul>
  
<pre python>
<table>
<tr>
<td>
UNTESTED
</td>
</tr>
</table>
import sys
print(sys.version)
</pre>

<ul>
<li>
Specify a version (if needed): If you require a specific version of mixbox or run into compatibility issues, you can specify the version during installation:

</ul>
  
<pre bash>
<table>
<tr>
<td>
UNTESTED
</td>
</tr>
</table>
pip install mixbox==&lt;specific_version&gt; -t /path/to/my_nuke_pipeline/libraries
</pre>

<ul>
<li>
Verify the installed package: The /path/to/my_nuke_pipeline/libraries folder should now contain the mixbox directory and any other required dependencies. 

</ul>
<div id="Finding Installed Python Modules-Important Considerations-3. Distribute the Library and Custom Tool"><h3 id="3. Distribute the Library and Custom Tool" class="header"><a href="#Finding Installed Python Modules-Important Considerations-3. Distribute the Library and Custom Tool">3. Distribute the Library and Custom Tool</a></h3></div>

<p>
The most robust way to distribute your tool is to keep the library dependencies bundled with your custom tool's directory structure and add that entire structure to Nuke's PYTHONPATH.
</p>

<ul>
<li>
Structure your distribution folder:

</ul>
  
<pre>
/path/to/my_nuke_pipeline/
├── custom_tool/
│   ├── tool_script.py
│   └── menu.py
└── libraries/
    ├── mixbox/
    └── (other dependencies)
</pre>

<ul>
<li>
<span id="Finding Installed Python Modules-Important Considerations-3. Distribute the Library and Custom Tool-Use an environment variable for distribution"></span><strong id="Use an environment variable for distribution">Use an environment variable for distribution</strong>: Define a central environment variable, e.g., NUKE_PIPELINE_ROOT, pointing to /path/to/my_nuke_pipeline. This makes distribution easy; users just need to set one variable.

<li>
<span id="Finding Installed Python Modules-Important Considerations-3. Distribute the Library and Custom Tool-Add the library path to Nuke"></span><strong id="Add the library path to Nuke">Add the library path to Nuke</strong>: In the user's Nuke startup (e.g., the ~/.nuke/init.py file or a studio-wide startup script), add the libraries folder to PYTHONPATH:

</ul>
  
<pre python>
<table>
<tr>
<td>
UNTESTED
</td>
</tr>
</table>
import sys
import os

pipeline_root = os.environ.get("NUKE_PIPELINE_ROOT", "/default/path/if/var/not/set")
library_path = os.path.join(pipeline_root, "libraries")

if os.path.exists(library_path):
    sys.path.append(library_path)

# Also add the custom_tool folder if needed for menu.py or tool_script.py
# sys.path.append(os.path.join(pipeline_root, "custom_tool"))
</pre>

<ul>
<li>
<span id="Finding Installed Python Modules-Important Considerations-3. Distribute the Library and Custom Tool-Import in your tool"></span><strong id="Import in your tool">Import in your tool</strong>: Your custom tool's scripts can now simply use import mixbox without needing to worry about system-wide Python installations or conflicts. 

</ul>
<p>
By managing the libraries separately in a controlled directory and adding that path to Nuke's environment, you ensure version consistency and easy deployment across multiple machines.
</p>

<p>
Here is a guide on how to prepare, ensure version compatibility, and distribute an external library like mixbox for Nuke.
</p>

<div id="Finding Installed Python Modules-Important Considerations-How to Create a Library Source"><h3 id="How to Create a Library Source" class="header"><a href="#Finding Installed Python Modules-Important Considerations-How to Create a Library Source">How to Create a Library Source</a></h3></div>

<p>
To access the mixbox library, you need its source code or pre-compiled packages. Since mixbox is a Python library, the source is likely a set of Python files (.py) within a directory structure that constitutes a package.
</p>

<ul>
<li>
<span id="Finding Installed Python Modules-Important Considerations-How to Create a Library Source-Obtain the library files"></span><strong id="Obtain the library files">Obtain the library files</strong>: You can get these by running pip install mixbox in a standard Python environment and then locating the installed files, or by cloning the source code repository from a place like GitHub.

<li>
<span id="Finding Installed Python Modules-Important Considerations-How to Create a Library Source-Organize the files"></span><strong id="Organize the files">Organize the files</strong>: The core of the library should be a folder (e.g., mixbox) containing an _<em>init</em>_.py file and the other necessary Python modules. 

</ul>
<div id="Finding Installed Python Modules-Important Considerations-Ensuring the Correct Version for Nuke"><h3 id="Ensuring the Correct Version for Nuke" class="header"><a href="#Finding Installed Python Modules-Important Considerations-Ensuring the Correct Version for Nuke">Ensuring the Correct Version for Nuke</a></h3></div>

<p>
The most crucial step is matching the Python version. Nuke embeds a specific Python interpreter (e.g., Nuke 16.0 uses Python 3.11.7). 
</p>

<div id="Finding Installed Python Modules-Important Considerations-Ensuring the Correct Version for Nuke-1. Find Nuke's Python version:"><h4 id="1. Find Nuke's Python version:" class="header"><a href="#Finding Installed Python Modules-Important Considerations-Ensuring the Correct Version for Nuke-1. Find Nuke's Python version:">1. Find Nuke's Python version:</a></h4></div>

<ul>
<li>
Open Nuke and go to the Script Editor.

<li>
Run the following commands:

</ul>
  
<pre python>
<table>
<tr>
<td>
UNTESTED
</td>
</tr>
</table>
import sys
print(sys.version)
print(sys.executable)
</pre>

<ul>
<li>
This will tell you the exact Python version and the path to the Nuke Python executable.

</ul>
<div id="Finding Installed Python Modules-Important Considerations-Ensuring the Correct Version for Nuke-2. Install the correct library version:"><h4 id="2. Install the correct library version:" class="header"><a href="#Finding Installed Python Modules-Important Considerations-Ensuring the Correct Version for Nuke-2. Install the correct library version:">2. Install the correct library version:</a></h4></div>

<ul>
<li>
Use Nuke's specific Python executable to install the mixbox package, which helps ensure compatibility.

<li>
Open your command prompt or terminal and use the full path to the Nuke Python executable you found in the previous step:

<li>
Example (Windows): <code>C:\Program Files\Nuke16.0v6\python.exe -m pip install mixbox</code>1

<li>
Example (Linux/macOS): <code>/Applications/Nuke16.0v6/Nuke16.0v6.app/Contents/MacOS/python -m pip install mixbox</code>

<li>
To install a specific version, use ==: C:\...\python.exe -m pip install mixbox==1.0.0. 

</ul>
<div id="Finding Installed Python Modules-Important Considerations-Distributing the Library and Custom Tool"><h3 id="Distributing the Library and Custom Tool" class="header"><a href="#Finding Installed Python Modules-Important Considerations-Distributing the Library and Custom Tool">Distributing the Library and Custom Tool</a></h3></div>

<p>
For distribution in a studio environment, you can't rely on every user running pip install. The best practice is to centralize the library and manage access via environment variables.
</p>

<ul>
<li>
1. Centralized Storage:

<ul>
<li>
Store your custom tool's Python scripts and the mixbox library in a shared, network-accessible location (e.g., a network drive or a central server).

<li>
Structure the directory like this:

</ul>
</ul>
  
<pre>
//STUDIO_SERVER/NukeTools/
|-- my_custom_tool/
|   |-- scripts/
|   |   |-- my_tool.py
|   |-- init.py
|   |-- menu.py
|-- python_libs/
|   |-- mixbox/
|   |   |-- __init__.py
|   |   |-- ... other mixbox files
|   |-- ... other libraries
</pre>

<ul>
<li>
2. Manage Access with PYTHONPATH:

<ul>
<li>
Use a studio-wide script or a startup procedure to set the PYTHONPATH environment variable for all Nuke users before they launch Nuke. This adds your central library location to the paths Nuke checks for modules.

<li>
The variable should point to the parent directory of your libraries (e.g., //STUDIO_SERVER/NukeTools/python_libs).

<li>
Example (in a startup shell script):

</ul>
</ul>
  
<pre bash>
<table>
<tr>
<td>
UNTESTED
</td>
</tr>
</table>
export PYTHONPATH=$PYTHONPATH://STUDIO_SERVER/NukeTools/python_libs
# Then launch Nuke
/path/to/Nuke
</pre>

<ul>
<li>
3. Use requirements.txt:

<ul>
<li>
To ensure all dependencies are documented and easily installable for new setups or different Nuke versions, create a requirements.txt file in your custom tool's directory.

<li>
This file lists the required packages and their exact versions:

</ul>
</ul>
  
<pre>
mixbox==1.0.0
</pre>

<ul>
<li>
New users or system administrators can then run pip install -r requirements.txt using the Nuke Python executable to install all necessary packages in one go. 

</ul>
<p>
By following these steps, you ensure consistent access and version control for your mixbox library across different user setups.
</p>

<p>
<a href="nuke_index.html">Nuke Index</a>
</p>

<p>
<a href="index.html">index</a>
</p>

</body>
</html>
