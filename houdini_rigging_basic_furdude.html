<!DOCTYPE html>
<html>
<head>
<link rel="Stylesheet" type="text/css" href="style.css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<title>houdini_rigging_basic_furdude</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<p>
<a href="index.html">index</a>
</p>

<p>
<a href="Houdini.html">Houdini</a>
</p>

<div id="Basic Rigging"><h1 id="Basic Rigging" class="header"><a href="#Basic Rigging">Basic Rigging</a></h1></div>
<div id="Basic Rigging-[[https://www.sidefx.com/tutorials/foundations-rig-fur-dude-with-kinefx/|Link: SideFX Tutorials - Fur Dude]]"><h4 id="[[https://www.sidefx.com/tutorials/foundations-rig-fur-dude-with-kinefx/|Link: SideFX Tutorials - Fur Dude]]" class="header"><a href="#Basic Rigging-[[https://www.sidefx.com/tutorials/foundations-rig-fur-dude-with-kinefx/|Link: SideFX Tutorials - Fur Dude]]"><a href="https://www.sidefx.com/tutorials/foundations-rig-fur-dude-with-kinefx/">Link: SideFX Tutorials - Fur Dude</a></a></h4></div>
<ul>
<li>
<a href="https://media.sidefx.com/files/tutorials/foundations-rig-fur-dude-with-kinefx/hfoundations_07_kinefx_furdude.pdf">Download PDF</a>

<li>
<a href="https://media.sidefx.com/files/tutorials/foundations-rig-fur-dude-with-kinefx/fur_dude_start.zip">Download Files</a>

</ul>
<div id="Introduction"><h1 id="Introduction" class="header"><a href="#Introduction">Introduction</a></h1></div>
<div id="Introduction-[[https://www.sidefx.com/tutorials/foundations-rig-fur-dude-with-kinefx/|Link: Introduction]]"><h4 id="[[https://www.sidefx.com/tutorials/foundations-rig-fur-dude-with-kinefx/|Link: Introduction]]" class="header"><a href="#Introduction-[[https://www.sidefx.com/tutorials/foundations-rig-fur-dude-with-kinefx/|Link: Introduction]]"><a href="https://www.sidefx.com/tutorials/foundations-rig-fur-dude-with-kinefx/">Link: Introduction</a></a></h4></div>

<p>
In the next chapters the tutorial covers the following - open the FurDude start file and:
</p>
<ol>
<li>
Drawing a skeleton

<li>
Capture the Geometry using biharmonic method

<li>
Add more bones to the skeleton

<li>
Re-orient joints

<li>
Attach capture geometry

<li>
Paint capture weights with brushwork

<li>
Capture the rigid geometry (eyes, teeth) as packed geometry

<li>
Create capture rig Digital Asset

<li>
Create the Animation Rig Asset

<li>
Add more 'control' joints

<li>
Add the main controls

<li>
Add Inverse Kinematics for the legs

<li>
Create a Reverse Foot setup

<li>
Promote the Leg and Spine Controls

<li>
Eye controls

<li>
Animate the Rig

<li>
Add &amp; Groom the fur

<li>
Set up and Render the shot

</ol>
<div id="1 Drawing the Skeleton"><h1 id="1 Drawing the Skeleton" class="header"><a href="#1 Drawing the Skeleton">1 Drawing the Skeleton</a></h1></div>

<p>
Start in the supplied file and jump into the 'fur_dude' geometry container (Network Editor).
</p>

<p>
Switch to Wireframe. (<code>W</code> key.)
</p>

<p>
Use the <code>&lt;space&gt; B</code> shortcut to move between 4 views and the individual views in the Viewport. (It's a toggle to the view under the mouse.)
</p>

<div id="1 Drawing the Skeleton-Creating The Body Skeleton"><h2 id="Creating The Body Skeleton" class="header"><a href="#1 Drawing the Skeleton-Creating The Body Skeleton">Creating The Body Skeleton</a></h2></div>

<ul>
<li>
Go to the <code>right</code> view

<li>
Create a <code>Skeleton</code> node:

<ul>
<li>
Do not connect this node to the 'Load file' node.

<li>
Set 'Skeleton' node's display flags (and set the File import to 'template')

<li>
Hit <code>&lt;enter&gt;</code> in the Viewport while the Skeleton node is selected to evoke the controls

<li>
Mode to Create

<li>
Joint Placement to Freehand

<li>
<code>MMB</code> to end the drawing of joints

</ul>
<li>
Place 7 joints from the hip to the head, just above the center of the eye height (but ending half way between the edge of the eye and the head).

<li>
Enter 'Tweak' mode to adjust:

<li>
Set to <code>Modify</code> rather than 'Create' (I had to use the <code>F</code> key to achieve this properly; the drop down keeps switching back)

<ul>
<li>
Switch on <code>Child Compensation</code> to be able to move them all independently

<li>
For precise editing <code>P</code> for the parameter floating window:

<ul>
<li>
Auto Aline Parent to Child was causing me problems

<li>
You can enter precise values - I entered zero on x for example. 

</ul>
</ul>
<li>
You can enter names for the joints in this Viewport view (top bar):

<ul>
<li>
Select joint, and enter name in field on the top bar

</ul>
<li>
You can also rename using the <code>Rig Tree</code> panel.

</ul>
<p>
Rename the joints to:
</p>
<ul>
<li>
COG

<li>
spine1

<li>
spine2

<li>
spine3

<li>
neck1

<li>
neck2

<li>
head

</ul>
<div id="1 Drawing the Skeleton-Creating a Leg Skeleton"><h2 id="Creating a Leg Skeleton" class="header"><a href="#1 Drawing the Skeleton-Creating a Leg Skeleton">Creating a Leg Skeleton</a></h2></div>

<p>
Switch the Skeleton options to 'Create' mode
</p>
<ul>
<li>
<code>MMB</code> to prevent the bones from starting again at the head joint

<li>
Click on the hip joint to start a chain from there:

<ul>
<li>
<code>&lt;space&gt; B</code> move over the Front view, and <code>&lt;space&gt; B</code> to choose it

<li>
Draw a little below the COG

<li>
Draw a hip

<li>
knee

<li>
ankle

<li>
ball of foot (but back a bit)

<li>
toe

</ul>
</ul>
<p>
This will make 6 joints (the first click on the hip counts)
</p>

<p>
Rename as:
</p>
<ul>
<li>
pelvis

<li>
l_hip

<li>
l_knee

<li>
l_ankle

<li>
l_ball

<li>
l_toe

</ul>
<p>
Take a look in the Perspective view (<code>&lt;space&gt; B</code> etc.)
</p>

<div id="1 Drawing the Skeleton-Mirroring the Leg"><h2 id="Mirroring the Leg" class="header"><a href="#1 Drawing the Skeleton-Mirroring the Leg">Mirroring the Leg</a></h2></div>

<p>
Drop a <code>Skeleton Mirror</code> node.
</p>
<ul>
<li>
Tab and select Skeleton Mirror (in the Viewport!)

<li>
On the <code>Skeleton Mirror</code> parameters pane, click the picker arrow next to the Group field:

<ul>
<li>
Select the joints from the hip to the toe (not the pelvis)

<li>
Hit <code>&lt;enter&gt;</code> to evoke the mirroring.

</ul>
<li>
This action will list the selected joints in the 'Groups' field.

<li>
In the <code>Naming</code> section of the <code>Skeleton Mirror</code> node:

<ul>
<li>
Token Position to <code>start</code>

<li>
Find Tokens field to <code>l_</code>

<li>
Replace Tokens field to <code>r_</code>

<li>
(You can do this AFTER hitting return - it just updates the Group list.

</ul>
<li>
The <code>Rig Tree</code> might show the new mirrored leg collapsed - open the hierarchy to see the new 'r_' items.

</ul>
<div id="2 Capture the Geometry"><h1 id="2 Capture the Geometry" class="header"><a href="#2 Capture the Geometry">2 Capture the Geometry</a></h1></div>

<p>
The next step is to capture the geometry with the bones (with their influence).
</p>

<p>
Drop a <code>Joint Capture Biharmonic</code> node:
</p>
<ul>
<li>
Connect the <code>Load File</code> geometry node to input 1

<li>
Connect the <code>Skeleton Mirror</code> to both input 2 &amp; input 3

</ul>
<p>
Set the display flag to the capture node:
</p>
<ul>
<li>
You'll see a mesh to the side of the actual mesh

<li>
Colored influence visualization on the original mesh (weights).

</ul>
<p>
Next, drop a <code>Bone Deform</code> node.
</p>
<ul>
<li>
If you <code>&lt;shift&gt; enter</code> as you choose the <code>Bone Deform</code>, all three connections will form.

<li>
Alternatively, if it's dropped without connections:

<ul>
<li>
<code>&lt;shift&gt; LMB</code> on each output of the <code>Joint Capture Biharmonic</code> node

<li>
connect to the first input on the <code>Bone Deform</code>

<li>
And all three should connect up to the respective inputs.

</ul>
</ul>
<p>
Between the 3rd output of the <code>Joint Capture Biharmonic</code> node and the 3rd input of the <code>Bone Deform</code>:
</p>
<ul>
<li>
drop a <code>Rig Pose</code> node:

<ul>
<li>
This can be used to test out the joints and see the effect from their movement.

<li>
Just select a joint in the Viewport and transform a bit to test.

</ul>
</ul>
<div id="3 Add More Bones"><h1 id="3 Add More Bones" class="header"><a href="#3 Add More Bones">3 Add More Bones</a></h1></div>

<p>
This part of the tutorial is to illustrate how you can add to a skeleton by editing back at the <code>Skeleton</code> node.
</p>

<p>
Make the <code>Load File</code> node a template again, and set the display flag <code>R</code> on the <code>Skeleton</code> node.
</p>

<p>
Set the skeleton tool to:
</p>
<ul>
<li>
Mode: <code>Create</code>

<li>
Joint Placement: <code>Freehand</code>

</ul>
<div id="3 Add More Bones-Add A Mouth Bone Chain"><h2 id="Add A Mouth Bone Chain" class="header"><a href="#3 Add More Bones-Add A Mouth Bone Chain">Add A Mouth Bone Chain</a></h2></div>

<p>
Click on the <code>neck1</code> node to start, and add two more joints along the lower lip of the character. A third <code>MMB</code> click to end. 
</p>

<ul>
<li>
Mode: <code>Modify</code> (I found I had to do this with the <code>f</code> key and not the dropdown which wouldn't work)

<li>
<code>Child Compensate</code> to 'on'

<li>
And <code>Tweak</code> to 'on' (<code>g</code> key)

</ul>
<p>
You can also rename these joints:
</p>
<ul>
<li>
First to <code>jaw</code>

<li>
Second to <code>lower_mouth</code>

</ul>
<p>
Back at the <code>Bone Deform</code>, you can adjust the new bones to see the affect. (The capture and weighting has already been calculated as the stream passes through the other nodes.)
</p>

<div id="3 Add More Bones-Add The Eye Bone"><h2 id="Add The Eye Bone" class="header"><a href="#3 Add More Bones-Add The Eye Bone">Add The Eye Bone</a></h2></div>

<p>
Back at the <code>Skeleton</code>, same set up as the mouth bones.
</p>

<ul>
<li>
Create mode, and draw by clicking on the <code>head</code> joint, and dropping a second in the center of the eye-ball.

<li>
Do this again, to create another bone which terminates slightly above the first

<li>
Again, to create on slightly below the first.

</ul>
<p>
The result should be three bones emanating from the <code>head</code> joint to the eye.
</p>

<p>
These should be named (from the top):
</p>
<ul>
<li>
upper_lid

<li>
eyeball

<li>
lower_lid

</ul>
<p>
All three of these end joints should be in the exact same location - the center of the eye-ball mesh.
</p>

<p>
These don't function yet (in any practical way), but we'll rig theses later.
</p>

<div id="4 Joint Orientations"><h1 id="4 Joint Orientations" class="header"><a href="#4 Joint Orientations">4 Joint Orientations</a></h1></div>

<p>
The orientation of each joint has been set by the way the joints were drawn, but we can adjust the orientation as needed.
</p>

<p>
To rotate the little gnomons:
</p>
<ul>
<li>
<code>Child Compensation</code> to 'on' (this allows us to rotate the joints without influencing the skeleton layout).

<li>
<code>Mode</code> to <code>Modify</code> ('f' key)

<li>
<code>Tweak Mode</code> to 'on' ('g' key)

</ul>
<p>
In the tutorial (and it's not explained why) the COG and the pelvis joints are set to point up (y up).
</p>

<p>
Next, the other joints are oriented with an <code>Orient Joints</code> node placed after the <code>Skeleton</code> node (before the <code>Skeleton Mirror</code> node).
</p>
<ul>
<li>
With the picker on the Group field:

<ul>
<li>
Select all the joints, then deselect the COG and pelvis joints

<li>
<code>&lt;enter&gt;</code> to add these to the <code>Orient Group</code> field

<li>
<code>Reference Vector</code> to <code>0, 0, 1</code> (to have them point to a positive <code>z</code> direction)

</ul>
</ul>
<div id="5 Attach Capture Geometry"><h1 id="5 Attach Capture Geometry" class="header"><a href="#5 Attach Capture Geometry">5 Attach Capture Geometry</a></h1></div>

<p>
This section of the tutorial showed how to extract curves from the edges of the lip geometry (upper and lower) and use these extracted curves to act as aids to capture the geometry to the bones assigned to the new curves.
</p>

<p>
The end product is that the upper lip curve pulls the upper lip geo up with the head bone, and the lower lip curve allows the bottom lip to open with the mouth bone. There is no blend in the weights - the curves direct the weights accurately and separately.
</p>

<div id="5 Attach Capture Geometry-Split Node"><h2 id="Split Node" class="header"><a href="#5 Attach Capture Geometry-Split Node">Split Node</a></h2></div>

<p>
We need to extract the eye and the tongue from the main geo.
</p>

<ul>
<li>
Drop a <code>Split</code> node immediately after the <code>File</code> node:

<ul>
<li>
In the Group field dropdown choose:

<ul>
<li>
<code>fur_dude_body</code>

<li>
<code>fur_dude_tongue</code>

</ul>
</ul>
<li>
Add a <code>Visibility</code> node:

<ul>
<li>
In the Group field dropdown choose:

<ul>
<li>
<code>fur_dude_tongue</code> 

<li>
This hides the tongue, but doesn't change the geometry.

<li>
The tongue can be brought back later.

</ul>
</ul>
</ul>
<div id="5 Attach Capture Geometry-Extracting Curves from Edges"><h2 id="Extracting Curves from Edges" class="header"><a href="#5 Attach Capture Geometry-Extracting Curves from Edges">Extracting Curves from Edges</a></h2></div>

<p>
With the <code>Select</code> tool, choose the edge selection mode:
</p>
<ul>
<li>
Select the last edge of a polygon on the front of the bottom lip.

<li>
<code>A</code> key while clicking the opposite edge (same edge symmetrically).

<ul>
<li>
The <code>A</code> key should allow you to select the section around the lip.

</ul>
<li>
Drop a <code>Curve From Edges</code> node (tab in the Viewport):

<ul>
<li>
Rename to <code>lower_lip</code>

<li>
This node should be forking out of the <code>Visibility</code> node, and not in the chain.

</ul>
<li>
Repeat this with the top lip:

<ul>
<li>
Select the edge along the top lip as it passes into the mouth cavity.

<li>
Again, edge at the 'corner' of the mouth, <code>A</code> key and select symmetrically.

</ul>
<li>
Drop another <code>Curve from Edges</code> node:

<ul>
<li>
Rename to <code>upper_lip</code>

<li>
Again, fork this node from the <code>Visibility</code> node.

</ul>
</ul>
<p>
The <code>Visibility</code> node should now have three lines coming out:
</p>
<ul>
<li>
To the <code>Joint Capture Biharmonic</code> node

<li>
The <code>lower_lip</code> node

<li>
The <code>upper_lip</code> node

</ul>
<div id="5 Attach Capture Geometry-Merge Packed"><h2 id="Merge Packed" class="header"><a href="#5 Attach Capture Geometry-Merge Packed">Merge Packed</a></h2></div>

<p>
Next we need to drop a <code>Merge Packed</code> node:
</p>
<ul>
<li>
Attach <code>lower_lip</code> into the first input

<li>
Attach <code>upper_lip</code> into the second input

</ul>
<p>
This node will 'pack' each input's geometry first, then merge the inputs.
</p>

<p>
The output from the <code>Merged Packed</code> needs to be plugged into the second (middle) input on the <code>Joint Capture Biharmonic</code> node (but we'll add one more node in the very next step).
</p>

<p>
Add an <code>Attach Joint Geo</code>:
</p>
<ul>
<li>
<code>Skeleton Mirror</code> into input 1

<li>
<code>Merge Packed</code> into input 2

</ul>
<p>
In the parameter panel of the <code>Attach Joint Geo</code> we can assign these 'helper' curves to their specific bones:
</p>
<ul>
<li>
<code>Assign Shapes</code> to 2:

<ul>
<li>
First:

<ul>
<li>
<code>Group</code> to <code>@name=lower_mouth</code> (this is the bone)

<li>
<code>Shape Name</code> to <code>lower_lip</code> (this is the new curve)

<li>
<code>Keep Shape World Transform</code> to 'on'

</ul>
<li>
Second:

<ul>
<li>
<code>Group</code> to <code>@name=neck2</code>  (this is the bone)

<li>
<code>Shape Name</code> to <code>upper_lip</code> (this is the new curve)

<li>
<code>Keep Shape World Transform</code> to 'on'

</ul>
</ul>
</ul>
<p>
Plug the output of the <code>Attach Capture Geo</code> node to the second (middle) input on the <code>Joint Capture Biharmonic</code> node again.
</p>


<div id="5 Attach Capture Geometry-Clear - Rig Pose"><h2 id="Clear - Rig Pose" class="header"><a href="#5 Attach Capture Geometry-Clear - Rig Pose">Clear - Rig Pose</a></h2></div>

<p>
In the tutorial, the instructor 'clears' (a <code>Clear</code> button at the very top of the parameters pane) all the changes on the <code>Rig Pose</code> node
</p>

<div id="6 Paint Capture Weights"><h1 id="6 Paint Capture Weights" class="header"><a href="#6 Paint Capture Weights">6 Paint Capture Weights</a></h1></div>



<p>
<br>
<a href="Houdini.html">Houdini</a>
</p>

<p>
<a href="index.html">index</a>
</p>

</body>
</html>
