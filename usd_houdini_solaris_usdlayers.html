<!DOCTYPE html>
<html>
<head>
<link rel="Stylesheet" type="text/css" href="style.css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<title>usd_houdini_solaris_usdlayers</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<p>
<a href="index.html">index</a>
</p>

<p>
<a href="Houdini.html">Houdini</a>
</p>

<div id="USD Layers"><h1 id="USD Layers" class="header"><a href="#USD Layers">USD Layers</a></h1></div>

<div id="USD Layers-Video Link:"><h3 id="Video Link:" class="header"><a href="#USD Layers-Video Link:">Video Link:</a></h3></div>
<div id="USD Layers-Video Link:-[[https://www.youtube.com/watch?v=cE-Bbdspu_8&amp;t=9558s|02:39:18 USD Layers]]"><h4 id="[[https://www.youtube.com/watch?v=cE-Bbdspu_8&amp;t=9558s|02:39:18 USD Layers]]" class="header"><a href="#USD Layers-Video Link:-[[https://www.youtube.com/watch?v=cE-Bbdspu_8&amp;t=9558s|02:39:18 USD Layers]]"><a href="https://www.youtube.com/watch?v=cE-Bbdspu_8&amp;t=9558s">02:39:18 USD Layers</a></a></h4></div>


<div id="USD Layers-Overview of USD Layers"><h3 id="Overview of USD Layers" class="header"><a href="#USD Layers-Overview of USD Layers">Overview of USD Layers</a></h3></div>

<p>
Rather save one Ã¼ber usd layer/file with everything in the single file, you can choose to corral the elements into <code>layers</code>.
</p>

<p>
You can use <code>Configure Layer</code> nodes to collect streams of data into layers, before merging the data into a <code>Merge</code> node, and choose to keep the these layers (effectively separated and curated collections) when the ultimate USD file is written to disk. (The writing will create multiple files, which are referenced into the main <code>USD file</code>.)
</p>

<div id="USD Layers-Streams"><h3 id="Streams" class="header"><a href="#USD Layers-Streams">Streams</a></h3></div>

<p>
For want of a better word, in the tutorial on which these notes were taken, the scene has been created with a network of various structured or themed <code>streams</code>, leading ultimately to a merge:
</p>

<ul>
<li>
Main Geometry items

<li>
Props

<li>
Lighting (Lights)

<li>
Camera(s)

</ul>
<div id="USD Layers-Configure Layer Node"><h3 id="Configure Layer Node" class="header"><a href="#USD Layers-Configure Layer Node">Configure Layer Node</a></h3></div>

<ul>
<li>
Drop a <code>Configure Layer</code> node after all the elements in a stream.

<li>
Check <code>Start New Layer</code>

<li>
Flatten Input drop-down:

<ul>
<li>
<code>Do Not Flatten</code> to keep referenced imports 'as is'

<li>
<code>Flatten Input Stage</code> to combine upper inputs into one file/layer

</ul>
<li>
Save Path:

<ul>
<li>
This is where the USD data will be saved

<li>
Remember that $OS is a great way to use the node name/label in the path

</ul>
</ul>
<div id="USD Layers-Configure Layer Node-Each Stream Can Have a Configure Layer Node"><h4 id="Each Stream Can Have a Configure Layer Node" class="header"><a href="#USD Layers-Configure Layer Node-Each Stream Can Have a Configure Layer Node">Each Stream Can Have a Configure Layer Node</a></h4></div>

<ul>
<li>
Main geo --&gt; layer

<li>
Props --&gt; layer

<li>
Lights --&gt; layer

<li>
Cameras --&gt; layer

</ul>
<div id="USD Layers-Scene Graph Layers Panel"><h3 id="Scene Graph Layers Panel" class="header"><a href="#USD Layers-Scene Graph Layers Panel">Scene Graph Layers Panel</a></h3></div>

<p>
In the <code>Scene Graph Layers Panel</code>, you can seen the hierarchy of USD layers.
</p>

<p>
The columns include Save Control. These have the potential of two states.
</p>
<ul>
<li>
Implicit:

<ul>
<li>
Houdini finds it's own way to save the data

</ul>
<li>
Explicit:

<ul>
<li>
Houdini saves to the path in the 'Save Path' field in parameters.

</ul>
</ul>
<p>
By filling in the <code>Save Path</code> field in the <code>Configure Layer</code> node, the layer becomes <code>Explicit</code>. (This can be illustrated by selecting a node above the Configure Layer node, and looking in the Scene Graph Layers pane at the <code>Save Control</code> column. It says Implicit above the <code>Configure Layer</code> and Explicit (with path) at and after it.
</p>


<div id="USD Layers-Merge"><h3 id="Merge" class="header"><a href="#USD Layers-Merge">Merge</a></h3></div>

<p>
The merge node to combine all the streams needs some settings to do what is wanted (to save the USD layers).
</p>

<ul>
<li>
Merge Style:

<ul>
<li>
Switch FROM Simple Merge

<li>
Switch TO Separate Layers

</ul>
</ul>
<div id="USD Layers-USD ROP node"><h3 id="USD ROP node" class="header"><a href="#USD Layers-USD ROP node">USD ROP node</a></h3></div>

<p>
Some settings:
</p>
<ul>
<li>
Save Style:

<ul>
<li>
<code>Flatten Implicit Layers</code> (Collapse Implicit Sublayers, Preserve References)

<li>
Everything that is Explicit will be saved as directed in the various points in the stream.

</ul>
</ul>
<div id="USD Layers-USD ROP node-Save to Disk/Save to Disk in Background"><h4 id="Save to Disk/Save to Disk in Background" class="header"><a href="#USD Layers-USD ROP node-Save to Disk/Save to Disk in Background">Save to Disk/Save to Disk in Background</a></h4></div>

<p>
This button (USD ROP parameter panel) saves all the USD data to disk.
</p>

<p>
It might save a main file that references other layers. If set up as above, it'll
reference sublayers as designated.
</p>

<p>
The final file will reference other files it has saved as layers.
</p>

<p>
Depending on the setup, some USD files my even reference other instances already on disk.
</p>

<p>
In this way, you can isolate individual USD files to debug or utilize (rather than one big USD file). This allows for collaboration on different areas of the data.
</p>

<p>
<a href="Houdini.html">Houdini</a>
</p>

<p>
<a href="index.html">index</a>
</p>

</body>
</html>
