<!DOCTYPE html>
<html>
<head>
<link rel="Stylesheet" type="text/css" href="style.css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<title>vim_debugging_corrupt_nuke_files</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<p>
<a href="index.html">index</a>
</p>

<p>
<a href="vim_learning.html">Vim Learning</a>
</p>

<div id="Vim Ideas for Editing Corrupt Nuke Files"><h1 id="Vim Ideas for Editing Corrupt Nuke Files" class="header"><a href="#Vim Ideas for Editing Corrupt Nuke Files">Vim Ideas for Editing Corrupt Nuke Files</a></h1></div>

<div id="Vim Ideas for Editing Corrupt Nuke Files-Detect Mismatches With A Simple Stack In :Global"><h2 id="Detect Mismatches With A Simple Stack In :Global" class="header"><a href="#Vim Ideas for Editing Corrupt Nuke Files-Detect Mismatches With A Simple Stack In :Global">Detect Mismatches With A Simple Stack In :Global</a></h2></div>

<p>
This uses Vimscript only â€” no external tools.
</p>

<p>
Put this in a function:
</p>

<pre vim>
<table>
<tr>
<td>
UNTESTED
</td>
</tr>
</table>
function! CheckGroups()
    let stack = 0
    for lnum in range(1, line('$'))
        let line = getline(lnum)
        if line =~ '^Group {'
            let stack += 1
        elseif line =~ '^end_group$'
            let stack -= 1
            if stack &lt; 0
                echohl ErrorMsg | echom "Extra end_group at line " . lnum | echohl None
                return
            endif
        endif
    endfor

    if stack &gt; 0
        echohl ErrorMsg | echom "Missing end_group (unclosed Group { )" | echohl None
    else
        echom "All groups balanced"
    endif
endfunction
</pre>

<p>
Run it with:
</p>

<pre vim>
:call CheckGroups()
</pre>
<p>
This gives you:
</p>

<ul>
<li>
<code>Extra end_group at line X</code>

<li>
<code>Missing end_group</code>

<li>
or <code>All groups balanced</code>

</ul>
<p>
<a href="vim_learning.html">Vim Learning</a>
</p>

<p>
<a href="index.html">index</a>
</p>

</body>
</html>
