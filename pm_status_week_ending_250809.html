<!DOCTYPE html>
<html>
<head>
<link rel="Stylesheet" type="text/css" href="style.css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<title>pm_status_week_ending_250809</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<p>
<a href="index.html">Index</a>
</p>

<p>
<a href="pmount_index.html">PMount</a>
</p>

<p>
<a href="pm_status_comp.html">PM - Status</a>
</p>

<div id="PM - Status - Weekending 8/9"><h1 id="PM - Status - Weekending 8/9" class="header"><a href="#PM - Status - Weekending 8/9">PM - Status - Weekending 8/9</a></h1></div>

<div id="PM - Status - Weekending 8/9-250804"><h3 id="250804" class="header"><a href="#PM - Status - Weekending 8/9-250804">250804</a></h3></div>

<div id="PM - Status - Weekending 8/9-a.m."><h3 id="a.m." class="header"><a href="#PM - Status - Weekending 8/9-a.m.">a.m.</a></h3></div>

<ul>
<li>
<code>s 2230 0360</code>:

<ul>
<li>
comping &amp; shooting.

<li>
Sent to Slack for review:

<ul>
<li>
Zoom with Dale Drummond: 10:10am

</ul>
</ul>
<li>
<code>s 2230 0350</code>:

<ul>
<li>
Resumed:

<ul>
<li>
Started on color.

</ul>
</ul>
</ul>
<p>
Discussion (brief) on slack about colorpicker edges. All good 'as is'.
</p>

<div id="PM - Status - Weekending 8/9-p.m."><h3 id="p.m." class="header"><a href="#PM - Status - Weekending 8/9-p.m.">p.m.</a></h3></div>

<ul>
<li>
<code>s 2230 0350</code>:

<ul>
<li>
continuing.

</ul>
<li>
<code>s 2230 0360</code>:

<ul>
<li>
Addressing today's notes:

<ul>
<li>
ready to shoot by end of day

</ul>
</ul>
</ul>
<div id="PM - Status - Weekending 8/9-250805"><h3 id="250805" class="header"><a href="#PM - Status - Weekending 8/9-250805">250805</a></h3></div>

<div id="PM - Status - Weekending 8/9-a.m."><h3 id="a.m." class="header"><a href="#PM - Status - Weekending 8/9-a.m.">a.m.</a></h3></div>

<ul>
<li>
Worked on <code>s 2230 0360</code>:

<ul>
<li>
Balancing characters

</ul>
</ul>
<div id="PM - Status - Weekending 8/9-a.m.-Department Zoom meeting"><h4 id="Department Zoom meeting" class="header"><a href="#PM - Status - Weekending 8/9-a.m.-Department Zoom meeting">Department Zoom meeting</a></h4></div>

<ul>
<li>
Sarah Dunton:

<ul>
<li>
Tutorial on Paintery and Airships

</ul>
</ul>
<div id="PM - Status - Weekending 8/9-p.m."><h3 id="p.m." class="header"><a href="#PM - Status - Weekending 8/9-p.m.">p.m.</a></h3></div>

<div id="PM - Status - Weekending 8/9-p.m.-Dailes:"><h4 id="Dailes:" class="header"><a href="#PM - Status - Weekending 8/9-p.m.-Dailes:">Dailes:</a></h4></div>

<ul>
<li>
<code>s 2230 0360</code>:

<ul>
<li>
Got notes.

</ul>
<li>
Worked a bit more on <code>s 2230 0350</code>

<li>
Addressing notes:

<ul>
<li>
<code>s 2230 0360</code>

<li>
Comp'ed ready to shoot tomoz

</ul>
</ul>
<div id="PM - Status - Weekending 8/9-250806"><h3 id="250806" class="header"><a href="#PM - Status - Weekending 8/9-250806">250806</a></h3></div>

<div id="PM - Status - Weekending 8/9-a.m."><h3 id="a.m." class="header"><a href="#PM - Status - Weekending 8/9-a.m.">a.m.</a></h3></div>

<ul>
<li>
<code>s 223 0360</code>:

<ul>
<li>
Shooting latest with amendments.

<li>
Sent to Slack

</ul>
</ul>
  
<pre text>
s 2230 0360 v11
rvReview /media/avoa/2230/0360/comp/frames/2230_0360_comp_v11/1/mono/default/*exr &amp;
* Gradient/falloff on Katari rim lights
* Took key  light shard from Katari's neck (near pendant)
* Reduced airbending FX
</pre>

<div id="PM - Status - Weekending 8/9-a.m.-splineblur_pmnt - holes in non-zero alpha"><h4 id="splineblur_pmnt - holes in non-zero alpha" class="header"><a href="#PM - Status - Weekending 8/9-a.m.-splineblur_pmnt - holes in non-zero alpha">splineblur_pmnt - holes in non-zero alpha</a></h4></div>

<p>
Looked into interesting issue with Ian Christie's scene file. Splineblur_pmnt was punching holes in his alpha. Turned out htat the original alpha being fed in wasn't 100% zero in the blacks, and the blur patches where creating holes.
</p>

<div id="PM - Status - Weekending 8/9-a.m.-Lisa Tse's linework issues"><h4 id="Lisa Tse's linework issues" class="header"><a href="#PM - Status - Weekending 8/9-a.m.-Lisa Tse's linework issues">Lisa Tse's linework issues</a></h4></div>
<p>
Zoomed to see what the issue is
</p>

<p>
((r == (abs(r - alpha_color.r) &lt; tol)) &amp;&amp; (g == (abs(g - alpha_color.g) &lt; tol)) &amp;&amp; (b == (abs(b - alpha_color.b) &lt; tol)) ? 1 : 1
</p>


<div id="PM - Status - Weekending 8/9-p.m."><h3 id="p.m." class="header"><a href="#PM - Status - Weekending 8/9-p.m.">p.m.</a></h3></div>

<p>
Worked on lines and cell color set up
</p>

<div id="PM - Status - Weekending 8/9-250807"><h3 id="250807" class="header"><a href="#PM - Status - Weekending 8/9-250807">250807</a></h3></div>

<div id="PM - Status - Weekending 8/9-a.m."><h3 id="a.m." class="header"><a href="#PM - Status - Weekending 8/9-a.m.">a.m.</a></h3></div>

<p>
Created the BlinkScript to smooth over cell line gaps after line removal.
</p>

<div id="PM - Status - Weekending 8/9-p.m."><h3 id="p.m." class="header"><a href="#PM - Status - Weekending 8/9-p.m.">p.m.</a></h3></div>

<div id="PM - Status - Weekending 8/9-p.m.-Dailies"><h4 id="Dailies" class="header"><a href="#PM - Status - Weekending 8/9-p.m.-Dailies">Dailies</a></h4></div>

<ul>
<li>
<code>s 2230 0360</code>:

<ul>
<li>
Add inner collar grads on both sides

<li>
Clean up the area next to the 'choker' on the neck. (Paintover?)

</ul>
</ul>
<p>
Worked more on the cell/line template on Lisa Tse's shot:
</p>

<ul>
<li>
<code>s 2850 0210</code>:

<ul>
<li>
Lots of crashes in Nuke with BlinkScript on:

<ul>
<li>
upped memory caching to 40%

</ul>
</ul>
</ul>
<p>
Spoke with Roman Robbins about the new template I created and the BlinkScript to fill inkline gaps.
</p>
<ul>
<li>
I need to create a page describing the process and features.

</ul>
<div id="BlinkScript"><h1 id="BlinkScript" class="header"><a href="#BlinkScript">BlinkScript</a></h1></div>

<p>
Backed up the code to a repo (pm_fillcells).
</p>

<div id="Confluence Page - Precomp"><h1 id="Confluence Page - Precomp" class="header"><a href="#Confluence Page - Precomp">Confluence Page - Precomp</a></h1></div>

<ul>
<li>
Made bulk of proposal for the new precomp template on Confluence page.

</ul>
<div id="Confluence Page - Precomp-250808"><h3 id="250808" class="header"><a href="#Confluence Page - Precomp-250808">250808</a></h3></div>

<div id="Confluence Page - Precomp-a.m."><h3 id="a.m." class="header"><a href="#Confluence Page - Precomp-a.m.">a.m.</a></h3></div>

<p>
Messaged to finish up on 2230 0360 (for Dailies/Review).
</p>

<p>
Finished notes on shot and sent for review.
</p>

<div id="Confluence Page - Precomp-p.m."><h3 id="p.m." class="header"><a href="#Confluence Page - Precomp-p.m.">p.m.</a></h3></div>

<div id="Confluence Page - Precomp-p.m.-Meeting with TD land - testing Nuke;"><h4 id="Meeting with TD land - testing Nuke;" class="header"><a href="#Confluence Page - Precomp-p.m.-Meeting with TD land - testing Nuke;">Meeting with TD land - testing Nuke;</a></h4></div>

<p>
<a href="https://support.foundry.com/hc/en-us/articles/206510844-Q100225-Profiling-your-Nuke-script-to-isolate-performance-issues">https://support.foundry.com/hc/en-us/articles/206510844-Q100225-Profiling-your-Nuke-script-to-isolate-performance-issues</a>
</p>

<pre text>
Here is the command to launch Nuke for the testing:
rez-env -i /tech/packages/rez/config/env/stable-r9/pa_nuke.rtx -- nuke -m 18 -c 98304000k
The "-m 18" flag is what defines the number of cores.
</pre>

<p>
Talked to Roman and Lisa about the alternate template via Zoom.
</p>
<ul>
<li>
Need to think about DI Matte impace

<li>
Need to think about line manipulation.

</ul>
<div id="Confluence Page - Precomp-p.m.-s 2850 0210"><h4 id="s 2850 0210" class="header"><a href="#Confluence Page - Precomp-p.m.-s 2850 0210">s 2850 0210</a></h4></div>

<ul>
<li>
s 2850 0210

<li>
v14_rh

<li>
We restored the ink lines to previous state in this shot, but kept the matte line improvement.

</ul>
<p>
Worked with Lisa on her shot to fix issues:
</p>
<ul>
<li>
We had to revert the lines to as they were

<li>
We kept the picker fixes.

</ul>
<div id="Confluence Page - Precomp-Testing of Comp Scripts"><h3 id="Testing of Comp Scripts" class="header"><a href="#Confluence Page - Precomp-Testing of Comp Scripts">Testing of Comp Scripts</a></h3></div>

<ul>
<li>
<code>s 0275 0010</code>

<li>
<code>s 0275 0020</code>

</ul>
<p>
These have slow render times.
</p>
<ul>
<li>
We need to test renders (overnight) with testing:

<ul>
<li>
Precomps etc and full comps:

<li>
18 cores

<li>
24 cores

</ul>
</ul>
<p>
Deliver data when ready.
</p>

<ul>
<li>
<a href="https://support.foundry.com/hc/en-us/articles/206510844-Q100225-Profiling-your-Nuke-script-to-isolate-performance-issues">Performance article</a>

<li>
<a href="https://learn.foundry.com/nuke/content/comp_environment/organizing_scripts/using_performance_timingscript_profiling.html">Performance Guide</a>

<li>
Commandline launching:

<ul>
<li>
Add <code>-P</code> to switch on performance monitoring

<li>
Add -Pf &lt;file path&gt; to export XML reports (when rendering)

</ul>
<li>
Scripting Python commands:

<ul>
<li>
<code>nuke.startPerformanceTimers()</code> # Enable performance timing

<li>
<code>nuke.usingPerformanceTimers()</code> # Start performance timers

<li>
<code>nuke.stopPerformanceTimers()</code> # Turn off performance timers

<li>
<code>nuke.resetPerformanceTimers()</code> # Reset all timers to zero

</ul>
<li>
Obtain performance Timing via Python:

</ul>
  
<pre python>
for n in nuke.allNodes(recurseGroups = True):
    print n.fullName()
    print n.performanceInfo()
</pre>

<p>
The output from this will look similar to the following output, for a simple tree consisting of Checkerboard -&gt; Blur -&gt; Defocus -&gt; Viewer:
</p>

<pre text>
Defocus1
{'callCount': 10228, 'timeTakenWall': 28524348, 'timeTakenCPU': 624512794}
Blur1
{'callCount': 9607, 'timeTakenWall': 9906815, 'timeTakenCPU': 151406143}
Viewer1
{'callCount': 0, 'timeTakenWall': 0, 'timeTakenCPU': 0}
CheckerBoard1
{'callCount': 34396, 'timeTakenWall': 3923322, 'timeTakenCPU': 29982254}
</pre>

<p>
As you can see from the above, nuke.Node.performanceInfo() returns a dictionary containing the following performance statistics:
</p>
<ul>
<li>
callCount tells you the number of times this part of the processing has been called.

<li>
timeTakenWall is the time taken as it would be measured by a clock on the wall, i.e. the actual time a user would have to wait for the processing to complete. This time is measured in microseconds.

<li>
timeTakenCPU:

</ul>
<p>
On Linux, this is the time the CPU spent executing the processing code, and again is measured in microseconds. It is an aggregate over all CPU threads so, for example, for the multi-threaded engine processing this will typically be much larger than the wall time. If the average CPU time per thread (timeTakenCPU divided by the number of threads used) is much shorter than the wall time, this suggests that the CPU threads have spent a lot of time not executing code - for example, waiting on locks - and could indicate a performance problem.
</p>

<p>
On Mac and Windows, the CPU time is not currently available; on Mac, this value will be the similar to the wall time.
</p>

<p>
rez-env -i /tech/packages/rez/config/env/stable-r9/pa_nuke.rtx -- nuke -m 18 -c 98304000k -Pf /shows/avoa/prod/0275/0010/data/nuke/performance_data/250808_1850.xml
</p>

<p>
I got a warning in my terminal and sent this to Slack (Dale Drummond, Nafisa Baker, ViJoyG, Andrew Titcomb, Patrick Kueking).
</p>
<pre text>
There seems to be a flaw with the proposed core performance tests on my work station. I get a warning that I only have access to 16 cores.
I was just trying the performance test launch for Nuke for shot 0275 0010, and used this command for 18 cores:

rez-env -i /tech/packages/rez/config/env/stable-r9/pa_nuke.rtx -- nuke -m 18 -c 98304000k

...except I added the performance data export options (-Pf &lt;filepath&gt;):

rez-env -i /tech/packages/rez/config/env/stable-r9/pa_nuke.rtx -- nuke -m 18 -c 98304000k -Pf /shows/avoa/prod/0275/0010/data/nuke/performance_data/performance_data_18cores_0275_0010_250808_1850.xml

..and I got a warning in the terminal as follows:

Warning: set number of threads to 18 however detected hardware only supports 16 which may degrade performance due to thread oversubscription.
Nuke 15.0v7, 64 bit, built Apr  7 2025.
Copyright (c) 2025 The Foundry Visionmongers Ltd.  All Rights Reserved.
Licence expires on: 2026/3/24

TBB Warning: The number of workers is currently limited to 15. The request for 17 workers is ignored. Further requests for more workers will be silently ignored until the limit changes.

('TIMING ENABLED: profile will be saved to ', '/shows/avoa/prod/0275/0010/data/nuke/performance_data/performance_data_18cores_0275_0010_250808_1850.xml')
</pre>






<p>
<a href="pm_status_comp.html">PM - Status</a>
</p>

<p>
<a href="pmount_index.html">PMount</a>
</p>

<p>
<a href="index.html">Index</a>
</p>

</body>
</html>
