<!DOCTYPE html>
<html>
<head>
<link rel="Stylesheet" type="text/css" href="style.css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<title>vim_global_commands</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<p>
<a href="index.html">index</a>
</p>

<p>
<a href="vim_learning.html">Vim Learning</a>
</p>

<div id="Global 'g' &amp; 'v'"><h2 id="Global 'g' &amp; 'v'" class="header"><a href="#Global 'g' &amp; 'v'">Global 'g' &amp; 'v'</a></h2></div>

<div id="The :global Command"><h1 id="The :global Command" class="header"><a href="#The :global Command">The :global Command</a></h1></div>

<p>
The <code>:global</code> command (or simply <code>:g</code>) in Vim is incredibly powerful and versatile. It allows you to perform actions on all lines that match a given pattern. Think of it as a way to combine searching and executing commands efficiently across your file.
</p>

<div id="The :global Command-Syntax"><h4 id="Syntax" class="header"><a href="#The :global Command-Syntax">Syntax</a></h4></div>

<p>
<code>:g/pattern/command</code>
</p>

<ul>
<li>
<code>pattern</code>: A regular expression that specifies which lines to target.

<li>
<code>command</code>: The action to execute on the lines that match the pattern.

</ul>
<div id="The :global Command-How It Works"><h3 id="How It Works" class="header"><a href="#The :global Command-How It Works">How It Works</a></h3></div>

<ul>
<li>
Vim searches for all lines in the current buffer that match the given pattern.

<li>
For each matching line, it applies the specified command.

</ul>
<div id="Common Use Cases"><h1 id="Common Use Cases" class="header"><a href="#Common Use Cases">Common Use Cases</a></h1></div>

<div id="Common Use Cases-Printing Matching Lines:"><h4 id="Printing Matching Lines:" class="header"><a href="#Common Use Cases-Printing Matching Lines:">Printing Matching Lines:</a></h4></div>

<ul>
<li>
<code>:g/pattern/p</code> --&gt; This prints all lines in the file that contain the specified pattern.

</ul>
<div id="Common Use Cases-Deleting Matching Lines:"><h4 id="Deleting Matching Lines:" class="header"><a href="#Common Use Cases-Deleting Matching Lines:">Deleting Matching Lines:</a></h4></div>

<ul>
<li>
<code>:g/pattern/d</code> --&gt; Deletes all lines in the file containing pattern.

</ul>
<div id="Common Use Cases-Searching and Substituting:"><h4 id="Searching and Substituting:" class="header"><a href="#Common Use Cases-Searching and Substituting:">Searching and Substituting:</a></h4></div>

<ul>
<li>
<code>:g/pattern/s/old/new/g</code> --&gt; Finds lines with pattern and replaces occurrences of old with new within those lines.

</ul>
<div id="Common Use Cases-Executing Normal Mode Commands:"><h4 id="Executing Normal Mode Commands:" class="header"><a href="#Common Use Cases-Executing Normal Mode Commands:">Executing Normal Mode Commands:</a></h4></div>

<ul>
<li>
<code>:g/pattern/norm command</code> --&gt; Runs a normal mode command (e.g., dd, O, etc.) on all matching lines.

</ul>
<div id="Common Use Cases-Inverting Matches:"><h2 id="Inverting Matches:" class="header"><a href="#Common Use Cases-Inverting Matches:">Inverting Matches:</a></h2></div>

<ul>
<li>
<code>:v/pattern/command</code> --&gt; The v command (short for "global inverse") applies the command to lines not matching the pattern.

</ul>
<div id="Common Use Cases-Chaining Commands:"><h2 id="Chaining Commands:" class="header"><a href="#Common Use Cases-Chaining Commands:">Chaining Commands:</a></h2></div>

<ul>
<li>
<code>:g/pattern/command1 | command2</code> --&gt; You can chain multiple commands to apply a sequence of actions on matching lines.

</ul>
<div id="Common Use Cases-Practical Examples"><h2 id="Practical Examples" class="header"><a href="#Common Use Cases-Practical Examples">Practical Examples</a></h2></div>

<div id="Common Use Cases-Practical Examples-Delete all blank lines:"><h4 id="Delete all blank lines:" class="header"><a href="#Common Use Cases-Practical Examples-Delete all blank lines:">Delete all blank lines:</a></h4></div>

<ul>
<li>
<code>:g/^$/d</code>

</ul>
<div id="Common Use Cases-Practical Examples-Add a comment symbol (#) to all lines containing &quot;T0D0&quot;"><h4 id="Add a comment symbol (#) to all lines containing &quot;T0D0&quot;" class="header"><a href="#Common Use Cases-Practical Examples-Add a comment symbol (#) to all lines containing &quot;T0D0&quot;">Add a comment symbol (#) to all lines containing "T0D0"</a></h4></div>
<ul>
<li>
<code>:g/TODO/norm I#</code>

</ul>
<div id="Common Use Cases-Practical Examples-Highlight lines with errors by adding &quot;ERROR: &quot; to the start of each:"><h4 id="Highlight lines with errors by adding &quot;ERROR: &quot; to the start of each:" class="header"><a href="#Common Use Cases-Practical Examples-Highlight lines with errors by adding &quot;ERROR: &quot; to the start of each:">Highlight lines with errors by adding "ERROR: " to the start of each:</a></h4></div>

<ul>
<li>
<code>:g/error/norm IERROR:</code>

</ul>
<div id="Common Use Cases-Practical Examples-Summary"><h3 id="Summary" class="header"><a href="#Common Use Cases-Practical Examples-Summary">Summary</a></h3></div>

<p>
The <code>:global</code> command is a Swiss Army knife for Vim users, enabling streamlined, large-scale text manipulations.
</p>

<div id="The m Command: Moving Lines"><h1 id="The m Command: Moving Lines" class="header"><a href="#The m Command: Moving Lines">The m Command: Moving Lines</a></h1></div>

<p>
In Vim, the <code>m</code> command is used to move a line or range of lines to a new location. It’s often combined with line numbers, marks, or patterns to specify where the lines should be moved.
</p>

<div id="The m Command: Moving Lines-Syntax:"><h2 id="Syntax:" class="header"><a href="#The m Command: Moving Lines-Syntax:">Syntax:</a></h2></div>

<ul>
<li>
<code>:[range]m{destination}</code>

<ul>
<li>
<code>[range]</code> --&gt; Specifies which lines to move. This could be a single line (.), a range (1,5), or lines matching a pattern (e.g., g/pattern/).

<li>
<code>{destination}</code> --&gt; Specifies where to move the lines.

<li>
You can use:

<ul>
<li>
A line number (e.g., <code>m10</code> moves to line 10).

<li>
<code>m$</code> (moves to the end of the file).

<li>
Marks (e.g., <code>m'a</code> moves after the line marked by a).

</ul>
</ul>
</ul>
<div id="The m Command: Moving Lines-Understanding g/pattern/m$"><h2 id="Understanding g/pattern/m$" class="header"><a href="#The m Command: Moving Lines-Understanding g/pattern/m$">Understanding g/pattern/m$</a></h2></div>

<p>
This command combines the global command (g) with the move command (m):
</p>

<ul>
<li>
<code>g/pattern/m$</code>

<ul>
<li>
<code>g/pattern/</code> --&gt; Finds all lines matching the given pattern.

<li>
For each matching line, applies the following command <code>m$</code>.

<li>
<code>m-DOLLAR</code> --&gt; Moves the matching line(s) to the end of the file represented by 'DOLLAR'.
<table>
<tr>
<td>
The $ character sometimes gets represented by \) in Vimwiki's HTML.
</td>
</tr>
</table>

</ul>
</ul>
<div id="The m Command: Moving Lines-Understanding g/pattern/m$-Example:"><h3 id="Example:" class="header"><a href="#The m Command: Moving Lines-Understanding g/pattern/m$-Example:">Example:</a></h3></div>

<p>
Suppose you have the following text:
</p>
<pre>
apple
banana
cherry
date
elderberry
</pre>

<p>
If you run:
</p>
<ul>
<li>
<code>:g/^b/m$</code>

<ul>
<li>
<code>g/^b/</code>--&gt;  Matches all lines starting with "b" (in this case, "banana").

<li>
<code>m$</code> --&gt; Moves the line "banana" to the end of the file.

</ul>
</ul>
<p>
Result:
</p>
<pre>
apple
cherry
date
elderberry
banana
</pre>

<div id="The m Command: Moving Lines-Other Examples of m in Action"><h2 id="Other Examples of m in Action" class="header"><a href="#The m Command: Moving Lines-Other Examples of m in Action">Other Examples of m in Action</a></h2></div>

<div id="The m Command: Moving Lines-Other Examples of m in Action-Move Lines to a Specific Location:"><h3 id="Move Lines to a Specific Location:" class="header"><a href="#The m Command: Moving Lines-Other Examples of m in Action-Move Lines to a Specific Location:">Move Lines to a Specific Location:</a></h3></div>

<div id="The m Command: Moving Lines-Other Examples of m in Action-Move Lines to a Specific Location:-Move lines 3 through 5 to line 10:"><h4 id="Move lines 3 through 5 to line 10:" class="header"><a href="#The m Command: Moving Lines-Other Examples of m in Action-Move Lines to a Specific Location:-Move lines 3 through 5 to line 10:">Move lines 3 through 5 to line 10:</a></h4></div>

<ul>
<li>
<code>:3,5m10</code> --&gt; Use a Mark as the Destination:

</ul>
<div id="The m Command: Moving Lines-Other Examples of m in Action-Move Lines to a Specific Location:-Move lines to a mark"><h4 id="Move lines to a mark" class="header"><a href="#The m Command: Moving Lines-Other Examples of m in Action-Move Lines to a Specific Location:-Move lines to a mark">Move lines to a mark</a></h4></div>

<ul>
<li>
First, mark a line with <code>ma</code> (<code>ma</code> places a mark named <code>a</code> on the current line).

<li>
Then move lines 2 and 3 to the mark:

<ul>
<li>
<code>:2,3m'a</code>

</ul>
</ul>
<div id="The m Command: Moving Lines-Other Examples of m in Action-Combine with Search Patterns:"><h3 id="Combine with Search Patterns:" class="header"><a href="#The m Command: Moving Lines-Other Examples of m in Action-Combine with Search Patterns:">Combine with Search Patterns:</a></h3></div>

<p>
Move all lines containing "T0D0" to the end of the file:
</p>
<ul>
<li>
<code>:g/T0D0/m$</code>

</ul>
<div id="The m Command: Moving Lines-Key Takeaways"><h2 id="Key Takeaways" class="header"><a href="#The m Command: Moving Lines-Key Takeaways">Key Takeaways</a></h2></div>

<ul>
<li>
The <code>m</code> command is a simple yet effective way to rearrange text in Vim.

<li>
Combining it with <code>g</code> lets you automate movement based on patterns, making bulk edits faster and more precise.

<li>
Destinations like <code>$</code> (end of file), <code>0</code> (start of file), <code>#,#</code> (specific line numbers) and marks offer great flexibility.

</ul>
<div id="The m Command: Moving Lines-Reversing the order of lines"><h2 id="Reversing the order of lines" class="header"><a href="#The m Command: Moving Lines-Reversing the order of lines">Reversing the order of lines</a></h2></div>

<p>
The Vim command <code>:g/^/m0</code> reverses the order of lines in a buffer.
</p>

<p>
Let's break it down step by step to understand how it works:
</p>

<ul>
<li>
<code>:g/^/m0</code>

<ul>
<li>
<code>:g/^/</code> --&gt; The <code>:g</code> command applies the subsequent operation (<code>m0</code> in this case) to every line in the buffer. The <code>/^/</code> is the pattern being matched:

<ul>
<li>
<code>^</code> matches the beginning of a line.

<li>
Therefore, <code>/^/</code> matches every line in the buffer because every line starts with the beginning of the line (<code>^</code>). So, this part tells Vim to operate on all lines in the file, one by one.

</ul>
<li>
<code>m0</code> --&gt; The <code>m</code> command moves the currently processed line to a specific location.

<ul>
<li>
<code>0</code> refers to the very top of the file, before the first line.

<li>
Therefore, for each line matched by the <code>:g/^/</code> part (which is all lines), the <code>m0</code> command moves that line to the very start of the file.

</ul>
</ul>
</ul>
<div id="The m Command: Moving Lines-Reversing the order of lines-How the Logic Works to Reverse Lines"><h3 id="How the Logic Works to Reverse Lines" class="header"><a href="#The m Command: Moving Lines-Reversing the order of lines-How the Logic Works to Reverse Lines">How the Logic Works to Reverse Lines</a></h3></div>

<ul>
<li>
Vim processes each line in order (from the first line to the last) when using <code>g</code>.

<li>
When it processes the first line, it moves it to the top of the file, but since it’s already there, nothing changes.

<li>
When it processes the second line, it moves that line to the top of the file. Now the second line becomes the first line, pushing the original first line down.

<li>
When it processes the third line, it moves that line to the top, and so on.

<li>
By the end, the lines are processed in their original order but moved to the top one by one, effectively reversing their order.

</ul>
<div id="The m Command: Moving Lines-Deleting Contiguous Blank lines"><h2 id="Deleting Contiguous Blank lines" class="header"><a href="#The m Command: Moving Lines-Deleting Contiguous Blank lines">Deleting Contiguous Blank lines</a></h2></div>

<p>
This command matches lines with start/end only (or alternative is start/end with space), then "delete-inner-paragraph and enter new line above".
</p>

<pre>
g/^$/norm dipO
</pre>

<p>
or use...
</p>

<pre>
g/^\s*$/norm dipO
</pre>
<p>
...to also match blank lines in addition to empty lines. And that’s an “O” as in “Oscar”)
</p>

<p>
<a href="vim_learning.html">Vim Learning</a>
</p>

<p>
<a href="index.html">index</a>
</p>

</body>
</html>
