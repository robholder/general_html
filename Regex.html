<!DOCTYPE html>
<html>
<head>
<link rel="Stylesheet" type="text/css" href="style.css">
<title>Regex</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<p>
<a href="index.html">index</a>
</p>

<div id="[[Python]]"><h1 id="[[Python]]" class="header"><a href="#[[Python]]"><a href="Python.html">Python</a></a></h1></div>
<div id="[[Python]]-Regex"><h2 id="Regex" class="header"><a href="#[[Python]]-Regex">Regex</a></h2></div>

<p>
Import the regex module:
</p>
<pre python>
import re
</pre>

<p>
Rawstring - this is an option to make a string avoid the special interpretations.
Example:
</p>
<pre python>
text = ('\tTab')
# Normally interpreted as "  Tab"
text = (r'\tTab')
# Rawstring interprets as "\tTab"
</pre>

<div id="[[Python]]-Regex-Compile"><h3 id="Compile" class="header"><a href="#[[Python]]-Regex-Compile">Compile</a></h3></div>

<p>
You can 'compile' a search pattern into compile object, which will offer various methods for regex:
</p>
<pre python>
text_to_search = "abcdefgABCDE 1235 test"

pattern = re.compile(r'abc')

matches = pattern.finditer(text_to_search)

for match in matches:
    print(match)
    
## OUTPUT
&lt;re.Match object: span=(0, 3), match='abc'&gt;

print(text_to_search[0:3])

## OUTPUT
'abc'
</pre>

<div id="[[Python]]-Regex-Special (Meta) Characters"><h3 id="Special (Meta) Characters" class="header"><a href="#[[Python]]-Regex-Special (Meta) Characters">Special (Meta) Characters</a></h3></div>
<p>
These need to be escaped (in non-raw text):
</p>
<pre python>
. ^ $ * + ? { } [ ] \ | ( )
</pre>

<div id="[[Python]]-Regex-List of regular expression tools:"><h3 id="List of regular expression tools:" class="header"><a href="#[[Python]]-Regex-List of regular expression tools:">List of regular expression tools:</a></h3></div>
<pre python>
# Match Charcters:

.   - Any character except 'new line'
\d  - Digit (0-9)
\D  - Not a Digit (0-9)
\w  - Word character (a-z, A-Z, 0-9, _)
\W  - Not a Word character.
\s  - Whitespace (space, tab, newline)
\S  - Not Whitespace

# Anchors:

\b  - Word Boundary
\B  - Not Word Boundary
^   - Beginning of a string (line)
$   - End of a sting (line)

[ ] - Matches characters in brackets (e.g.[abc] will match single character: a, b or c)
[^ ]- Matches characters not in brackets
|   - Either/Or
(   - Group

# Quantifiers:
 
*       - 0 or more
+       - 1 or more
?       - 0 or one
{3}     - Exact number of repeats
{3,4}   - Range of repeats (min &amp; max)
</pre>

<div id="[[Python]]-Matching phone numbers"><h2 id="Matching phone numbers" class="header"><a href="#[[Python]]-Matching phone numbers">Matching phone numbers</a></h2></div>
<pre python>
text = """
321-555-4321
123.555.1234
"""

pattern = re.compile(r'\d\d\d')

matches = pattern.finditer(text)

for match in matches:
    print(match)
 
# OUTPUT
&lt;re.Match object; span=(1, 4), match='321'&gt;
&lt;re.Match object; span=(5, 8), match='555'&gt;
&lt;re.Match object; span=(9, 12), match='423'&gt;
&lt;re.Match object; span=(14, 17), match='123'&gt;
&lt;re.Match object; span=(18, 21), match='555'&gt;
&lt;re.Match object; span=(22, 25), match='123'&gt; 

# with any joining character:
pattern = re.compile(r'\d\d\d.\d\d\d.\d\d\d\d')

# OUTPUT
&lt;re.Match object; span=(1, 13), match='321-555-4231'&gt;
&lt;re.Match object; span=(14, 26), match='123.555.1234'&gt;  

</pre>

<p>
To only match phone numbers with a dot as a separator, use the escape character:
</p>
<pre python>
pattern = re.compile(r'\d\d\d\.\d\d\d\.\d\d\d\d')
</pre>

<p>
Inside square brackets, the meta characters act like regular charcters (except when in particular positions!). The following will find numbers with the '.' and '-' as separators:
</p>
<pre python>
pattern = re.compile(r'\d\d\d[.-]\d\d\d[.-]\d\d\d\d')
</pre>

<pre python>
# Inside square brackets:
# The '^' acts as a meta at the start of a string [^x]. Means NOT x here.
# The '-' acts as everything in between when between chars [0-9]
# Another example: [a-zA-Z0-9], or the opposite, [^a-zA-Z0-9]
</pre>

<div id="[[Python]]-Matching phone numbers-Matching Prefix"><h3 id="Matching Prefix" class="header"><a href="#[[Python]]-Matching phone numbers-Matching Prefix">Matching Prefix</a></h3></div>
<p>
Matching Mr, Mrs, Ms with and without periods:
</p>
<pre python>
text = """
    Mr. Schafer
    Mr Smith
    Ms Davis
    Mrs. Robinson
    Mr. T
"""
# Match 'Mr'
# followed by 0 or 1 dots
# then a space
# then one capital letter
# followed by 0 or more 'word' characters
 
pattern = re.compile(r'Mr\.?\s[A-Z]\w*')
matches = pattern.finditer(text)
for match in matches:
    print(match)

# OUTPUT
&lt;re.Match object; span=(5, 16), match='Mr. Schafer'&gt;
&lt;re.Match object; span=(21, 29), match='Mr Smith'&gt;
&lt;re.Match object; span=(65, 70), match='Mr. T'&gt;
   
# Now using groups to include Mrs:
pattern = re.compile(r'(Mr|Ms|Mrs)\.?\s[A-Z]\w*')

# OUTPUT
&lt;re.Match object; span=(5, 16), match='Mr. Schafer'&gt;
&lt;re.Match object; span=(21, 29), match='Mr Smith'&gt;
&lt;re.Match object; span=(34, 42), match='Ms Davis'&gt;
&lt;re.Match object; span=(47, 60), match='Mrs. Robinson'&gt;
&lt;re.Match object; span=(65, 70), match='Mr. T'&gt;  
</pre>

<div id="[[Python]]-Matching phone numbers-Email matching"><h3 id="Email matching" class="header"><a href="#[[Python]]-Matching phone numbers-Email matching">Email matching</a></h3></div>

<p>
Example regex to match the given email recipes:
</p>
<pre python>
emails="""
    coreymschafer@gmail.com
    corey.schafer@university.edu
    corey-321-schafer@my-work.net
"""
pattern = re.compile(r'[a-zA-Z0-9.-]+@[a-zA-Z-]+\.(com|edu|net)')
matches = pattern.finditer(emails)
for match in matches:
    print(match)
</pre>

<p>
Another email regex example:
</p>
<pre python>
# match letters and numbers, underscores, dots, pluses, dashes in any number
# then an @
# then any letter or number or dash (one or more)
# then a dot
# then letters or numbers, dashes or dots (one or more)
pattern = re.compile(r'[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+')
</pre>

<div id="[[Python]]-Matching phone numbers-URL matching"><h3 id="URL matching" class="header"><a href="#[[Python]]-Matching phone numbers-URL matching">URL matching</a></h3></div>

<p>
Example regex to match the given URL recipes (and capture groups!):
</p>
<pre python>
urls = """
https://www.google.com
https://coreyms.com
https://youtube.com
https://www.nasa.gov
"""
# standard search:
pattern = re.compile(r'https?://(www\.)?\w+\.\w+')

matches = pattern.finditer(urls)

for match in matches:
    print(match)

# capture groups:
group_pattern =  re.compile(r'https?://(www\.)?(\w+)(\.\w+)')

matches = group_pattern.finditer(urls)

for match in matches:
    print(match.group(3))
</pre>
<p>
Substituting original URLs with just domains:
</p>
<pre python>
urls = """
https://www.google.com
https://coreyms.com
https://youtube.com
https://www.nasa.gov
"""

# capture groups:
group_pattern =  re.compile(r'https?://(www\.)?(\w+)(\.\w+)')

subbed_urls = group_pattern.sub(r'\2\3', urls)

print(subbed_urls)
</pre>

</body>
</html>
