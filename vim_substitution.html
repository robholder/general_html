<!DOCTYPE html>
<html>
<head>
<link rel="Stylesheet" type="text/css" href="style.css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<title>vim_substitution</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<p>
<a href="index.html">index</a>
</p>

<p>
<a href="vim_learning.html">Vim Learning</a>
</p>

<div id="Substitution"><h2 id="Substitution" class="header"><a href="#Substitution">Substitution</a></h2></div>

<p>
<em>NEEDS WORK HERE FOR BASICS AND REGEX</em>
</p>


<div id="Substitution-Replace or Substitute"><h3 id="Replace or Substitute" class="header"><a href="#Substitution-Replace or Substitute">Replace or Substitute</a></h3></div>

<p>
Replace every occurrence <a href="of.html">of</a> 'oldpattern' with 'newpattern' in a buffer:
</p>

<pre>
:%s/oldpattern/newpattern/g
</pre>

<p>
<code>g</code> is 'global', and searches beyond the first occurrence.
</p>

<div id="Substitution-Ask for Confirmation"><h3 id="Ask for Confirmation" class="header"><a href="#Substitution-Ask for Confirmation">Ask for Confirmation</a></h3></div>

<pre>
:%s/old/new/gc
</pre>

<p>
<code>y</code> or <code>n</code> to choose yes or no for each as it cycles through.
</p>

<div id="Substitution-Ask for Confirmation-Single Line"><h4 id="Single Line" class="header"><a href="#Substitution-Ask for Confirmation-Single Line">Single Line</a></h4></div>

<pre>
:s
</pre>

<div id="Substitution-Ask for Confirmation-Whole Buffer"><h4 id="Whole Buffer" class="header"><a href="#Substitution-Ask for Confirmation-Whole Buffer">Whole Buffer</a></h4></div>

<pre>
:%s
</pre>


<div id="Specific Example (for get_iplayer CSV correction"><h1 id="Specific Example (for get_iplayer CSV correction" class="header"><a href="#Specific Example (for get_iplayer CSV correction">Specific Example (for get_iplayer CSV correction</a></h1></div>

<p>
If a comma is followed by 'space BBC' (", BBC"), keep it and ignore others, but delete any before this pattern is found.
</p>

<p>
We can achieve this using a combination of regular expressions and substitution in vim.
</p>

<p>
Open your file in vim. Enter command mode by pressing <code>:</code>.
</p>

<p>
Use this command:
</p>

<pre vim>
:%s/\(.*\)\(,\sBBC.*\)/\=substitute(submatch(1), ',', '', 'g') . submatch(2)/
</pre>

<div id="Specific Example (for get_iplayer CSV correction-Explanation"><h3 id="Explanation" class="header"><a href="#Specific Example (for get_iplayer CSV correction-Explanation">Explanation</a></h3></div>

<p>
<code>:%s/</code>: This starts a substitution for every line in the file.
</p>

<p>
<code>\(.*\)\(,\sBBC.*\)</code>: This matches any characters <code>(.*)</code> up to the first occurrence of ", BBC", and any characters thereafter. The parentheses () create capturing groups.
</p>

<p>
<code>\=substitute(submatch(1), ',', '', 'g') . submatch(2)</code>: This uses substitute() to remove all commas in the first capturing group (before ", BBC"), then concatenates the result with the second capturing group (", BBC" and subsequent characters).
</p>

<div id="Specific Example (for get_iplayer CSV correction-Explanation-Example"><h4 id="Example" class="header"><a href="#Specific Example (for get_iplayer CSV correction-Explanation-Example">Example</a></h4></div>

<p>
Input: <code>Alexandra Gardens, Cardiff 1, BBC Two, m001rbpj</code>
</p>

<p>
Output: <code>Alexandra Gardens Cardiff 1, BBC Two, m001rbpj</code>
</p>

<p>
This command ensures that the comma before 'BBC' is retained, while any other commas before this pattern are removed.
</p>



<p>
<a href="vim_learning.html">Vim Learning</a>
</p>

<p>
<a href="index.html">index</a>
</p>

</body>
</html>
