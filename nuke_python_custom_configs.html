<!DOCTYPE html>
<html>
<head>
<link rel="Stylesheet" type="text/css" href="style.css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<title>nuke_python_custom_configs</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<p>
<a href="Index.html">Index</a>
</p>

<p>
<a href="nuke_index.html">Nuke Index</a>
</p>

<div id="Custom Config Based on Environment Variables"><h1 id="Custom Config Based on Environment Variables" class="header"><a href="#Custom Config Based on Environment Variables">Custom Config Based on Environment Variables</a></h1></div>

<p>
You can achieve behavior similar to “sourcing” an extra configuration by using Nuke’s startup scripting system. Although Nuke always runs an <code>init.py</code>  (and for interactive sessions, a menu.py) from its plugin paths, you can conditionally load extra configuration depending on how you launch Nuke. Here are a few common approaches:
</p>

<div id="Custom Config Based on Environment Variables-Using Environment Variables in Your init.py"><h2 id="Using Environment Variables in Your init.py" class="header"><a href="#Custom Config Based on Environment Variables-Using Environment Variables in Your init.py">Using Environment Variables in Your init.py</a></h2></div>

<p>
You can keep a “vanilla” <code>init.py</code>  in your default <code>~/.nuke</code> folder that conditionally loads additional configuration when a certain environment variable is set. For instance, you might write your <code>~/.nuke/init.py</code> like this:
</p>

<pre python>
import os
import nuke

# Check for an environment variable that indicates extra configuration should be loaded
if os.environ.get("NUKE_EXTRA_CONFIG") == "1":
    # Option A: Automatically import a module that sets up extra configuration
    import my_custom_config  # This module could load extra modules, set knob defaults, add menus, etc.
    
    # Option B: Alternatively, extend the plugin path so Nuke picks up a custom init.py/menu.py in another directory
    custom_path = os.path.join(os.environ["HOME"], ".nuke", "custom")
    nuke.pluginAddPath(custom_path)
</pre>

<p>
Now, when you launch Nuke from the command line with the environment variable set:
</p>

<pre bash>
export NUKE_EXTRA_CONFIG=1
/Applications/Nuke11.3v5/Nuke11.3.app/Contents/MacOS/Nuke
</pre>

<p>
…the extra configuration in <code>my_custom_config</code> (or in the custom plugin path) is loaded. Without setting <code>NUKE_EXTRA_CONFIG</code>, Nuke will start in its vanilla state.
</p>

<div id="Custom Config Based on Environment Variables-Using Different NUKE_PATH Settings"><h2 id="Using Different NUKE_PATH Settings" class="header"><a href="#Custom Config Based on Environment Variables-Using Different NUKE_PATH Settings">Using Different NUKE_PATH Settings</a></h2></div>

<p>
Nuke looks for its startup scripts (init.py and menu.py) in directories specified by the NUKE_PATH environment variable. You can organize your configuration into separate directories and then launch Nuke with a customized NUKE_PATH.
</p>

<p>
For example, suppose you have two directories:
</p>

<ul>
<li>
<code>~/.nuke/vanilla</code> – contains the default startup scripts.

<li>
<code>~/.nuke/custom</code> – contains additional configuration (custom init.py, menu.py, and modules).

</ul>
<p>
You can launch the vanilla session by leaving NUKE_PATH as is (or pointing it to the vanilla directory), and for the custom configuration, use a shell wrapper like:
</p>

<pre bash>
export NUKE_PATH="$HOME/.nuke/custom:$HOME/.nuke/vanilla"
/Applications/Nuke11.3v5/Nuke11.3.app/Contents/MacOS/Nuke
</pre>

<p>
This way, the custom directory is given priority in the plugin search path, and its startup scripts will be picked up.
</p>

<div id="Custom Config Based on Environment Variables-Using Different NUKE_PATH Settings-More on NUKE_PATH"><h3 id="More on NUKE_PATH" class="header"><a href="#Custom Config Based on Environment Variables-Using Different NUKE_PATH Settings-More on NUKE_PATH">More on NUKE_PATH</a></h3></div>

<p>
Nuke handles files in the NUKE_PATH in two different ways depending on what you’re loading:
</p>

<ul>
<li>
<span id="Custom Config Based on Environment Variables-Using Different NUKE_PATH Settings-More on NUKE_PATH-Startup Scripts (init.py and menu.py)"></span><strong id="Startup Scripts (init.py and menu.py)">Startup Scripts (init.py and menu.py)</strong>: Nuke doesn’t stop after finding just one copy. In fact, it scans all the directories listed in your NUKE_PATH (in reverse order) and executes every <code>init.py</code>  (and <code>menu.py</code>) it finds. So if you set
<pre sh>
export NUKE_PATH="$HOME/.nuke/custom:$HOME/.nuke/vanilla"
</pre>

</ul>
<p>
Nuke will load both the startup scripts in your custom directory as well as those in vanilla. Typically, the custom scripts are used to override or add to the settings from vanilla. In essence, it layers the configurations rather than stopping after loading the first one.
</p>
<ul>
<li>
<span id="Custom Config Based on Environment Variables-Using Different NUKE_PATH Settings-More on NUKE_PATH-Plugins and Modules"></span><strong id="Plugins and Modules">Plugins and Modules</strong>: When it comes to loading individual plugins or modules (for example, gizmos, custom nodes, etc.), Nuke searches the NUKE_PATH in order (again, effectively in reverse priority). It will use the first instance it finds; if the same-named plugin exists in both custom and vanilla, the one in the higher-priority directory (in your case, appearing first in the reversed order, which is your custom directory) will be used. This allows you to override a vanilla plugin simply by placing your version in the custom folder.

</ul>
<p>
In summary:
</p>

<ul>
<li>
Setting your NUKE_PATH as above does not make Nuke “stop” importing right after the custom <code>init.py</code>.

<li>
Instead, for startup scripts, it loads all of them (with later ones overriding earlier settings), and for plugins, it uses the first match it finds in the priority order. This is a common and effective strategy to customize your Nuke environment while still retaining a fallback “vanilla” configuration.

</ul>
<div id="Custom Config Based on Environment Variables-Comparing with Shell Sourcing"><h2 id="Comparing with Shell Sourcing" class="header"><a href="#Custom Config Based on Environment Variables-Comparing with Shell Sourcing">Comparing with Shell Sourcing</a></h2></div>

<p>
Much like a shell sources a file to set the environment, your Nuke <code>init.py</code>  can “source” extra configuration by either importing a Python module or by modifying paths. The key is that your base <code>init.py</code>  is always executed and can decide what to load next based on environment variables or command-line arguments.
</p>

<div id="Custom Config Based on Environment Variables-Comparing with Shell Sourcing-In Summary"><h3 id="In Summary" class="header"><a href="#Custom Config Based on Environment Variables-Comparing with Shell Sourcing-In Summary">In Summary</a></h3></div>

<ul>
<li>
Yes, it’s possible to have a “setup” mode versus a vanilla session.

<li>
A common approach is to check an environment variable (or even command-line arguments if needed) in your default <code>init.py</code>..

<li>
Depending on your needs, you can either import additional configuration directly or modify the <code>NUKE_PATH</code> to point to alternative startup scripts.

<li>
Launching from the command line with the relevant environment variables set determines which configuration is loaded.

</ul>
<p>
This gives you the flexibility to have a custom, fully configured Nuke session when needed without affecting your default, vanilla startup.
</p>

<p>
It's really powerful how Nuke's startup scripting can be manipulated to give you that level of control over your environment—just like sourcing a shell config file but for your compositing workflows. If you dive into customizing your init.py  or NUKE_PATH, you can tailor your Nuke sessions to exactly what you need, and then switch back to vanilla effortlessly when you want a clean slate.
</p>


<p>
<a href="nuke_index.html">Nuke Index</a>
</p>

<p>
<a href="Index.html">Index</a>
</p>

</body>
</html>
