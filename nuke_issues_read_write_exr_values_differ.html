<!DOCTYPE html>
<html>
<head>
<link rel="Stylesheet" type="text/css" href="style.css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<title>nuke_issues_read_write_exr_values_differ</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<p>
<a href="index.html">index</a>
</p>

<p>
<a href="nuke_index.html">Nuke Index</a>
</p>

<div id="EXR Values Differ Between Read &amp; Write"><h1 id="EXR Values Differ Between Read &amp; Write" class="header"><a href="#EXR Values Differ Between Read &amp; Write">EXR Values Differ Between Read &amp; Write</a></h1></div>

<p>
If EXR values are not exactly the same after a read-write round trip, it is most likely due to half-float precision, the use of lossy compression, or color space conversions. For most visual purposes, these differences are imperceptible, but they are crucial to understand for high-precision data workflows. 
</p>

<div id="EXR Values Differ Between Read &amp; Write-Half-float (16-bit) precision loss"><h3 id="Half-float (16-bit) precision loss" class="header"><a href="#EXR Values Differ Between Read &amp; Write-Half-float (16-bit) precision loss">Half-float (16-bit) precision loss</a></h3></div>

<p>
This is the most common reason for a slight discrepancy in pixel values.
</p>
<ul>
<li>
<span id="EXR Values Differ Between Read &amp; Write-Half-float (16-bit) precision loss-Reduced precision"></span><strong id="Reduced precision">Reduced precision</strong>: 16-bit half-float format offers a huge dynamic range, but it uses fewer bits for precision compared to a 32-bit float. This means it can't represent every possible decimal value exactly.

<li>
<span id="EXR Values Differ Between Read &amp; Write-Half-float (16-bit) precision loss-Decreased precision in highlights"></span><strong id="Decreased precision in highlights">Decreased precision in highlights</strong>: The precision of a floating-point number is not uniform across its range. It decreases as the value gets brighter, meaning that very bright areas of an image will have fewer possible values and may lose a tiny bit of accuracy when written and re-read.

<li>
<span id="EXR Values Differ Between Read &amp; Write-Half-float (16-bit) precision loss-Example"></span><strong id="Example">Example</strong>: If a pixel's 32-bit value is 12.3456789, it might be rounded to 12.345 when stored as a 16-bit half-float, leading to a small difference on a round trip. 

</ul>
<div id="EXR Values Differ Between Read &amp; Write-Lossy compression"><h3 id="Lossy compression" class="header"><a href="#EXR Values Differ Between Read &amp; Write-Lossy compression">Lossy compression</a></h3></div>

<p>
While most EXR compression methods are lossless, some are not. If you use a lossy compression method, your values will change.
</p>
<ul>
<li>
<span id="EXR Values Differ Between Read &amp; Write-Lossy compression-Lossy options"></span><strong id="Lossy options">Lossy options</strong>: OpenEXR supports several lossy compression methods that sacrifice image data for smaller file sizes. These include:

<li>
<span id="EXR Values Differ Between Read &amp; Write-Lossy compression-DWAA and DWAB"></span><strong id="DWAA and DWAB">DWAA and DWAB</strong>: Very efficient, with an adjustable compression level. A higher level introduces more loss.

<li>
<span id="EXR Values Differ Between Read &amp; Write-Lossy compression-B44 and B44A"></span><strong id="B44 and B44A">B44 and B44A</strong>: Compress blocks of pixels, which causes loss of data and is only available for half-float images.

<li>
<span id="EXR Values Differ Between Read &amp; Write-Lossy compression-PXR24"></span><strong id="PXR24">PXR24</strong>: A lossy format that truncates 32-bit float data to 24 bits. 

</ul>
<div id="EXR Values Differ Between Read &amp; Write-Color space or software conversions"><h3 id="Color space or software conversions" class="header"><a href="#EXR Values Differ Between Read &amp; Write-Color space or software conversions">Color space or software conversions</a></h3></div>

<p>
Unexpected conversions during the read or write process can also alter data.
</p>
<ul>
<li>
<span id="EXR Values Differ Between Read &amp; Write-Color space or software conversions-Software interpretation"></span><strong id="Software interpretation">Software interpretation</strong>: Different software applications may interpret or handle EXR data differently, especially regarding color space conversions or metadata.

<li>
<span id="EXR Values Differ Between Read &amp; Write-Color space or software conversions-Internal conversions"></span><strong id="Internal conversions">Internal conversions</strong>: For example, an application might load a 16-bit EXR, perform some operations using 32-bit floating-point numbers, and then save it back to 16-bit. The internal calculations and subsequent rounding will likely introduce tiny differences. 

</ul>
<div id="EXR Values Differ Between Read &amp; Write-How to ensure identical values (if necessary)"><h3 id="How to ensure identical values (if necessary)" class="header"><a href="#EXR Values Differ Between Read &amp; Write-How to ensure identical values (if necessary)">How to ensure identical values (if necessary)</a></h3></div>

<p>
For applications that require absolute data integrity, like certain technical passes, take these steps:
</p>
<ul>
<li>
<span id="EXR Values Differ Between Read &amp; Write-How to ensure identical values (if necessary)-Use 32-bit (full) floats"></span><strong id="Use 32-bit (full) floats">Use 32-bit (full) floats</strong>: This data type offers much higher precision than 16-bit (half) floats and will prevent any loss of value due to rounding.

<li>
<span id="EXR Values Differ Between Read &amp; Write-How to ensure identical values (if necessary)-Use a lossless compression method"></span><strong id="Use a lossless compression method">Use a lossless compression method</strong>: When writing your EXR, choose a lossless option such as ZIP, ZIPS, PIZ, or RLE. These methods guarantee that the pixel data remains mathematically identical after compression and decompression.

<li>
<span id="EXR Values Differ Between Read &amp; Write-How to ensure identical values (if necessary)-Verify your software"></span><strong id="Verify your software">Verify your software</strong>: Check your image editing, compositing, or rendering software settings to ensure you are not using lossy compression or performing an unnecessary conversion to a different floating-point size during the read/write process. 

</ul>
<p>
<a href="nuke_index.html">Nuke Index</a>
</p>

<p>
<a href="index.html">index</a>
</p>

</body>
</html>
