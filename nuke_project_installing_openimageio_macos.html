<!DOCTYPE html>
<html>
<head>
<link rel="Stylesheet" type="text/css" href="style.css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<title>nuke_project_installing_openimageio_macos</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<p>
<a href="index.html">index</a>
</p>

<p>
<a href="nuke_index.html">Nuke Index</a>
</p>

<div id="Installing OpenImageIO in Nuke - MacOS"><h1 id="Installing OpenImageIO in Nuke - MacOS" class="header"><a href="#Installing OpenImageIO in Nuke - MacOS">Installing OpenImageIO in Nuke - MacOS</a></h1></div>

<div id="Installing OpenImageIO in Nuke - MacOS-Find Version Of Python in Nuke"><h2 id="Find Version Of Python in Nuke" class="header"><a href="#Installing OpenImageIO in Nuke - MacOS-Find Version Of Python in Nuke">Find Version Of Python in Nuke</a></h2></div>

<p>
Find and confirm Python version and architecture of Nuke's own Python interpreter.
</p>

<p>
In my case, this worked:
</p>
<pre sh>
/Applications/Nuke16.0v4/Nuke16.0v4.app/Contents/MacOS/python -c "import sys; print(sys.version); import platform; print(platform.machine())"
</pre>

<p>
My instance returned the following:
</p>
<pre sh>
3.11.7 (remotes/origin/foundry/v3.11.7:88283f3425, Oct  8 2024, 09:50:25) [Clang 14.0.0 (clang-1400.0.29.202)]
arm64
</pre>


<div id="Gemini Response to Installing OpenImageIO for Nuke on MacOS"><h1 id="Gemini Response to Installing OpenImageIO for Nuke on MacOS" class="header"><a href="#Gemini Response to Installing OpenImageIO for Nuke on MacOS">Gemini Response to Installing OpenImageIO for Nuke on MacOS</a></h1></div>

<p>
Setting up OpenImageIO (OIIO) for Nuke 16 on an Apple Silicon (M3) Mac requires compiling the Python bindings for the correct architecture and making them available to Nuke's internal Python environment. Using Homebrew is the easiest method for a streamlined build process. 
</p>

<div id="Gemini Response to Installing OpenImageIO for Nuke on MacOS-Before you begin"><h2 id="Before you begin" class="header"><a href="#Gemini Response to Installing OpenImageIO for Nuke on MacOS-Before you begin">Before you begin</a></h2></div>

<ul>
<li>
<span id="Gemini Response to Installing OpenImageIO for Nuke on MacOS-Before you begin-Install Homebrew"></span><strong id="Install Homebrew">Install Homebrew</strong>: If you don't already have it, install the Homebrew package manager by running this command in your terminal:
<pre sh>
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
</pre>
<table>
<tr>
<td>
Use code with caution.
</td>
</tr>
</table>

<li>
<span id="Gemini Response to Installing OpenImageIO for Nuke on MacOS-Before you begin-Ensure Command-line Tools"></span><strong id="Ensure Command-line Tools">Ensure Command-line Tools</strong>: Make sure you have the Xcode Command-line Tools, which are necessary for compiling. Homebrew will prompt you to install them if they are missing.

<li>
<span id="Gemini Response to Installing OpenImageIO for Nuke on MacOS-Before you begin-Find Nuke's Python executable"></span><strong id="Find Nuke's Python executable">Find Nuke's Python executable</strong>: Nuke on macOS bundles its own Python interpreter. For Nuke 16.0v4, it is located at:

</ul>
  
<pre sh>
/Applications/Nuke16.0v4/Nuke16.0v4.app/Contents/MacOS/python
</pre>

<p>
Confirm Python version and architecture: Run Nuke's Python executable with the following command to check its version and architecture.
</p>

<pre sh>
/Applications/Nuke16.0v4/Nuke16.0v4.app/Contents/MacOS/python -c "import sys; print(sys.version); import platform; print(platform.machine())"
</pre>
<table>
<tr>
<td>
Use code with caution.
</td>
</tr>
</table>

<p>
This should return 3.11 as the version and arm64 as the machine architecture. 
</p>

<div id="Gemini Response to Installing OpenImageIO for Nuke on MacOS-Before you begin-Step 1: Install OpenImageIO using Homebrew"><h3 id="Step 1: Install OpenImageIO using Homebrew" class="header"><a href="#Gemini Response to Installing OpenImageIO for Nuke on MacOS-Before you begin-Step 1: Install OpenImageIO using Homebrew">Step 1: Install OpenImageIO using Homebrew</a></h3></div>

<p>
Homebrew's openimageio formula has built-in support for Apple Silicon, which greatly simplifies the installation. 
Install OpenImageIO: Open your terminal and run the following command to install OIIO along with its required dependencies like OpenEXR and OpenColorIO.
</p>

<pre sh>
brew install openimageio
</pre>
<table>
<tr>
<td>
Use code with caution.
</td>
</tr>
</table>

<ul>
<li>
<span id="Gemini Response to Installing OpenImageIO for Nuke on MacOS-Before you begin-Step 1: Install OpenImageIO using Homebrew-Find the installed Python bindings"></span><strong id="Find the installed Python bindings">Find the installed Python bindings</strong>: Homebrew will place the Python bindings in a standard location. You can find this path by running:

</ul>
  
<pre sh>
brew --prefix openimageio
</pre>
<table>
<tr>
<td>
Use code with caution.
</td>
</tr>
</table>

<p>
The Python libraries will be in a subdirectory like /opt/homebrew/lib/python3.11/site-packages.
</p>

<div id="Gemini Response to Installing OpenImageIO for Nuke on MacOS-Before you begin-Step 2: Configure Nuke's Python environment"><h3 id="Step 2: Configure Nuke's Python environment" class="header"><a href="#Gemini Response to Installing OpenImageIO for Nuke on MacOS-Before you begin-Step 2: Configure Nuke's Python environment">Step 2: Configure Nuke's Python environment</a></h3></div>

<p>
There are two ways to add the OIIO Python bindings to Nuke's environment.
</p>

<div id="Gemini Response to Installing OpenImageIO for Nuke on MacOS-Before you begin-Step 2: Configure Nuke's Python environment-Option 1: Use PYTHONPATH in a shell script"><h4 id="Option 1: Use PYTHONPATH in a shell script" class="header"><a href="#Gemini Response to Installing OpenImageIO for Nuke on MacOS-Before you begin-Step 2: Configure Nuke's Python environment-Option 1: Use PYTHONPATH in a shell script">Option 1: Use PYTHONPATH in a shell script</a></h4></div>

<p>
This is the most reliable method for launching Nuke with custom libraries.
</p>

<p>
Create a shell script, for example launch_nuke.sh, with the following content:
</p>

<pre sh>
#!/bin/sh

# Path to the OIIO site-packages installed by Homebrew
export OIIO_PYTHON_PATH="/opt/homebrew/lib/python3.11/site-packages"

# Append the OIIO path to PYTHONPATH
export PYTHONPATH="${OIIO_PYTHON_PATH}:${PYTHONPATH}"

# Launch Nuke
/Applications/Nuke16.0v4/Nuke16.0v4.app/Contents/MacOS/Nuke16.0v4 "$@"
</pre>
<table>
<tr>
<td>
Use code with caution.
</td>
</tr>
</table>

<p>
Make the script executable:
</p>

<pre sh>
chmod +x launch_nuke.sh
</pre>
<table>
<tr>
<td>
Use code with caution.
</td>
</tr>
</table>

<div id="Gemini Response to Installing OpenImageIO for Nuke on MacOS-Before you begin-Step 2: Configure Nuke's Python environment-Launch Nuke from the script:"><h4 id="Launch Nuke from the script:" class="header"><a href="#Gemini Response to Installing OpenImageIO for Nuke on MacOS-Before you begin-Step 2: Configure Nuke's Python environment-Launch Nuke from the script:">Launch Nuke from the script:</a></h4></div>

<pre sh>
./launch_nuke.sh
</pre>
<table>
<tr>
<td>
Use code with caution.
</td>
</tr>
</table>

<div id="Gemini Response to Installing OpenImageIO for Nuke on MacOS-Before you begin-Step 2: Configure Nuke's Python environment-Option 2: Modify Nuke's init.py"><h4 id="Option 2: Modify Nuke's init.py" class="header"><a href="#Gemini Response to Installing OpenImageIO for Nuke on MacOS-Before you begin-Step 2: Configure Nuke's Python environment-Option 2: Modify Nuke's init.py">Option 2: Modify Nuke's init.py</a></h4></div>

<p>
This will automatically configure the path every time Nuke starts, without a custom launcher. 
Navigate to your Nuke user directory in the terminal:
</p>

<pre sh>
cd ~/.nuke
</pre>
<table>
<tr>
<td>
Use code with caution.
</td>
</tr>
</table>

<p>
Open the init.py file in a text editor. If it doesn't exist, create it.
</p>

<pre sh>
open -a "TextEdit" init.py
</pre>
<table>
<tr>
<td>
Use code with caution.
</td>
</tr>
</table>

<p>
Add the following Python code to the file, making sure the path is correct for your Homebrew installation:
</p>

<pre python>
import sys

# Add the Homebrew Python site-packages directory to Nuke's Python path
sys.path.append("/opt/homebrew/lib/python3.11/site-packages")
</pre>
<table>
<tr>
<td>
Use code with caution.
</td>
</tr>
</table>

<div id="Gemini Response to Installing OpenImageIO for Nuke on MacOS-Before you begin-Step 2: Configure Nuke's Python environment-Step 3: Test the installation in Nuke"><h4 id="Step 3: Test the installation in Nuke" class="header"><a href="#Gemini Response to Installing OpenImageIO for Nuke on MacOS-Before you begin-Step 2: Configure Nuke's Python environment-Step 3: Test the installation in Nuke">Step 3: Test the installation in Nuke</a></h4></div>

<p>
Launch Nuke using one of the methods above.
</p>

<p>
In the Script Editor, run this code to verify the installation.
</p>

<pre python>
import OpenImageIO as oiio
print("OpenImageIO version:", oiio.VERSION)

# Verify OpenImageIO functionality by reading image info
# (Replace 'path/to/image.exr' with a valid image file)
image_path = "/path/to/your/test_image.exr"
if oiio.ImageInput.open(image_path):
    print(f"Successfully opened {image_path} with OpenImageIO.")
else:
    print(f"Failed to open image: {oiio.geterror()}")
</pre>
<table>
<tr>
<td>
Use code with caution.
</td>
</tr>
</table>

<p>
If the script prints the OIIO version number and the test is successful, your installation is working correctly.
</p>

<div id="Uninstall OpenImageIO"><h1 id="Uninstall OpenImageIO" class="header"><a href="#Uninstall OpenImageIO">Uninstall OpenImageIO</a></h1></div>

<p>
To uninstall OpenImageIO after installing it with Homebrew, you will need to run a few simple commands in your terminal. This process removes the OIIO files and any unnecessary dependencies that were installed alongside it. 
</p>

<div id="Uninstall OpenImageIO-Step 1: Uninstall OpenImageIO"><h2 id="Step 1: Uninstall OpenImageIO" class="header"><a href="#Uninstall OpenImageIO-Step 1: Uninstall OpenImageIO">Step 1: Uninstall OpenImageIO</a></h2></div>
<p>
Open your terminal and run the brew uninstall command, specifying openimageio as the package you want to remove. 
</p>

<pre sh>
brew uninstall openimageio
</pre>
<table>
<tr>
<td>
Use code with caution.
</td>
</tr>
</table>

<p>
Homebrew will then proceed to remove the OpenImageIO files from your system.
</p>

<div id="Uninstall OpenImageIO-Step 2: Remove unused dependencies"><h2 id="Step 2: Remove unused dependencies" class="header"><a href="#Uninstall OpenImageIO-Step 2: Remove unused dependencies">Step 2: Remove unused dependencies</a></h2></div>

<p>
When you installed OpenImageIO, Homebrew also installed its dependencies (e.g., libraries like OpenEXR and OpenColorIO). Some of these dependencies may not be required by other packages on your system. You can automatically remove any of these orphaned dependencies using the brew autoremove command. 
</p>

<pre sh>
brew autoremove
</pre>
<table>
<tr>
<td>
Use code with caution.
</td>
</tr>
</table>

<p>
Note: Since May 2024, brew autoremove is automatically run for you when you uninstall a package. It's still good practice to run it manually to ensure a clean system. 
</p>

<div id="Uninstall OpenImageIO-Step 3: Clean up residual files"><h2 id="Step 3: Clean up residual files" class="header"><a href="#Uninstall OpenImageIO-Step 3: Clean up residual files">Step 3: Clean up residual files</a></h2></div>

<p>
Even after uninstalling a package, Homebrew keeps old downloads in its cache and can leave behind old versions of formulae. You can clean these up to free up disk space by running brew cleanup. 
</p>

<pre sh>
brew cleanup
</pre>
<table>
<tr>
<td>
Use code with caution.
</td>
</tr>
</table>

<p>
To see what brew cleanup would remove without actually deleting anything, you can add the --dry-run flag. 
</p>

<pre sh>
brew cleanup --dry-run
</pre>
<table>
<tr>
<td>
Use code with caution.
</td>
</tr>
</table>

<div id="Uninstall OpenImageIO-Step 4: Undo your Nuke configuration (optional)"><h2 id="Step 4: Undo your Nuke configuration (optional)" class="header"><a href="#Uninstall OpenImageIO-Step 4: Undo your Nuke configuration (optional)">Step 4: Undo your Nuke configuration (optional)</a></h2></div>

<p>
If you set up your Nuke environment to find the OIIO installation, you should undo those changes to avoid future errors.
</p>
<ul>
<li>
If you used a launch script: Stop using the custom launch_nuke.sh and simply launch Nuke directly from its application icon.

<li>
If you modified init.py: Edit the init.py file in your ~/.nuke directory and remove the line you added.

</ul>
  
<pre python>
import sys
# Remove this line to undo the change
# sys.path.append("/opt/homebrew/lib/python3.11/site-packages")
</pre>


<p>
<a href="nuke_index.html">Nuke Index</a>
</p>

<p>
<a href="index.html">index</a>
</p>

</body>
</html>
