<!DOCTYPE html>
<html>
<head>
<link rel="Stylesheet" type="text/css" href="style.css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<title>houdini_voxyde_intro_to_houdini_particles</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<p>
<a href="index.html">index</a>
</p>

<p>
<a href="Houdini.html">Houdini</a>
</p>

<div id="Voxyde - Intro to Houdini Particles"><h1 id="Voxyde - Intro to Houdini Particles" class="header"><a href="#Voxyde - Intro to Houdini Particles">Voxyde - Intro to Houdini Particles</a></h1></div>
<div id="Voxyde - Intro to Houdini Particles-[[https://www.youtube.com/watch?v=94YAomHfMbw|YouTube - Voxyde - Intro to Houdini Particles]]"><h4 id="[[https://www.youtube.com/watch?v=94YAomHfMbw|YouTube - Voxyde - Intro to Houdini Particles]]" class="header"><a href="#Voxyde - Intro to Houdini Particles-[[https://www.youtube.com/watch?v=94YAomHfMbw|YouTube - Voxyde - Intro to Houdini Particles]]"><a href="https://www.youtube.com/watch?v=94YAomHfMbw">YouTube - Voxyde - Intro to Houdini Particles</a></a></h4></div>

<ul>
<li>
<a href="houdini_voxyde_intro_to_houdini_particles.html#Basics">00:00:00 - 00:13:06 : Basics</a>

<li>
<a href="houdini_voxyde_intro_to_houdini_particles.html#Geometry VOP">00:13:06 - 00:35:46 : Geometry VOP</a>

<li>
<a href="houdini_voxyde_intro_to_houdini_particles.html#VOP Examples">00:35:46 - 00:50:14 : VOP Examples</a>

<li>
<a href="houdini_voxyde_intro_to_houdini_particles.html#Sourcing">00:50:14 - 01:15:50 : Sourcing</a>

<li>
<a href="houdini_voxyde_intro_to_houdini_particles.html#Attributes &amp; Inheritance">01:15:50 - 01:33:58 : Attributes &amp; Inheritance</a>

<li>
<a href="houdini_voxyde_intro_to_houdini_particles.html#Interpolate Source">01:33:58 - 01:42:31 : Interpolate Source</a>

<li>
<a href="houdini_voxyde_intro_to_houdini_particles.html#Collisions">01:42:31 - 02:01:21 : Collisions</a>

<li>
<a href="houdini_voxyde_intro_to_houdini_particles.html#Conclusion">02:01:21 - 02:02:26 : Conclusion</a>

</ul>
<div id="Voxyde - Intro to Houdini Particles-Basics"><h2 id="Basics" class="header"><a href="#Voxyde - Intro to Houdini Particles-Basics">Basics</a></h2></div>

<ul>
<li>
<a href="https://www.youtube.com/watch?v94YAomHfMbw&amp;t0s">00:00:00 - 00:13:06 : Basics</a>

</ul>
<p>
Most particle systems start with a source (object), piped into a POP Network.
</p>

<div id="Voxyde - Intro to Houdini Particles-Basics-Basic Setup"><h3 id="Basic Setup" class="header"><a href="#Voxyde - Intro to Houdini Particles-Basics-Basic Setup">Basic Setup</a></h3></div>

<p>
Inside a Geometry (container) node:
</p>
<ul>
<li>
Create <code>Sphere</code>

<li>
Add a <code>POP Network</code>:

<ul>
<li>
Connect <code>Sphere</code> into first input

<li>
Playing the timeline, we'll see the particles spawning.

</ul>
<li>
Add a <code>POP Force</code> node (freestanding) and pipe into the <code>Merge</code> node (labeled <code>wire_pops_into_here</code>):

<ul>
<li>
In the <code>Force</code> parameter, set to <code>0, 1, 0</code> (for an upward direction - y axis)

<li>
Playback to see the particles rise

<li>
Experiment with:

<ul>
<li>
<code>Noise</code> tab:

<ul>
<li>
<code>Amplitude</code> for example (set to 1 perhaps)

<li>
Look at others

</ul>
</ul>
</ul>
<li>
Add a <code>POP Color</code> node (and again, pipe to the <code>Merge</code> node):

<ul>
<li>
The default <code>Color Type</code> is <code>Constant</code>

<li>
You can set the <code>Color</code> parameter and see this color in the Viewport particles.

<li>
Switch <code>Color Type</code> to <code>Ramp</code>:

<ul>
<li>
This is already set with a VEXpression based on the age (<code>@nage</code>) attribute:

<ul>
<li>
<code>ramp = @nage;</code> which is 'normalized age'

<li>
change to <code>ramp = @age;</code> to be just age

</ul>
<li>
The <code>Range</code> fields are 'seconds' - 0 to 1 is zero to one second:

<ul>
<li>
0 will be the left color on ramp, 1 will become the color on the right (passing through the range as the time moves ahead)

<li>
change to 0 and 4 and see result

</ul>
<li>
On the cog wheel icon to the right of the ramp, there are preset colors to choose from

</ul>
</ul>
</ul>
<p>
Typical layout of simple Particle system:
</p>
<pre>
                                ┌──────────┐                   
                                │POP Source│                   
                                └───┬──────┘                   
                                    │      ┌─────────┐         
                                    │      │Pop Force│         
 ┌─────────────┐                    │      └───┬─────┘         
 │Source Object│                    │          │               
 └─────┬───────┘          ┌─────────┘          │    ┌─────────┐
       │                  │                    │    │POP Color│
       │                  │       ┌────────────┘    └─────┬───┘
       │                  │       │                       │    
       │                  │       │   ┌───────────────────┘    
       │                  ┼       ┼   │                        
       │           ┌──────┴───────┴───┼───┐                    
       │           │         Merge        │                    
       │           │ write_pops_into_here │                    
       └────┐     ┌┴──────────────────────┘                    
            │     │                                            
         ┌──┴─────┴┐                                           
         │popsolver│                                           
         └────┬────┘                                           
              │                                                
              │                                                
         ┌────┴───┐                                            
         │ output │                                            
         └────────┘                                            
</pre>


<p>
Setting the 'life' of the particles:
</p>
<ul>
<li>
On the <code>POP Source</code> node ('source_first_input') node's parameters:

<ul>
<li>
<code>Birth</code> tab:

<ul>
<li>
<code>Life Expectancy</code> field set's the age (in seconds): try 2

<li>
<code>Life Variance</code> gives a variance (in seconds) of the value given: try 0.5

</ul>
</ul>
</ul>
<p>
Play will the parameters to get a feel for the process and the results.
</p>

<table>
<tr>
<td>
<span id="Voxyde - Intro to Houdini Particles-Basics-Basic Setup-TIP"></span><strong id="TIP">TIP</strong>: You can close the parameter pane (little arrow on divider) and <code>P</code> key to bring up a floating (but static) Parameter pane over the Network Editor space.
</td>
</tr>
</table>


<p>
Good news - that was simple!
</p>

<p>
Bad news - we need to learn to control things ourselves, not rely on pre-built stacked nodes.
</p>

<div id="Voxyde - Intro to Houdini Particles-Basics-Advocating for the Geometry VOP"><h3 id="Advocating for the Geometry VOP" class="header"><a href="#Voxyde - Intro to Houdini Particles-Basics-Advocating for the Geometry VOP">Advocating for the Geometry VOP</a></h3></div>

<p>
The main ingredient will be the <code>Geometry VOP</code> node. This is very similar to the <code>Attribute VOP</code> node - and is node based.
</p>

<p>
This alternative approach is suggested:
</p>
<pre>
                         ┌──────────┐            
                         │POP Source│            
                         └────┬─────┘            
                              │                  
                              │                  
                              │                  
                       ┌──────┴───────┐          
 ┌─────────────┐       │ Geometry VOP │          
 │Source Object│       └──────┬───────┘          
 └─────┬───────┘              │                  
       │                      │                  
       │           ┌──────────┴───────────┐      
       │           │         Merge        │      
       │           │ write_pops_into_here │      
       └────┐     ┌┴──────────────────────┘      
            │     │                              
         ┌──┴─────┴┐                             
         │popsolver│                             
         └────┬────┘                             
              │                                  
              │                                  
         ┌────┴───┐                              
         │ output │                              
         └────────┘                              
</pre>

<p>
To illustrate the similar result as with the conventional setup shown in the first section, this setup inside the <code>Geometry VOP</code> node will give similar results:
</p>


<pre>
                       ┌───────────────┐                       
                       │   Constant    │                       
                       │set to 3 Floats│                       
                       │    0,1,0      │                       
                       └──────┬────────┘                       
  ┌─────────────────┐         │               ┌──────────────┐ 
  │     INPUT       │         │               │    OUTPUT    │ 
  │geometryvopglobal│         │               │geometryvopout│ 
  │                 │         │               │              │ 
  │                 │         │               │ P            │ 
  │                 │         │               │ v            │ 
  │                 │         └───────────────┤ force        │ 
  │                 │                         │ Cd           │ 
  │                 │                         │ N            │ 
  └─────────────────┘                         │              │ 
                                              └──────────────┘ 
</pre>

<p>
Look at the result in the Viewport, and see that the particles accelerate upwards from the 'force' input.
</p>

<p>
Now plug the constant into the <code>v</code> instead. Now the particles will travel at a constant speed.
</p>

<div id="Voxyde - Intro to Houdini Particles-Basics-Advocating for the Geometry VOP-Physically Accurate vs Art Directed Intentions"><h4 id="Physically Accurate vs Art Directed Intentions" class="header"><a href="#Voxyde - Intro to Houdini Particles-Basics-Advocating for the Geometry VOP-Physically Accurate vs Art Directed Intentions">Physically Accurate vs Art Directed Intentions</a></h4></div>

<p>
The point is made that although the 'POP Force' type pre-made POP nodes are accurate and 'realistic', they don't necessarily give the control that an art-directed intention requires.
</p>

<p>
So we need more control of the behavior of particles, and the many pre-fabricated 'POP' nodes might not be the best option.
</p>

<p>
The <code>Geometry VOP</code> may be the gateway in to more control.
</p>


<div id="Voxyde - Intro to Houdini Particles-Geometry VOP"><h2 id="Geometry VOP" class="header"><a href="#Voxyde - Intro to Houdini Particles-Geometry VOP">Geometry VOP</a></h2></div>
<ul>
<li>
<a href="https://www.youtube.com/watch?v94YAomHfMbw&amp;t786s">00:13:06 - 00:35:46 : Geometry VOP</a>

</ul>
<p>
One of the differences between a <code>Geometry VOP</code> and an <code>Attribute VOP</code> is in the process of using an <code>OpInput#</code>.
</p>

<p>
In the <code>Attribute VOP</code>, the nodules on the outside of the node, take input from pipes from input objects. In the <code>Geometry VOP</code>, the inputs must be referenced via an asset's path.
</p>

<p>
Select the <code>Geometry VOP</code> node, and in its parameters:
</p>
<ul>
<li>
<code>Inputs</code> tab:

<ul>
<li>
<code>Input 1</code> (Input 2, Input 3 etc.), select an option from the drop-down:

<ul>
<li>
Maybe <code>SOP</code>, then the field will become open to paste or type an asset path:

<ul>
<li>
Example: <code>/obj/geo2/goal</code>

</ul>
</ul>
</ul>
<li>
Now, inside the <code>Geometry VOP</code>, the <code>geometryvopglobal</code> node's <code>OpInput1</code> widget output will reference <code>/obj/geo2/goal</code>

</ul>
<div id="Voxyde - Intro to Houdini Particles-Geometry VOP-Mini Project"><h4 id="Mini Project" class="header"><a href="#Voxyde - Intro to Houdini Particles-Geometry VOP-Mini Project">Mini Project</a></h4></div>
<p>
In the example mini-project, our goal is to set a 'target' point in space (<code>Add</code> node), and get the particles to gravitate to that point:
</p>
<ul>
<li>
<code>Add</code> node is placed in the 'geo' container and set to be a single point.

<li>
and inside the <code>Geometry VOP</code>:

<ul>
<li>
an <code>Import Point Attribute</code> node is dropped and connected to the <code>OpInput1</code> output into its <code>file</code> input.

<li>
The <code>Attribute</code> field is set to <code>P</code> on the <code>Import Point Attribute</code> node  * The <code>Attribute</code> field is set to <code>P</code> on the <code>Import Point Attribute</code> node.

<li>
The <code>Signature</code> drop-down is set to <code>Vector 3</code>

<li>
The <code>ptnum</code> input is set to <code>Constant</code> (<code>MMB</code>) and the value is zero (for the one and only point in the <code>Add</code> node.

</ul>
<li>
To get a direction vector, we have to subtract the current particle position from the target position, so we drop a <code>Subtract</code> node:

<ul>
<li>
<code>input1</code> takes in the <code>result</code> from the <code>Import Point Attribute</code> node.

<li>
<code>input2</code> takes in the <code>P</code> position from the <code>geometryvopglobal</code>

</ul>
<li>
The output needs to be 'normalized':

<ul>
<li>
Drop a <code>Normalize</code> node from the <code>diff</code> output of the <code>Subtract</code> node.

<li>
From the <code>nvect</code> output of the <code>Normalize</code> node, plug into the <code>force</code> input on the <code>geometryvopoutput</code> node.

</ul>
</ul>
<p>
Layout so far:
</p>
<pre>
                                                 ┌─────────────────┐       ┌──────────────┐                                                
  ┌─────────────────┐                            │ subtract1       │       │ Normalize    │                      ┌──────────────┐          
  │     INPUT       │            ┌───────────────┤ input1     diff ├───────┼ vec   nvec   ┼─┐                    │    OUTPUT    │          
  │geometryvopglobal│            │           ┌───┤ input2          │       └──────────────┘ │  ┌──────────────┐  │geometryvopout│          
  │                 │            │           │   └─────────────────┘                        │  │  Multiply    │  │ P            │          
  │                P┼────────────┘           │                                              └──┤ val   scaled ┼──┼ v            │          
  │                 │      ┌───────────────┐ │                                                 └──────────────┘  │              │          
  │                 │      │importpoint1   │ │                                                                   │ force        │          
  │                 │      ┤               │ │                                                                   │ Cd           │          
  │        OpInput1 ┼──────┤file     result┼─┘                                                                   │ N            │          
  └─────────────────┘      │               │                                                                     │              │          
                        ┌──┤ptnum          │      ('Import point' is pulling a point from                        └──────────────┘          
                        │  └───────────────┘      an 'Add' node with one point up at the                                                                                         
            ┌────────┐  │                         Geometry container level.)                                                                                         
            │Constant│  │                                                                                                                  
            │ ptnum  ├──┘                                                                                                                  
            │   0    │                                                                                                                     
            └────────┘                                                                                                                     
</pre>

<div id="Voxyde - Intro to Houdini Particles-Geometry VOP-Problem"><h4 id="Problem" class="header"><a href="#Voxyde - Intro to Houdini Particles-Geometry VOP-Problem">Problem</a></h4></div>
<ul>
<li>
Playing the result, the particles move from the <code>Sphere</code> geometry, towards the <code>Add</code> point, but then overshoot past.

<li>
Eventually they turn around an move again towards the target point.

</ul>
<div id="Voxyde - Intro to Houdini Particles-Geometry VOP-Fix"><h4 id="Fix" class="header"><a href="#Voxyde - Intro to Houdini Particles-Geometry VOP-Fix">Fix</a></h4></div>
<ul>
<li>
If we plug the <code>nvec</code> into the <code>v</code> (velocity) on the <code>geometryvopoutput</code> instead of the <code>force</code>, the particles behave more like we expected or hoped (honing in on the target point).

</ul>
<div id="Voxyde - Intro to Houdini Particles-Geometry VOP-Another control"><h4 id="Another control" class="header"><a href="#Voxyde - Intro to Houdini Particles-Geometry VOP-Another control">Another control</a></h4></div>
<ul>
<li>
You can add a <code>Multiply Constant</code> node after the <code>Normalize</code> to control the speed.

</ul>
<div id="Voxyde - Intro to Houdini Particles-Geometry VOP-Quickfix"><h4 id="Quickfix" class="header"><a href="#Voxyde - Intro to Houdini Particles-Geometry VOP-Quickfix">Quickfix</a></h4></div>
<p>
There is a curious knot at the target point in this simple simulation, and a quick fix is to have the life expectancy to be 1.2 in the demo example. Apparently there are a million 'fixes', but this isn't the point of this demo.
</p>

<div id="Voxyde - Intro to Houdini Particles-Geometry VOP-Duplicating the 'geometryvopglobal'"><h3 id="Duplicating the 'geometryvopglobal'" class="header"><a href="#Voxyde - Intro to Houdini Particles-Geometry VOP-Duplicating the 'geometryvopglobal'">Duplicating the 'geometryvopglobal'</a></h3></div>

<p>
In the demo, the 'geometryvopglobal' is duplicated, so that you have a fresh output to help keep the schematic 'cleaner'. I looks like duplicating it is just creating another location for the same 'inputs'.
</p>

<div id="Voxyde - Intro to Houdini Particles-Geometry VOP-Adding Noise to out Simple Setup"><h3 id="Adding Noise to out Simple Setup" class="header"><a href="#Voxyde - Intro to Houdini Particles-Geometry VOP-Adding Noise to out Simple Setup">Adding Noise to out Simple Setup</a></h3></div>

<ul>
<li>
From the 'P' parameter input node's widgets:

<ul>
<li>
Add a <code>Vector to Vector 4</code> node:

<ul>
<li>
This is a vector with the added time data.

</ul>
<li>
Add a <code>Curl Noise</code> node:

<ul>
<li>
Plug from the <code>hvec</code> on the vector node

<li>
into the <code>pos</code> input on the noise.

</ul>
<li>
Set <code>Noise Type</code> to <code>Analytic Fast Simplex Noise</code>

<li>
(Delete the <code>Multiply Constant</code> after the <code>Normalize</code> if it's there.)

</ul>
<li>
From the previous <code>Normalize</code> node add an <code>Add</code> node (before the last output node)

<li>
Plug in the <code>result</code> from the <code>Curl Noise</code> into the <code>input2</code> on the <code>Add</code> node

</ul>
<p>
Now we have some chaotic particle action that seems to gravitate subtly to the target point.
</p>

<p>
The demo goes on to show the results when plugging back to <code>force</code> rather than the more predictable <code>v</code> (velocity), and changes <code>Life Expectancy</code> of the particles. The <code>Color</code> node is re-added with the ramp colors.
</p>

<pre>
                                                                                                                ┌──────────────┐ 
                                                                                                                │    OUTPUT    │ 
                                                                                                                │geometryvopout│ 
                                                ┌─────────────────┐       ┌──────────────┐   ┌───────────┐      │              │ 
 ┌─────────────────┐                            │ subtract1       │       │ Normalize    │   │    Add    │      ┼ P            │ 
 │     INPUT       │            ┌───────────────┤ input1     diff ├───────┼ vec   nvec   ┼───│input1  sum┼──────┼ v            │ 
 │geometryvopglobal│            │           ┌───┤ input2          │       └──────────────┘   │           │      │ force        │ 
 │                 │            │           │   └─────────────────┘                    ┌─────┤input2     │      │ Cd           │ 
 │                P┼────────────┘           │                                          │     └───────────┘      │ N            │ 
 │                 │      ┌───────────────┐ │                                          │                        │              │ 
 │                 │      │importpoint1   │ │                                          │                        └──────────────┘ 
 │                 │      ┤               │ │                                          │                                         
 │        OpInput1 ┼──────┤file     result┼─┘                                          │                                         
 └─────────────────┘      │               │                                            │                                         
                       ┌──┤ptnum          │   ('Import point' is pulling a point from  │                                         
                       │  └───────────────┘   an 'Add' node with one point up at the   │                                         
           ┌────────┐  │                      Geometry container level.)               │                                         
           │Constant│  │                                                               │                                         
           │ ptnum  ├──┘                                                               │                                         
           │   0    │                                                                  │                                         
           └────────┘                                                                  │                                         
                                                                                       │                                         
                                                                                       │                                         
                                                                                       │                                         
                                                                                       │                                         
                                                                                       │                                         
                                                                                       │                                         
 ┌─────────────────┐                                                                   │                                         
 │     INPUT       │                                                                   │                                         
 │geometryvopglobal│    ┌─────────────────┐     ┌──────────────┐                       │                                         
 │                 │    │ VectorToVector4 │     │  Curl Noise  │                       │                                         
 │               P ┼────┤ vec             │     │              │                       │                                         
 │                 │    │            hvec ├─────┼ pos    noise ├───────────────────────┘                                         
 │            Time ├────┼ fval4           │     └──────────────┘                                                                 
 │                 │    └─────────────────┘                                                                                      
 │                 │                                                                                                             
 └─────────────────┘                                                                                                             
</pre>
<p>
Another experiment is to plug the <code>age</code> from the input node into the <code>amp</code> input of the final node. Now the particles get more agitated as they move towards the goal.
</p>
<ul>
<li>
To regain some restraint:

<ul>
<li>
Plug a <code>Fit Range</code> node between them:

<ul>
<li>
Maybe try <code>Destination Max</code> to 0.5 

<li>
Alternately, reverse the chaos:

<ul>
<li>
<code>Source Min</code> 0

<li>
<code>Source Max</code> 1

<li>
<code>Destination Min</code> 1

<li>
<code>Destination Max</code> 0

</ul>
<li>
Now the particles start chaotic and calm toward the target point.

</ul>
<li>
Try tweaking these values to see the results.

</ul>
<li>
Now for more control, reset the <code>Fit Range</code> parameters to the default (0,1,0,1) then:

<ul>
<li>
Add a <code>Ramp Parmater</code> node:

<ul>
<li>
Set <code>Ramp Type</code> to <code>Spline Ramp (float)</code>

<li>
Move up a level (<code>U</code> key)

<li>
The ramp parameters will now be on the parameter panel for the <code>Geometry VOP</code>

<li>
Expand the ramp visualizer area (little arrow-down icon on the left)

<li>
<code>&lt;cntl&gt; MMB</code> on the little <code>ramp</code> label to reset

<li>
At this stage, nothing will change, but by editing the ramp, we can control the motion:

<ul>
<li>
Try a ramp up at the start and a slow descent to zero.

</ul>
</ul>
</ul>
</ul>
<p>
Here's a combination of elements discussed:
</p>
<pre>
                                                ┌─────────────────┐       ┌──────────────┐                                                              
 ┌─────────────────┐                            │ subtract1       │       │ Normalize    │   ┌───────────────┐                                          
 │     INPUT       │            ┌───────────────┤ input1     diff ├───────┼ vec   nvec   ┼───│  Multiply     │                                          
 │geometryvopglobal│            │           ┌───┤ input2          │       └──────────────┘   │input1         │                        ┌──────────────┐  
 │                 │            │           │   └─────────────────┘                   ┌──────│input2  product├─┐                      │    OUTPUT    │  
 │                P┼────────────┘           │                                         │      └───────────────┘ │                      │geometryvopout│  
 │                 │      ┌───────────────┐ │                                         │                        │   ┌───────────┐      │              │  
 │                 │      │importpoint1   │ │                                         │                        │   │    Add    │      ┼ P            │  
 │                 │      ┤               │ │                                         │                        └───┤input1  sum┼──────┼ v            │  
 │        OpInput1 ┼──────┤file     result┼─┘                                         │                            │           │      │ force        │  
 └─────────────────┘      │               │                                           │                   ┌────────┤input2     │      │ Cd           │  
                       ┌──┤ptnum          │                                           │                   │        └───────────┘      │ N            │  
                       │  └───────────────┘                                           │                   │                           │              │  
           ┌────────┐  │                                                              │                   │                           └──────────────┘  
           │Constant│  │                                                              │                   │                                             
           │ ptnum  ├──┘                                                              │                   │                                             
           │   0    │                                                                 │                   │                                             
           └────────┘                                                                 │                   │                                             
                                                                                      │                   │                                             
                         ┌───────────┐                                                │                   │                                             
                         │Fit Range  │                                                │                   │                                             
                     ┌───┤val  shift ├────────────────────────────────────────────────┘                   │                                             
                     │   └───────────┘                                                                    │                                             
                     │a                                                                                   │                                             
 ┌─────────────────┐ │g                                                                                   │                                             
 │     INPUT       │ │e                                                                                   │                                             
 │geometryvopglobal│ │                                                                                    │                                             
 │             age ├─┤                                                                                    │                                             
 │                 │ │  ┌─────────────────┐                   ┌──────────────┐                            │                                             
 │                 │ │  │ VectorToVector4 │                   │  Curl Noise  │                            │                                             
 │               P ├─ ──┤ vec             │                   │              │                            │                                             
 │                 │ │  │            hvec ├───────────────────┤ pos    noise─┼────────────────────────────┘                                             
 │            Time ├─ ──┼ fval4           │                   │              │                                                                          
 │                 │ │  └─────────────────┘                ┌──┤ amp          │                                                                          
 │                 ├ │                                     │  │              │                                                                          
 └─────────────────┘ │                                     │  └──────────────┘                                                                          
                     │a                                    │                                                                                            
                     │g                                    │                                                                                            
                     │e      ┌───────────┐   ┌──────────┐  │                                                                                            
                     │       │Fit Range  │   │Ramp Parm │  │                                                                                            
                     └───────┤val  shift ├───┼input ramp├──┘                                                                                            
                             └───────────┘   └──────────┘                                                                                               
</pre>
<p>
This is later without the ramp:
</p>
<pre>
                                                 ┌─────────────────┐       ┌──────────────┐                                                              
  ┌─────────────────┐                            │ subtract1       │       │ Normalize    │   ┌───────────────┐                                          
  │     INPUT       │            ┌───────────────┤ input1     diff ├───────┼ vec   nvec   ┼───│  Multiply     │                                          
  │geometryvopglobal│            │           ┌───┤ input2          │       └──────────────┘   │input1         │                        ┌──────────────┐  
  │                 │            │           │   └─────────────────┘                   ┌──────│input2  product├─┐                      │    OUTPUT    │  
  │                P┼────────────┘           │                                         │      └───────────────┘ │                      │geometryvopout│  
  │                 │      ┌───────────────┐ │                                         │                        │   ┌───────────┐      │              │  
  │                 │      │importpoint1   │ │                                         │                        │   │    Add    │      ┼ P            │  
  │                 │      ┤               │ │                                         │                        └───┤input1  sum┼──────┼ v            │  
  │        OpInput1 ┼──────┤file     result┼─┘                                         │                            │           │      │ force        │  
  └─────────────────┘      │               │                                           │                   ┌────────┤input2     │      │ Cd           │  
                        ┌──┤ptnum          │                                           │                   │        └───────────┘      │ N            │  
                        │  └───────────────┘                                           │                   │                           │              │  
            ┌────────┐  │                                                              │                   │                           └──────────────┘  
            │Constant│  │                    ('Import point' is pulling a point from   │                   │                                             
            │ ptnum  ├──┘                    an 'Add' node with one point up at the    │                   │                                             
            │   0    │                       Geometry container level.)                │                   │                                             
            └────────┘                                                                 │                   │                                             
                                                                                       │                   │                                             
                          ┌───────────┐                                                │                   │                                             
                          │Fit Range  │                                                │                   │                                             
                      ┌───┤val  shift ├────────────────────────────────────────────────┘                   │                                             
                      │   └───────────┘                                                                    │                                             
                      │                                                                                    │                                             
  ┌─────────────────┐ │                                                                                    │                                             
  │     INPUT       │ │                                                                                    │                                             
  │geometryvopglobal│ │                                                                                    │                                             
  │             age ├─┘                                                                                    │                                             
  │                 │    ┌─────────────────┐     ┌──────────────┐                                          │                                             
  │                 │    │ VectorToVector4 │     │  Curl Noise  │                                          │                                             
  │               P ├────┤ vec             │     │              │                                          │                                             
  │                 │    │            hvec ├─────┼ pos    noise ├──────────────────────────────────────────┘                                             
  │            Time ├────┼ fval4           │     └──────────────┘                                                                                        
  │                 │    └─────────────────┘                                                                                                             
  │                 ├                                                                                                                                    
  └─────────────────┘                                                                                                                                    
</pre>

<div id="Voxyde - Intro to Houdini Particles-Geometry VOP-Conclusion on Geometry VOP vs POP nodes"><h3 id="Conclusion on Geometry VOP vs POP nodes" class="header"><a href="#Voxyde - Intro to Houdini Particles-Geometry VOP-Conclusion on Geometry VOP vs POP nodes">Conclusion on Geometry VOP vs POP nodes</a></h3></div>

<p>
Examples are shown using the <code>POP &lt;blah&gt;</code> nodes and how tweaking and controlling them is difficult compared to the <code>Geometry VOP</code> node.
</p>

<p>
"The dirty secret" is that inside these various pre-built <code>POP &lt;blah&gt;</code> nodes, is that there is a <code>Geometry VOP</code> inside them. Look inside to see how they are wired.
</p>
<ul>
<li>
<code>RMB</code> and choose <code>Allow Editing of Contents</code>.

</ul>
<p>
It was noted that a lot of the inner nodes of the <code>Geometry VOP</code> nodes (inside pre-built <code>POP &lt;blah&gt;</code> nodes) look intimitdating, but many are just links to the parameter controls on the outside.
</p>

<div id="Voxyde - Intro to Houdini Particles-VOP Examples"><h2 id="VOP Examples" class="header"><a href="#Voxyde - Intro to Houdini Particles-VOP Examples">VOP Examples</a></h2></div>
<ul>
<li>
<a href="https://www.youtube.com/watch?v94YAomHfMbw&amp;t2146s">00:35:46 - 00:50:14 : VOP Examples</a>

</ul>
<div id="Voxyde - Intro to Houdini Particles-VOP Examples-Tornado Example"><h3 id="Tornado Example" class="header"><a href="#Voxyde - Intro to Houdini Particles-VOP Examples-Tornado Example">Tornado Example</a></h3></div>

<p>
In a <code>Geometry</code> container:
</p>
<ul>
<li>
Make a <code>Torus</code>:

<ul>
<li>
<code>Radius</code> 2.4 x 0.11

<li>
<code>Rows</code> 50

<li>
<code>Columns</code> 50

</ul>
<li>
Add a <code>POP Network</code>, and inside:

<ul>
<li>
Select the <code>POP Source</code> node ('source_first_input')

<li>
Deselect or 'check off' the Guide check box at the top of the parameter panel

</ul>
</ul>
<p>
The tutorial shows that you can set up a tornado of sorts quickly with a <code>POP Axis Force</code>, <code>POP Drag</code>, and <code>POP Force</code> node along the network, but it's difficult to have complete control.
</p>

<div id="Voxyde - Intro to Houdini Particles-VOP Examples-Tornado Example-Back to a Geometry VOP"><h4 id="Back to a Geometry VOP" class="header"><a href="#Voxyde - Intro to Houdini Particles-VOP Examples-Tornado Example-Back to a Geometry VOP">Back to a Geometry VOP</a></h4></div>

<p>
Start afresh inside the <code>POP Network</code>
</p>

<p>
After the <code>POP Source</code> node, add a <code>Geometry VOP</code> node.
</p>
<ul>
<li>
First we need to generate a direction vector, and add noise on top:

<ul>
<li>
The upward vector is easy - it's a constant 0,1,0 vector.

<li>
The rotation vector needs to be generated by taking a <code>cross product</code> of a plane that cuts through the torus (one edge towards the center, the other straight 'up').

<ul>
<li>
Upward vector:

<ul>
<li>
<code>0,1,0</code>

</ul>
<li>
Center Vector:

<ul>
<li>
Position of point minus center location:

<ul>
<li>
<code>P(x, y, z)</code> - <code>C(x, y, z)</code> (Center is 0, 0, 0 in our case)

</ul>
</ul>
</ul>
</ul>
</ul>
<div id="Voxyde - Intro to Houdini Particles-VOP Examples-Building this calculation inside the 'Geometry VOP'"><h3 id="Building this calculation inside the 'Geometry VOP'" class="header"><a href="#Voxyde - Intro to Houdini Particles-VOP Examples-Building this calculation inside the 'Geometry VOP'">Building this calculation inside the 'Geometry VOP'</a></h3></div>

<p>
Jump into the <code>Geometry VOP</code>:
</p>
<ul>
<li>
Find the vector pointing to the center of the Torus:

<ul>
<li>
Create a <code>Constant</code>:

<ul>
<li>
Set to <code>3 Floats (vector)</code>

<li>
Leave at zero, zero, zero (since that's the center of our Torus)

</ul>
<li>
Out of the Value output add a <code>Subtract</code> node:

<ul>
<li>
Plug the <code>P</code> (pos) output from the 'geometryvopglobal1' node into the <code>Subtract</code> 'input2'.

</ul>
<li>
Out of the <code>Subtract</code> add a <code>Normalize</code> node

<ul>
<li>
This is what we need for the cross-product calculation.

</ul>
<li>
From the <code>nvec</code> output from the <code>Normalize</code>:

<ul>
<li>
Add a <code>Cross Product</code> node (<code>vec1</code>)

</ul>
<li>
Inside the <code>Normalize</code> there is facility to hard code a vector.

<ul>
<li>
(Otherwise we could add a Constant, but it's not necessary.)

<li>
<code>Vector2</code> field to <code>0, 1, 0</code> (for an upward normalized vector)

</ul>
<li>
The <code>crossprod</code> output can then be plugged into the <code>v</code> of the <code>geometryvopoutput1</code> node.

</ul>
</ul>
<p>
This is how it might look:
</p>
<pre>
                      ┌──────────────┐                                                                                       
                      │   Constant   │                                                                                       
                      │3Float(vector)┼──┐                                                                                    
                      │    0,0,0     │  │                                                                                    
                      └──────────────┘  │                                                                                    
                                        │                                                                                    
  ┌─────────────────┐                   │                                                                ┌──────────────┐    
  │     INPUT       │                   │   ┌────────────┐     ┌────────────┐     ┌────────────────┐     │    OUTPUT    │    
  │geometryvopglobal│                   │   │  Subtract  │     │  Normalize │     │  CrossProduct  │     │geometryvopout│    
  │                 │                   │   │            │     │            │     │                │     │              │    
  │                 │                   └───┤input1  diff├─────┼vec     nvec├─────┤vec1   crossprod├─────┼ P            │    
  │               P ┼───────────────────────┤input2      │     └────────────┘     └────────────────┘     │ v            │    
  │                 │                       └────────────┘                                               │ force        │    
  │                 │                                                                                    │ Cd           │    
  │                 │                                                                                    │ N            │    
  │                 │                                                                                    │              │    
  │                 │                                                                                    └──────────────┘    
  └─────────────────┘                                                                                                        
</pre>

<p>
The next step is to add the Vertical motion using an 'up' vector:
</p>
<ul>
<li>
Add a <code>Constant</code> node:

<ul>
<li>
<code>Constant Type</code> to <code>3Float (vector)</code>

<li>
set to <code>0, 1, 0</code>

</ul>
<li>
Create an <code>Add</code> node between the <code>Cross Product</code> and the output node:

<ul>
<li>
<code>Cross Product</code> into input1

<li>
<code>Constant</code> into input2

<li>
Output from <code>sum</code> to the output <code>P</code>

</ul>
</ul>
<p>
This is the network:
</p>
<pre>
                      ┌──────────────┐                                                                                                          
                      │   Constant   │                                                                                                          
                      │3Float(vector)┼──┐                                                                                                       
                      │    0,0,0     │  │                                                                                                       
                      └──────────────┘  │                                                                                                       
                                        │                                                                                                       
  ┌─────────────────┐    (center)       │                                                                                    ┌──────────────┐   
  │     INPUT       │                   │   ┌────────────┐     ┌────────────┐     ┌────────────────┐     ┌────────────┐      │    OUTPUT    │   
  │geometryvopglobal│                   │   │  Subtract  │     │  Normalize │     │  CrossProduct  │     │    Add     │      │geometryvopout│   
  │                 │                   │   │            │     │            │     │                │     │            │      │              │   
  │                 │                   └───┤input1  diff├─────┼vec     nvec├─────┤vec1   crossprod├─────┤input1   sum├──────┼ P            │   
  │               P ┼───────────────────────┤input2      │     └────────────┘     └────────────────┘     │            │      │ v            │   
  │                 │                       └────────────┘                                          ┌────┤input2      │      │ force        │   
  │                 │                                                                               │    └────────────┘      │ Cd           │   
  │                 │                                                                               │                        │ N            │   
  │                 │                                                           ┌──────────────┐    │                        │              │   
  │                 │                                                           │   Constant   │    │                        └──────────────┘   
  └─────────────────┘                                                           │3Float(vector)┼────┘                                           
                                                                                │    0,1,0     │                                                
                                                                                └──────────────┘                                                
                                                                                                                                                
                                                                                (upwards vector)                                                
</pre>


<p>
Playback should show the particles traveling around the Torus shape and rising in <code>Y</code>.
</p>

<ul>
<li>
You can control the speed of the particle ascension by adjusting the vector on the <code>Constant</code> node. (Maybe <code>3 Float</code> fields to 0, 2, 0.)

<li>
You can control the spinning motion with a <code>Multiply</code> node after the <code>Cross Product</code> node:

<ul>
<li>
<code>Signature</code> to <code>3D Vector</code> by the way.

<li>
Perhaps a value of <code>2</code> for twice as fast.

</ul>
<li>
If you want the particles to speed up as they go up:

<ul>
<li>
You could pipe the INPUT <code>age</code> parameter into a <code>Multiply</code> node (after the <code>Cross Product</code>)

<li>
The vector will be multiplied by the age and speed up.

</ul>
</ul>
<p>
Here's a schematic of some of the additions above:
</p>
<pre>
                      ┌──────────────┐                                                                                                                                    
                      │   Constant   │                                                                                                                                    
                      │3Float(vector)┼──┐                                                                                                                                 
                      │    0,0,0     │  │                                                                                                                                 
                      └──────────────┘  │                                                                                                                                 
                                        │                                                                                                                                 
  ┌─────────────────┐    (center)       │                                                                                                          ┌──────────────┐       
  │     INPUT       │                   │   ┌────────────┐     ┌────────────┐     ┌────────────────┐    ┌────────────────┐     ┌────────────┐      │    OUTPUT    │       
  │geometryvopglobal│                   │   │  Subtract  │     │  Normalize │     │  CrossProduct  │    │   Multiply     │     │    Add     │      │geometryvopout│       
  │                 │                   │   │            │     │            │     │                │    │                │     │            │      │              │       
  │                 │                   └───┤input1  diff├─────┼vec     nvec├─────┤vec1   crossprod├────┤ input1 product ├─────┤input1   sum├──────┼ P            │       
  │               P ┼───────────────────────┤input2      │     └────────────┘     └────────────────┘    │                │     │            │      │ v            │       
  │                 │                       └────────────┘                                   ┌──────────┤ input2         │ ┌───┤input2      │      │ force        │       
  │                 │                                                                        │          └────────────────┘ │   └────────────┘      │ Cd           │       
  │                 │                                                                        │                             │                       │ N            │       
  │             age ├────────────────────────────────────────────────────────────────────────┘                             │                       │              │       
  │                 │                                                                                  ┌──────────────┐    │                       └──────────────┘       
  └─────────────────┘                                                                                  │   Constant   │    │                                              
                                                                                                       │3Float(vector)┼────┘                                              
                                                                                                       │    0,1,0     │                                                   
                                                                                                       └──────────────┘                                                   
                                                                                                                                                                          
                                                                                                       (upwards vector)                                                   
</pre>

<p>
The tutorial then shows the result of adding the <code>Curl Noise</code> setup we created earlier:
</p>
<pre>
                        ┌──────────────┐                                                                                                                                 
                        │   Constant   │                                                                                                                                 
                        │3Float(vector)┼──┐                                                                                                                              
                        │    0,0,0     │  │                                                                                                                              
                        └──────────────┘  │                                                                                                                              
                                          │                                                                                                                              
    ┌─────────────────┐    (center)       │                                                                                                          ┌──────────────┐    
    │     INPUT       │                   │   ┌────────────┐     ┌────────────┐     ┌────────────────┐    ┌────────────────┐     ┌────────────┐      │    OUTPUT    │    
    │geometryvopglobal│                   │   │  Subtract  │     │  Normalize │     │  CrossProduct  │    │   Multiply     │     │    Add     │      │geometryvopout│    
    │                 │                   │   │            │     │            │     │                │    │                │     │            │      │              │    
    │                 │                   └───┤input1  diff├─────┼vec     nvec├─────┤vec1   crossprod├────┤ input1 product ├─────┤input1   sum├──────┼ P            │    
    │               P ┼───────────────────────┤input2      │     └────────────┘     └────────────────┘    │                │     │            │      │ v            │    
    │                 │                       └────────────┘                                   ┌──────────┤ input2         │ ┌───┤input2      │      │ force        │    
    │                 │                                                                        │          └────────────────┘ │   │            │      │ Cd           │    
    │                 │                                                                        │                             │   │            │      │ N            │    
    │             age ├────────────────────────────────────────────────────────────────────────┘                             │ ┌─┤input3      │      │              │    
    │                 │                                                                          ┌──────────────┐            │ │ │            │      └──────────────┘    
    │                 │                                                                          │   Constant   │            │ │ │            │                          
    │                 │                                                                          │3Float(vector)┼────────────┘ │ │            │                          
    │                 │                                                                          │    0,1,0     │              │ └────────────┘                          
    │                 │                                                                          └──────────────┘              │                                         
    │                 │                                                                                                        │                                         
    └─────────────────┘                                                                          (upwards vector)              │                                         
    ┌─────────────────┐                                                                                                        │                                         
    │     INPUT       │                                                                                                        │                                         
    │geometryvopglobal│                                                                                                        │                                         
    │             age │                                                                                                        │                                         
    │                 │    ┌─────────────────┐     ┌──────────────┐                                                            │                                         
    │                 │    │ VectorToVector4 │     │  Curl Noise  │                                                            │                                         
    │               P ├────┤ vec             │     │              │                                                            │                                         
    │                 │    │            hvec ├─────┼ pos    noise ├────────────────────────────────────────────────────────────┘                                         
    │            Time ├────┼ fval4           │     └──────────────┘                                                                                                      
    │                 │    └─────────────────┘                                                                                                                           
    │                 ├                                                                                                                                                  
    └─────────────────┘                                                                                                                                                  
        Duplicated                                                                                                                                                       
           for                                                                                                                                                           
       Organization                                                                                                                                                      
</pre>

<p>
Building on the technique above, we can create levels of noise:
</p>
<ul>
<li>
Duplicate the <code>Curl Noise</code>

<li>
Adjust the <code>Frequency</code> and <code>Amplitude</code>

<li>
Plug this into the next input on the final <code>Add</code> node as 'input4'

</ul>
<p>
To introduce a 'suction' effect of the particles being drawn into the center 'pole' of the rotation, you could take advantage of the normalized vector pointing to the center:
</p>
<ul>
<li>
Add a <code>Multiply Constant</code> node (forking off from the <code>Normalize</code>) and set to <code>Signature</code> of <code>3D Normal</code>

<li>
and plug this directly into the last <code>Add</code> as 'input5'.

<li>
Adjust the slider LESS THAN one, and the particles will get lured to the central pole.

</ul>
<p>
This is a rough layout of where we are at!
</p>
<pre>
                         ┌──────────────┐                                                                                                                                
                         │   Constant   │                                                                                                                                
                         │3Float(vector)┼──┐                                                                                                                             
                         │    0,0,0     │  │                                                                                                                             
                         └──────────────┘  │                                                                                                                             
                                           │                                                                                                                             
     ┌─────────────────┐    (center)       │                                                                                                          ┌──────────────┐   
     │     INPUT       │                   │   ┌────────────┐     ┌────────────┐     ┌────────────────┐    ┌────────────────┐         ┌────────────┐  │    OUTPUT    │   
     │geometryvopglobal│                   │   │  Subtract  │     │  Normalize │     │  CrossProduct  │    │   Multiply     │         │    Add     │  │geometryvopout│   
     │                 │                   │   │            │     │            │     │                │    │                │         │            │  │              │   
     │                 │                   └───┤input1  diff├─────┼vec     nvec├─┬───┤vec1   crossprod├────┤ input1 product ├─────────┤input1   sum├──┼ P            │   
     │               P ┼───────────────────────┤input2      │     └────────────┘ │   └────────────────┘    │                │         │            │  │ v            │   
     │                 │                       └────────────┘                    │              ┌──────────┤ input2         │ ┌───────┤input2      │  │ force        │   
     │                 │                                                         │              │          └────────────────┘ │       │            │  │ Cd           │   
     │                 │                                                         │              │                             │       │            │  │ N            │   
     │             age ├─────────────────────────────────────────────────────────┼──────────────┘                             │ ┌─────┤input3      │  │              │   
     │                 │                                                         │                ┌──────────────┐            │ │     │            │  └──────────────┘   
     │                 │                                                         │                │   Constant   │            │ │  ┌──┤input4      │                     
     │                 │                                                         │                │3Float(vector)┼────────────┘ │  │  │            │                     
     │                 │                                                         │                │    0,1,0     │          ┌───┼──┼──┤input5      │                     
     │                 │                                                         │                └──────────────┘          │   │  │  │            │                     
     │                 │                                                         │                                          │   │  │  └────────────┘                     
     └─────────────────┘                                                         │                (upwards vector)          │   │  │                                     
     ┌─────────────────┐                                                         │   ┌────────────────────┐                 │   │  │                                     
     │     INPUT       │                                                         │   │ Multiply Constant  │                 │   │  │                                     
     │geometryvopglobal│                                                         │   │                    │                 │   │  │                                     
     │             age │                                                         └───┤ val         result ├─────────────────┘   │  │                                     
     │                 │    ┌─────────────────┐     ┌──────────────┐                 └────────────────────┘                     │  │                                     
     │                 │    │ VectorToVector4 │     │  Curl Noise  │                                                            │  │                                     
     │               P ├────┤ vec             │     │              │                                                            │  │                                     
     │                 │    │            hvec ├─┬───┼ pos    noise ├────────────────────────────────────────────────────────────┘  │                                     
     │            Time ├────┼ fval4           │ │   └──────────────┘                                                               │                                     
     │                 │    └─────────────────┘ │                                                                                  │                                     
     │                 ├                        │   ┌──────────────┐                                                               │                                     
     └─────────────────┘                        │   │  Curl Noise  │                                                               │                                     
         Duplicated                             │   │              │                                                               │                                     
            for                                 └───┼ pos    noise ├───────────────────────────────────────────────────────────────┘                                     
        Organization                                └──────────────┘                                                                                                     
</pre>

<div id="Voxyde - Intro to Houdini Particles-Sourcing"><h2 id="Sourcing" class="header"><a href="#Voxyde - Intro to Houdini Particles-Sourcing">Sourcing</a></h2></div>
<ul>
<li>
<a href="https://www.youtube.com/watch?v94YAomHfMbw&amp;t3014s">00:50:14 - 01:15:50 : Sourcing</a>

</ul>
<div id="Voxyde - Intro to Houdini Particles-Attributes &amp; Inheritance"><h2 id="Attributes &amp; Inheritance" class="header"><a href="#Voxyde - Intro to Houdini Particles-Attributes &amp; Inheritance">Attributes &amp; Inheritance</a></h2></div>
<ul>
<li>
<a href="https://www.youtube.com/watch?v94YAomHfMbw&amp;t4550s">01:15:50 - 01:33:58 : Attributes &amp; Inheritance</a>

</ul>
<div id="Voxyde - Intro to Houdini Particles-Interpolate Source"><h2 id="Interpolate Source" class="header"><a href="#Voxyde - Intro to Houdini Particles-Interpolate Source">Interpolate Source</a></h2></div>
<ul>
<li>
<a href="https://www.youtube.com/watch?v94YAomHfMbw&amp;t5638s">01:33:58 - 01:42:31 : Interpolate Source</a>

</ul>
<div id="Voxyde - Intro to Houdini Particles-Collisions"><h2 id="Collisions" class="header"><a href="#Voxyde - Intro to Houdini Particles-Collisions">Collisions</a></h2></div>
<ul>
<li>
<a href="https://www.youtube.com/watch?v94YAomHfMbw&amp;t6151s">01:42:31 - 02:01:21 : Collisions</a>

</ul>
<div id="Voxyde - Intro to Houdini Particles-Conclusion"><h2 id="Conclusion" class="header"><a href="#Voxyde - Intro to Houdini Particles-Conclusion">Conclusion</a></h2></div>
<ul>
<li>
<a href="https://www.youtube.com/watch?v94YAomHfMbw&amp;t7281s">02:01:21 - 02:02:26 : Conclusion</a>

</ul>
<p>
<br>
<a href="Houdini.html">Houdini</a>
</p>

<p>
<a href="index.html">index</a>
</p>

</body>
</html>
