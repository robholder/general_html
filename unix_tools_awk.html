<!DOCTYPE html>
<html>
<head>
<link rel="Stylesheet" type="text/css" href="style.css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<title>unix_tools_awk</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<p>
<a href="index.html">index</a>
<br>
</p>

<p>
<a href="unix_tools_index.html">Unix Tools</a>
</p>

<div id="awk"><h1 id="awk" class="header"><a href="#awk">awk</a></h1></div>

<p>
<a href="https://www.geeksforgeeks.org/awk-command-unixlinux-examples/">https://www.geeksforgeeks.org/awk-command-unixlinux-examples/</a>
<br>
</p>

<div id="Contents" class="toc"><h2 id="Contents" class="header"><a href="#Contents">Contents</a></h2></div>

<ul>
<li>
<a href="unix_tools_awk.html#Format:">#Format:</a>

<li>
<a href="unix_tools_awk.html#Example input file - named &quot;employee.txt&quot;: <br>">#Example input file - named "employee.txt": <br></a>

<li>
<a href="unix_tools_awk.html#Print all the contexts of file (above):">#Print all the contexts of file (above):</a>

<li>
<a href="unix_tools_awk.html#Filter with pattern:<br>">#Filter with pattern:<br></a>

<li>
<a href="unix_tools_awk.html#Splitting lines into Fields:<br>">#Splitting lines into Fields:<br></a>

<li>
<a href="unix_tools_awk.html#Fields examples">#Fields examples</a>

<li>
<a href="unix_tools_awk.html#Built-in Variables">#Built-in Variables</a>

<li>
<a href="unix_tools_awk.html#Adding Line (Record) Numbers to Output">#Adding Line (Record) Numbers to Output</a>

<li>
<a href="unix_tools_awk.html#Using NF variable to Display Last Field (NF - current count of fields)">#Using NF variable to Display Last Field (NF - current count of fields)</a>

<li>
<a href="unix_tools_awk.html#Using NR variable to Display Lines 3 to 6">#Using NR variable to Display Lines 3 to 6</a>

<li>
<a href="unix_tools_awk.html#Adding Custom Separator">#Adding Custom Separator</a>

<li>
<a href="unix_tools_awk.html#To Count Number of Lines in a File">#To Count Number of Lines in a File</a>

<li>
<a href="unix_tools_awk.html#Print Lines Longer Than 28 Characters Long">#Print Lines Longer Than 28 Characters Long</a>

<li>
<a href="unix_tools_awk.html#Check If String in Specific Column">#Check If String in Specific Column</a>

<li>
<a href="unix_tools_awk.html#Printing Expressions with Awk">#Printing Expressions with Awk</a>

<li>
<a href="unix_tools_awk.html#Changing the Output Field Separator (OFS)">#Changing the Output Field Separator (OFS)</a>

<li>
<a href="unix_tools_awk.html#BEGIN &amp; END Rules">#BEGIN &amp; END Rules</a>

<li>
<a href="unix_tools_awk.html#Input Field Separators">#Input Field Separators</a>

</ul>
<p>
Interesting fact...  <em>awk is named after its creators: Al Aho, Peter Weinberger, and Brian Kernighan.</em><br>
</p>

<div id="awk-Format:"><h4 id="Format:" class="header"><a href="#awk-Format:">Format:</a></h4></div>
<pre bash>
awk options 'selection_criteria {action}' input-fie &gt; output-file

# or:

awk [options] 'pattern { action }' input-file(s)
</pre>

<p>
The basic syntax of awk can be summarized as follows:
</p>

<ul>
<li>
awk [options] 'pattern { action }' input-file(s)

<li>
options: Command line options, such as -f to specify a script file, or -F to set a field separator.

<li>
pattern: A pattern that awk looks for in the input data, which, when matched, triggers the action. If omitted, the action applies to all lines.

<li>
action: What awk does when it finds a match to the pattern. Itâ€™s a block of code enclosed in curly braces {}.

<li>
input-file(s): The file or files that awk processes.

</ul>
<div id="awk-Example input file - named &quot;employee.txt&quot;: <br>"><h4 id="Example input file - named &quot;employee.txt&quot;: <br>" class="header"><a href="#awk-Example input file - named &quot;employee.txt&quot;: <br>">Example input file - named "employee.txt": <br></a></h4></div>
<pre bash>
rob manager accounts 45000
jeff clerk sales 25000
mit director purchase 43000
eric developer accounts 23000
david manager accounts 35000
jeff floor sales 29000
stephen admin sales 48000
</pre>

<div id="awk-Print all the contexts of file (above):"><h4 id="Print all the contexts of file (above):" class="header"><a href="#awk-Print all the contexts of file (above):">Print all the contexts of file (above):</a></h4></div>
<pre bash>
awk '{print}' employee.txt
 
# Result:

rob manager accounts 45000
jeff clerk sales 25000
mit director purchase 43000
eric developer accounts 23000
david manager accounts 35000
jeff floor sales 29000
stephen admin sales 48000
</pre>

<div id="awk-Filter with pattern:<br>"><h4 id="Filter with pattern:<br>" class="header"><a href="#awk-Filter with pattern:<br>">Filter with pattern:<br></a></h4></div>
<pre bash>
awk '/manager/ {print}' employee.txt

# Result:

rob manager accounts 45000
david manager accounts 35000
</pre>

<div id="awk-Splitting lines into Fields:<br>"><h4 id="Splitting lines into Fields:<br>" class="header"><a href="#awk-Splitting lines into Fields:<br>">Splitting lines into Fields:<br></a></h4></div>
<p>
Awk delimits using whitespace, and each 'field' is stored in dollar'n' variables. (dollar'0' is the whole line.)
</p>
<pre bash>
$0 - line
$1 - field one
$2 - field two
$3 - field three
</pre>

<div id="awk-Fields examples"><h4 id="Fields examples" class="header"><a href="#awk-Fields examples">Fields examples</a></h4></div>
<pre bash>
awk '{print $1, $4}' employee.txt

# Result:

rob 45000
jeff 25000
mit 43000
eric 23000
david 35000
jeff 29000
stephen 48000
</pre>

<div id="awk-Built-in Variables"><h4 id="Built-in Variables" class="header"><a href="#awk-Built-in Variables">Built-in Variables</a></h4></div>


<table>
<thead>
<tr>
<th>
Variable
</th>
<th>
Contents
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
NR
</td>
<td>
Current count of lines
</td>
</tr>
<tr>
<td>
NF
</td>
<td>
Current count of fields
</td>
</tr>
<tr>
<td>
FS
</td>
<td>
Field Separator (default: whitespace)
</td>
</tr>
<tr>
<td>
RS
</td>
<td>
Line or Record Separator (default: newline)
</td>
</tr>
<tr>
<td>
OFS
</td>
<td>
Output Field Separator (default: whitespace)
</td>
</tr>
<tr>
<td>
ORS
</td>
<td>
Output Record Separator (default: newline)
</td>
</tr>
</tbody>
</table>

<div id="awk-Adding Line (Record) Numbers to Output"><h4 id="Adding Line (Record) Numbers to Output" class="header"><a href="#awk-Adding Line (Record) Numbers to Output">Adding Line (Record) Numbers to Output</a></h4></div>

<pre bash>
awk '{print NR, $0}' employee.txt

# Result

1 rob manager accounts 45000
2 jeff clerk sales 25000
3 mit director purchase 43000
4 eric developer accounts 23000
5 david manager accounts 35000
6 jeff floor sales 29000
7 stephen admin sales 48000
</pre>

<div id="awk-Using NF variable to Display Last Field (NF - current count of fields)"><h4 id="Using NF variable to Display Last Field (NF - current count of fields)" class="header"><a href="#awk-Using NF variable to Display Last Field (NF - current count of fields)">Using NF variable to Display Last Field (NF - current count of fields)</a></h4></div>

<pre bash>
awk '{print $1, $NF}' employee.txt

# Result
rob 45000
jeff 25000
mit 43000
eric 23000
david 35000
jeff 29000
stephen 48000
</pre>


<div id="awk-Using NR variable to Display Lines 3 to 6"><h4 id="Using NR variable to Display Lines 3 to 6" class="header"><a href="#awk-Using NR variable to Display Lines 3 to 6">Using NR variable to Display Lines 3 to 6</a></h4></div>

<pre bash>
awk 'NR==3, NR==6 {print NR, $0}' employee.txt

# Result
3 mit director purchase 43000
4 eric developer accounts 23000
5 david manager accounts 35000
6 jeff floor sales 29000
</pre>


<div id="awk-Adding Custom Separator"><h4 id="Adding Custom Separator" class="header"><a href="#awk-Adding Custom Separator">Adding Custom Separator</a></h4></div>

<pre bash>
awk '{print NR " - " $1}' employee.txt

# Result

1 - rob
2 - jeff
3 - mit
4 - eric
5 - david
6 - jeff
7 - stephen
</pre>

<div id="awk-To Count Number of Lines in a File"><h4 id="To Count Number of Lines in a File" class="header"><a href="#awk-To Count Number of Lines in a File">To Count Number of Lines in a File</a></h4></div>

<pre bash>
awk 'END {print NR}' employee.txt

# Result

7
</pre>

<div id="awk-Print Lines Longer Than 28 Characters Long"><h4 id="Print Lines Longer Than 28 Characters Long" class="header"><a href="#awk-Print Lines Longer Than 28 Characters Long">Print Lines Longer Than 28 Characters Long</a></h4></div>

<pre bash>
awk 'length($0) &gt; 28' employee.txt

# Result

eric developer accounts 23000
david manager accounts 35000
</pre>

<div id="awk-Check If String in Specific Column"><h4 id="Check If String in Specific Column" class="header"><a href="#awk-Check If String in Specific Column">Check If String in Specific Column</a></h4></div>

<pre bash>
awk '{ if($3 == "sales") print $0;}' employee.txt

# Result

jeff clerk sales 25000
jeff floor sales 29000
stephen admin sales 48000
</pre>

<div id="awk-Printing Expressions with Awk"><h4 id="Printing Expressions with Awk" class="header"><a href="#awk-Printing Expressions with Awk">Printing Expressions with Awk</a></h4></div>
<pre bash>
awk 'BEGIN {for(i=1;i&lt;=6;i++) print "Square of", i, "is", i*i;}'

# Result

Square of 1 is 1
Square of 2 is 4
Square of 3 is 9
Square of 4 is 16
Square of 5 is 25
Square of 6 is 36
</pre>

<div id="awk-Changing the Output Field Separator (OFS)"><h4 id="Changing the Output Field Separator (OFS)" class="header"><a href="#awk-Changing the Output Field Separator (OFS)">Changing the Output Field Separator (OFS)</a></h4></div>

<pre bash>
date | awk 'OFS="/" {print $3, $2, $6}'

# Result

7/Sep/2024

date | awk 'OFS="-" {print $3, $2, $6}'

# Result

7-Sep-2024

</pre>

<div id="awk-BEGIN &amp; END Rules"><h4 id="BEGIN &amp; END Rules" class="header"><a href="#awk-BEGIN &amp; END Rules">BEGIN &amp; END Rules</a></h4></div>

<ul>
<li>
A BEGIN rule is executed once before any text processing starts. Executed before awk reads any text.<br>

<li>
An END rule is executed after all processing has completed.<br>

<li>
You can have multiple BEGIN and END rules, and they'll execute in order.<br>

</ul>
<p>
<br>
</p>
<pre bash>
who | awk 'BEGIN {print "Active Sessions"} {print $1,$4}'

# Result

Active Sessions
dave 16:33
mary 10:31
eric 10:37
</pre>

<div id="awk-Input Field Separators"><h4 id="Input Field Separators" class="header"><a href="#awk-Input Field Separators">Input Field Separators</a></h4></div>

<pre bash>
awk -F: '{print $1, $6}' /etc/passwd

# Result

...
_mmaintenanced /var/db/mmaintenanced
_darwindaemon /var/db/darwindaemon
_notification_proxy /var/empty
_avphidbridge /var/empty
_biome /var/db/biome
_backgroundassets /var/empty
_mobilegestalthelper /var/empty
_audiomxd /var/db/audiomxd
_terminusd /var/empty
_neuralengine /var/db/neuralengine
_eligibilityd /var/db/eligibilityd
... 
</pre>

<p>
<a href="unix_tools_index.html">Unix Tools</a>
</p>

<p>
<a href="index.html">index</a>
</p>

</body>
</html>
