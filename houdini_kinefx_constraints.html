<!DOCTYPE html>
<html>
<head>
<link rel="Stylesheet" type="text/css" href="style.css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<title>houdini_kinefx_constraints</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>


<p>
<a href="index.html">index</a>
</p>

<p>
<a href="Houdini.html">Houdini</a>
</p>

<div id="KineFX - Constraints"><h1 id="KineFX - Constraints" class="header"><a href="#KineFX - Constraints">KineFX - Constraints</a></h1></div>

<div id="Contents" class="toc"><h1 id="Contents" class="header"><a href="#Contents">Contents</a></h1></div>
<ul>
<li>
<a href="houdini_kinefx_constraints.html#KineFX - Constraints">#KineFX - Constraints</a>

<li>
<a href="houdini_kinefx_constraints.html#Part I">#Part I</a>

<ul>
<li>
<a href="houdini_kinefx_constraints.html#https://youtu.be/QGpOZP0dAJo?si=biGTCvCWGHh3YXEP">YouTube - Introduction to Houdini KineFX Constraints - part I</a>

</ul>
<li>
<a href="houdini_kinefx_constraints.html#Scene Setup">#Scene Setup</a>

<ul>
<li>
<a href="houdini_kinefx_constraints.html#https://www.youtube.com/watch?v=QGpOZP0dAJo&amp;t=65s">YouTube - Scene Setup</a>

</ul>
<li>
<a href="houdini_kinefx_constraints.html#Create Better Target Controls">#Create Better Target Controls</a>

<ul>
<li>
<a href="houdini_kinefx_constraints.html#Diagram - Initial Setup">#Diagram - Initial Setup</a>

</ul>
<li>
<a href="houdini_kinefx_constraints.html#Transforms">#Transforms</a>

<ul>
<li>
<a href="houdini_kinefx_constraints.html#https://www.youtube.com/watch?v=QGpOZP0dAJo&amp;t=397s">YouTube - Transforms</a>

</ul>
<li>
<a href="houdini_kinefx_constraints.html#Constraining An Object To A Target Point">#Constraining An Object To A Target Point</a>

<ul>
<li>
<a href="houdini_kinefx_constraints.html#Global Transforms">#Global Transforms</a>

<ul>
<li>
<a href="houdini_kinefx_constraints.html#Diagram - Global Transforms">#Diagram - Global Transforms</a>

</ul>
<li>
<a href="houdini_kinefx_constraints.html#Local Transforms">#Local Transforms</a>

</ul>
<li>
<a href="houdini_kinefx_constraints.html#Scale Inheritance">#Scale Inheritance</a>

<ul>
<li>
<a href="houdini_kinefx_constraints.html#houdini_kinefx_scaleinheritance_options">Link: Scale Inheritance.</a>

</ul>
<li>
<a href="houdini_kinefx_constraints.html#Implementing the Scale Inheritance Modes">#Implementing the Scale Inheritance Modes</a>

<li>
<a href="houdini_kinefx_constraints.html#To set the Scale Inheritance mode">#To set the Scale Inheritance mode</a>

<ul>
<li>
<a href="houdini_kinefx_constraints.html#Diagram - Local Transform with Scale Inheritance Modes Available">#Diagram - Local Transform with Scale Inheritance Modes Available</a>

<li>
<a href="houdini_kinefx_constraints.html#Diagram - Using 'Effective Local Xforms' output to use local space (with Scale Inheritance modes available)">#Diagram - Using 'Effective Local Xforms' output to use local space (with Scale Inheritance modes available)</a>

</ul>
<li>
<a href="houdini_kinefx_constraints.html#Offset Transform">#Offset Transform</a>

<ul>
<li>
<a href="houdini_kinefx_constraints.html#https://www.youtube.com/watch?v=QGpOZP0dAJo&amp;t=983s">YouTube - Offset Transforms</a>

<li>
<a href="houdini_kinefx_constraints.html#Diagram - Offset Transform - Rig Attribute VOP nodes">#Diagram - Offset Transform - Rig Attribute VOP nodes</a>

</ul>
<li>
<a href="houdini_kinefx_constraints.html#Pre-Mulitply vs Post-Multiply">#Pre-Mulitply vs Post-Multiply</a>

<li>
<a href="houdini_kinefx_constraints.html#Blend Transform">#Blend Transform</a>

<ul>
<li>
<a href="houdini_kinefx_constraints.html#https://www.youtube.com/watch?v=QGpOZP0dAJo&amp;t=1107s">YouTube - Blend Transform</a>

<li>
<a href="houdini_kinefx_constraints.html#Diagram - Network for 'Blend Transform' constraint">#Diagram - Network for 'Blend Transform' constraint</a>

<li>
<a href="houdini_kinefx_constraints.html#Diagram - Blend Transform inside the 'Rig Attribute VOP'">#Diagram - Blend Transform inside the 'Rig Attribute VOP'</a>

</ul>
<li>
<a href="houdini_kinefx_constraints.html#Parent Constraint">#Parent Constraint</a>

<ul>
<li>
<a href="houdini_kinefx_constraints.html#https://www.youtube.com/watch?v=QGpOZP0dAJo&amp;t=1272s">YouTube - Parent Constraint</a>

<li>
<a href="houdini_kinefx_constraints.html#Diagram - Parent Constraint (same as original setup)">#Diagram - Parent Constraint (same as original setup)</a>

<li>
<a href="houdini_kinefx_constraints.html#Diagram - Parent Constraint setup inside Rig Attribute VOP">#Diagram - Parent Constraint setup inside Rig Attribute VOP</a>

</ul>
<li>
<a href="houdini_kinefx_constraints.html#Re-Parent Constraint">#Re-Parent Constraint</a>

<ul>
<li>
<a href="houdini_kinefx_constraints.html#https://www.youtube.com/watch?v=QGpOZP0dAJo&amp;t=1434s">YouTube - Re-Parent Constraint</a>

<li>
<a href="houdini_kinefx_constraints.html#Diagram - Re-parent Constraint">#Diagram - Re-parent Constraint</a>

<li>
<a href="houdini_kinefx_constraints.html#Diagram - Re-Parent Constraint inside the Rig Attribute VOP">#Diagram - Re-Parent Constraint inside the Rig Attribute VOP</a>

</ul>
<li>
<a href="houdini_kinefx_constraints.html#Part II">#Part II</a>

<ul>
<li>
<a href="houdini_kinefx_constraints.html#https://youtu.be/hpigyuZv784?si=Y0yDegj4W-isQh-y">YouTube - Introduction to Houdini KineFX Constraints - part II</a>

</ul>
<li>
<a href="houdini_kinefx_constraints.html#Introduction">#Introduction</a>

<ul>
<li>
<a href="houdini_kinefx_constraints.html#https://www.youtube.com/watch?v=hpigyuZv784&amp;t=0s">YouTube - Introduction</a>

</ul>
<li>
<a href="houdini_kinefx_constraints.html#Look At Constraint">#Look At Constraint</a>

<ul>
<li>
<a href="houdini_kinefx_constraints.html#https://www.youtube.com/watch?v=hpigyuZv784&amp;t=22s">YouTube - Look At constraint</a>

</ul>
<li>
<a href="houdini_kinefx_constraints.html#Alternate Up-Vector">#Alternate Up-Vector</a>

<li>
<a href="houdini_kinefx_constraints.html#An Aside">#An Aside</a>

<li>
<a href="houdini_kinefx_constraints.html#Look At constraint with blend and offset">#Look At constraint with blend and offset</a>

<ul>
<li>
<a href="houdini_kinefx_constraints.html#https://www.youtube.com/watch?v=hpigyuZv784&amp;t=327s">YouTube - Look At constraint with blend and offset</a>

</ul>
<li>
<a href="houdini_kinefx_constraints.html#Path constraint">#Path constraint</a>

<ul>
<li>
<a href="houdini_kinefx_constraints.html#https://www.youtube.com/watch?v=hpigyuZv784&amp;t=481s">YouTube - Path constraint</a>

<li>
<a href="houdini_kinefx_constraints.html#Diagram - Path Constraint setup (at obj/geom level)">#Diagram - Path Constraint setup (at obj/geom level)</a>

<li>
<a href="houdini_kinefx_constraints.html#Diagram - Path Constraint - Rig Attribute VOP (constraints)">#Diagram - Path Constraint - Rig Attribute VOP (constraints)</a>

</ul>
<li>
<a href="houdini_kinefx_constraints.html#Path constraint with custom look at vector">#Path constraint with custom look at vector</a>

<ul>
<li>
<a href="houdini_kinefx_constraints.html#https://www.youtube.com/watch?v=hpigyuZv784&amp;t=672s">YouTube - Path constraint with custom look at vector</a>

<li>
<a href="houdini_kinefx_constraints.html#Diagram - Path Constraint with Look At (obj/geometry level)">#Diagram - Path Constraint with Look At (obj/geometry level)</a>

</ul>
<li>
<a href="houdini_kinefx_constraints.html#Path constraint with roll">#Path constraint with roll</a>

<ul>
<li>
<a href="houdini_kinefx_constraints.html#https://www.youtube.com/watch?v=hpigyuZv784&amp;t=867s">YouTube - Path constraint with roll</a>

</ul>
<li>
<a href="houdini_kinefx_constraints.html#Primitive on surface constraint">#Primitive on surface constraint</a>

<ul>
<li>
<a href="houdini_kinefx_constraints.html#https://www.youtube.com/watch?v=hpigyuZv784&amp;t=1228s">YouTube - Primitive on surface constraint</a>

</ul>
<li>
<a href="houdini_kinefx_constraints.html#Closest primitive on surface constraint">#Closest primitive on surface constraint</a>

<ul>
<li>
<a href="houdini_kinefx_constraints.html#https://www.youtube.com/watch?v=hpigyuZv784&amp;t=1455s">YouTube - Closest primitive on surface constraint</a>

</ul>
</ul>
<div id="Part I"><h1 id="Part I" class="header"><a href="#Part I">Part I</a></h1></div>
<div id="Part I-[[https://youtu.be/QGpOZP0dAJo?si=biGTCvCWGHh3YXEP|YouTube - Introduction to Houdini KineFX Constraints - part I]]"><h4 id="[[https://youtu.be/QGpOZP0dAJo?si=biGTCvCWGHh3YXEP|YouTube - Introduction to Houdini KineFX Constraints - part I]]" class="header"><a href="#Part I-[[https://youtu.be/QGpOZP0dAJo?si=biGTCvCWGHh3YXEP|YouTube - Introduction to Houdini KineFX Constraints - part I]]"><a href="https://youtu.be/QGpOZP0dAJo?si=biGTCvCWGHh3YXEP">YouTube - Introduction to Houdini KineFX Constraints - part I</a></a></h4></div>

<p>
This tutorial was about how to set up KineFX networks for constraints in Houdini.
</p>

<p>
All constraints are a mix of one or more of the following:
</p>
<ul>
<li>
Position

<li>
Rotation

<li>
Scale

</ul>
<div id="Part I-Scene Setup"><h2 id="Scene Setup" class="header"><a href="#Part I-Scene Setup">Scene Setup</a></h2></div>
<div id="Part I-Scene Setup-[[https://www.youtube.com/watch?v=QGpOZP0dAJo&amp;t=65s|YouTube - Scene Setup]]"><h4 id="[[https://www.youtube.com/watch?v=QGpOZP0dAJo&amp;t=65s|YouTube - Scene Setup]]" class="header"><a href="#Part I-Scene Setup-[[https://www.youtube.com/watch?v=QGpOZP0dAJo&amp;t=65s|YouTube - Scene Setup]]"><a href="https://www.youtube.com/watch?v=QGpOZP0dAJo&amp;t=65s">YouTube - Scene Setup</a></a></h4></div>

<ul>
<li>
Inside a <code>Geometry</code> node in SOPs:

<ul>
<li>
Add a <code>Rubber Toy</code> node

<li>
Add a freestanding (not connected) point, using an <code>Add</code> node.

<ul>
<li>
<code>Number of Points</code> to 1

<li>
Check on and leave values at 0,0,0

</ul>
<li>
Add a <code>Color</code> node:

<ul>
<li>
This is required as the capture object turns black without it!

<li>
Leave as default 'white'.

</ul>
<li>
Add a <code>Name</code> node:

<ul>
<li>
<code>Class</code> to point

<li>
<code>Group</code> to 0

<li>
<code>Name</code> to <code>object</code>

</ul>
<li>
We need to introduce 'KineFX Transform Attributes', and the easiest way to add these is with the    <code>Rig Doctor</code> node:

<ul>
<li>
Check 'on' <code>Initialize Transforms</code>

</ul>
<li>
End with a <code>Null</code> node:

<ul>
<li>
Rename to <code>REST_OBJECT_SKELETON</code>

</ul>
</ul>
</ul>
<p>
To capture the Rubber Toy:
</p>
<ul>
<li>
Drop a <code>Capture Packed Geometry</code>:

<ul>
<li>
<code>rubbertoy</code> to input 1

<li>
<code>REST_OBJECT_SKELETON</code> into input 2

<li>
<code>Pack Input</code> to 'on'

<li>
<code>Manual Capture</code> to 1 (<code>+</code>)

<ul>
<li>
<code>Capture Geo</code> to <code>*</code>

<li>
<code>Joint</code> to <code>object</code> (the point)

</ul>
</ul>
</ul>
<p>
To make the bone deformation work:
</p>
<ul>
<li>
Add a <code>Bone Deform</code> node:

<ul>
<li>
Input 1 takes the <code>Capture Packed Geometry</code> node

<li>
Input 2 takes the <code>REST_OBJECT_SKELETON</code>

<li>
Input 3:

<ul>
<li>
Add a <code>Rig Pose</code> node between the <code>REST_OBJECT_SKELETON</code> and the input 3
<table>
<tr>
<td>
Whenever we have a 'Rig Pose' node, feel free to activate its Template flag (and shift-click the template on multiple 'Rig Pose' nodes to see them simultaneously).
</td>
</tr>
</table>

</ul>
</ul>
</ul>
<p>
At this stage, moving the point at the <code>Rig Pose</code> node (selected, but with the <code>Bone Deform</code> holding the Display Flags), you should be able to see the point moving the <code>Rubber Toy</code> as a captured object.
</p>

<p>
Once you've tried the <code>Rig Pose</code> node to move the initial point (essentially the 'bone' in this setup), you can exchange it for a <code>Rig Attribute VOP</code>, within which we'll be setting constraints.
Rename the <code>Rig Attribute VOP</code> to <code>constraints</code>.
</p>

<p>
Add a freestanding <code>Add</code> node:
</p>
<ul>
<li>
Add a point at 0,0,0

</ul>
<li>
Add a <code>Name</code> node:

<ul>
<li>
Set <code>Class</code> to <code>Point</code>

<li>
<code>Group</code> to 0

<li>
<code>Name</code> to <code>target</code>

</ul>
<li>
Add a <code>Rig Doctor</code> node:

<ul>
<li>
Check 'on' <code>Initialize Transforms</code>

</ul>
<li>
Add a <code>Null</code>:

<ul>
<li>
Rename to <code>REST_TARGET_SKELETON</code>

</ul>
<li>
Add a <code>Rig Pose</code> node:

<ul>
<li>
Rename to <code>rigpose_target</code>

</ul>
<div id="Part I-Create Better Target Controls"><h2 id="Create Better Target Controls" class="header"><a href="#Part I-Create Better Target Controls">Create Better Target Controls</a></h2></div>

<ul>
<li>
Add a freestanding <code>Sphere</code> node:

<ul>
<li>
<code>Uniform Scale</code> to 0.1

</ul>
<li>
Add a <code>Color</code> node:

<ul>
<li>
Set color to red

</ul>
<li>
Add a <code>Name</code> node:

<ul>
<li>
<code>Name</code> to <code>sphere_red_ctrl</code>

</ul>
<li>
Add a <code>Null</code>:

<ul>
<li>
Rename to <code>CONTROL</code>

</ul>
</ul>
<p>
Between the <code>REST_TARGET_SKELETON</code> and the <code>rigpose_target</code>:
</p>
<ul>
<li>
Add an <code>Attach Control Geometry</code> node:

<ul>
<li>
Plug the <code>CONTROL</code> into input 2

<li>
<code>Assign Shapes</code> to 1 (<code>+</code>)

<ul>
<li>
<code>Group</code> to <code>@name=target</code>

<li>
<code>Control Name</code> to <code>sphere_red_ctrl</code>

</ul>
</ul>
</ul>
<p>
Now we can modify the positions by selecting and moving the sphere control object.
</p>

<ul>
<li>
Template the <code>rigpose_target</code> node

<li>
Set the Display Flag on the <code>Bone Deform</code>

</ul>
<p>
Move up to the Obj level and rename the Geometry node to <code>base_setup</code>
</p>

<div id="Part I-Create Better Target Controls-Diagram - Initial Setup"><h4 id="Diagram - Initial Setup" class="header"><a href="#Part I-Create Better Target Controls-Diagram - Initial Setup">Diagram - Initial Setup</a></h4></div>

<pre>
                                ┌────┐                ┌─────┐            ┌────────┐
                                │add │                │ add │            │ sphere │
                                └─┬──┘                └──┬──┘            └─────┬──┘
 ┌──────────────────────┐         │                      │                     │
 │testgeometry_rubbertoy│      ┌──┴────┐                 │                     │
 └────┬─────────────────┘      │ color │                 │                     │
      │                        └──┬────┘              ┌──┴───┐            ┌────┴──┐
      │                           │                   │ name │            │ color │
      │                        ┌──┴───┐               └──┬───┘            └────┬──┘
      │                        │ name │                  │                     │
      │                        └──┬───┘                  │                     │
      │                           │                      │                     │
      │                      ┌────┴──────┐          ┌────┴──────┐         ┌────┴─┐
      │                      │ rigdoctor │          │ rigdoctor │         │ name │
      │                      └────┬──────┘          └────┬──────┘         └────┬─┘
      │                           │                      │                     │
      │                  ┌────────┴─────────────┐ ┌──────┴─────────────┐  ┌────┴────┐
      │                  │       null           │ │       null         │  │  null   │
      │                  │ REST_OBJECT_SKELETON │ │REST_TARGET_SKELETON│  │ CONTROL │
      │                  └──────┬─┬─┬───────────┘ └──────┬─────────────┘  └────┬────┘
      │      ┌──────────────────┘ │ │                    │     ┌───────────────┘
      │      │                    │ └─────────┐          │     │
┌─────┴──────┴──────┐             │           │    ┌─────┴─────┴──────┐
│ capturecontrolgeo │             │           │    │ attachcontrolgeo │
└─────────┬─────────┘             │           │    └─────┬────────────┘
          │                       │           │          │
          │                       │           │   ┌──────┴─────────┐
          │                       │           │   │     rigpose    │
          │                       │           │   │ rigpose_target │
          │                       │           │   └──────┬─────────┘
          │                       │           │          │
          │                       │        ┌──┴──────────┴─────┐
          │                       │        │ Rig Attribute VOP │
          │                       │        │   constraints     │
          │                       │        └─────────┬─────────┘
          │                       │                  │
          └────────────────────┐  │  ┌───────────────┘
                               │  │  │
                           ┌───┴──┴──┴──┐
                           │ bonedeform │
                           └────────────┘
</pre>

<div id="Transforms"><h1 id="Transforms" class="header"><a href="#Transforms">Transforms</a></h1></div>
<div id="Transforms-[[https://www.youtube.com/watch?v=QGpOZP0dAJo&amp;t=397s|YouTube - Transforms]]"><h4 id="[[https://www.youtube.com/watch?v=QGpOZP0dAJo&amp;t=397s|YouTube - Transforms]]" class="header"><a href="#Transforms-[[https://www.youtube.com/watch?v=QGpOZP0dAJo&amp;t=397s|YouTube - Transforms]]"><a href="https://www.youtube.com/watch?v=QGpOZP0dAJo&amp;t=397s">YouTube - Transforms</a></a></h4></div>

<p>
The tutorial duplicates the <code>basic_setup</code> node, and renames it <code>transforms</code>
</p>

<p>
The heart of the lessons is the <code>Rig Attribute VOP</code> node which we called <code>constraints</code>.
</p>

<div id="Transforms-Constraining An Object To A Target Point"><h2 id="Constraining An Object To A Target Point" class="header"><a href="#Transforms-Constraining An Object To A Target Point">Constraining An Object To A Target Point</a></h2></div>

<p>
The purpose of this setup will be to constrain the object to the target point.
</p>

<div id="Transforms-Constraining An Object To A Target Point-Global Transforms"><h3 id="Global Transforms" class="header"><a href="#Transforms-Constraining An Object To A Target Point-Global Transforms">Global Transforms</a></h3></div>

<p>
Jump inside the <code>constraints</code> node (the <code>Rig Attribute VOP</code>):
</p>
<ul>
<li>
Drop a <code>Get Point Transform</code> node:

<ul>
<li>
Rename to <code>object</code>

<li>
<code>Signature</code> to <code>ByName</code>:

<ul>
<li>
<em>NOTE: The default is '$OS' which would work in this case as that's the variable for the node's name.</em>

</ul>
<li>
<code>File</code> to <code>First Input</code>

<li>
<code>Point Name</code> to <code>object</code>

</ul>
<li>
Drop a second <code>Get Point Transform</code> node:

<ul>
<li>
Rename to <code>target</code>

<li>
<code>Signature</code> to <code>ByName</code>

<li>
<code>File</code> to <code>Second Input</code>

<li>
<code>Point Name</code> to <code>target</code>

</ul>
<li>
Add a <code>Set Point Transform</code>: 

<li>
<code>Signature</code> to <code>By Point Number</code>

<li>
<code>Point Name</code> will be driven by in input:

<ul>
<li>
Plug the <code>ptnum</code> output of the <code>object</code> node into the <code>pt</code> input

<li>
Plug the <code>xform</code> output of the <code>target</code> node into the <code>xform</code> input.

</ul>
</ul>
<p>
Now, jumping back to the <code>rigpose_target</code> node, (Display Flag still  on the <code>Bone Deform</code> node), moving the <code>target</code> sphere control will result in the <code>Rubber Toy</code> following along.
</p>
<ul>
<li>
Translate

<li>
Rotate

<li>
Scale

</ul>
<p>
All the transforms have been constrained.
</p>

<p>
Notice that the xforms are the Global xforms (there are slots for <code>localxform</code> also).
</p>

<div id="Transforms-Constraining An Object To A Target Point-Global Transforms-Diagram - Global Transforms"><h4 id="Diagram - Global Transforms" class="header"><a href="#Transforms-Constraining An Object To A Target Point-Global Transforms-Diagram - Global Transforms">Diagram - Global Transforms</a></h4></div>

<p>
Inside the <code>Rig Attribute VOP</code> (<code>constraints</code>):
</p>
<pre>

Signature: By Name
File: First Input
Point Name: object
 ┌─────────────────────┐
 │        object       │
 │ Get Point Transform │                  ┌──────────────────────┐
 │                     │                  │  setpointtransform1  │
 │               ptnum ├─────────┐        │ Set Point Transform  │
 │                     │         │        │                      │
 │                     │         └────────┤ pt                   │
 └─────────────────────┘                  │                      │
                                 ┌────────┤ xform                │
 ┌─────────────────────┐         │        │                      │
 │        target       │         │        │ localxform           │
 │ Get Point Transform │         │        │                      │
 │                     │         │        │ active               │
 │                     │         │        └──────────────────────┘
 │               xform ├─────────┘
 │                     │
 └─────────────────────┘
 Signature: By Name
 File: Second Input
 Point Name: '$OS'
 
</pre>

<div id="Transforms-Constraining An Object To A Target Point-Local Transforms"><h3 id="Local Transforms" class="header"><a href="#Transforms-Constraining An Object To A Target Point-Local Transforms">Local Transforms</a></h3></div>

<p>
Duplicate the <code>tranforms</code> geometry node - we'll make another to illustrate the local transforms.
</p>
<ul>
<li>
Rename to <code>local_transforms</code> 

</ul>
<p>
In principle, we need some kind of parent/child example to illustrate this constraint.
</p>

<p>
To do this, we'll add <em>another</em> target point.
</p>

<ul>
<li>
Jump inside the <code>local_transforms</code> Geometry node copy:

<ul>
<li>
On the <code>Add</code> node for the <code>target</code> branch:

<ul>
<li>
Add another point (<code>+</code>)

<li>
Set its location to <code>0, -1, 0</code>

</ul>
<li>
On the <code>Name</code> node:

<ul>
<li>
Rename the fields with:

<ul>
<li>
<code>Group</code> to <code>1</code>

<li>
<code>Name</code> to <code>target_parent</code>

<li>
<code>Group</code> to <code>0</code>

<li>
<code>Name</code> to <code>target</code>

</ul>
</ul>
<li>
After the existing <code>Name</code> node:

<ul>
<li>
Add a <code>Parent Joints</code> node (used to be called 'Reparent Joints'):

<ul>
<li>
Click the <code>+</code> button to add:

<ul>
<li>
<code>Joint1</code> to <code>@name=target</code>

<li>
<code>Parent1</code> to <code>@name=target_parent</code>

<li>
These can be selected rather than typed if you use the picker tool (provided that the node is piped into the stream).

</ul>
</ul>
</ul>
</ul>
<li>
Select the <code>rigpose_target</code> node to select and transform the <code>target_parent</code> point.

<li>
Jump into the <code>constraints</code> VOP network node:

<ul>
<li>
Change the output from the <code>target</code> (Get Point Transform) node:

<ul>
<li>
<code>localxform</code> to the <code>setpointtransform1</code> <code>xform</code> input.

</ul>
<li>
The <code>Rubber Toy</code> will snap up to 1 unit above its original position.

<ul>
<li>
This is because the <code>target</code> is 1 unit above its parent, <code>target_parent</code>.

</ul>
</ul>
</ul>
<p>
The constraint is now relative to the local space of the <code>target</code> which although has move through World Space, has not moved in local space. You can move the <code>target_parent</code> as much as you like, the <code>target</code> is still in the same position in its local space. Move the <code>target</code> independently of the <code>target_parent</code> and the <code>Rubber Toy</code> will move relative to the transform within the <code>target</code> local space.
</p>

<p>
Basically, the <code>Rubber Toy</code> is not visually attached to the <code>target</code>, it moves in its own local space equally to the <code>target</code> node's local space.
</p>

<div id="Scale Inheritance"><h1 id="Scale Inheritance" class="header"><a href="#Scale Inheritance">Scale Inheritance</a></h1></div>

<p>
At this stage, the tutorial takes a sidestep to discuss <code>Scale Inheritance</code> modes in KineFX. This is quite an extensive subject, and of limited impact on the greater overview, so I put a load of stuff from a discussion with Copilot on a separate page:
</p>
<div id="Scale Inheritance-[[houdini_kinefx_scaleinheritance_options|Link: Scale Inheritance]]."><h4 id="[[houdini_kinefx_scaleinheritance_options|Link: Scale Inheritance]]." class="header"><a href="#Scale Inheritance-[[houdini_kinefx_scaleinheritance_options|Link: Scale Inheritance]]."><a href="houdini_kinefx_scaleinheritance_options.html">Link: Scale Inheritance</a>.</a></h4></div>

<div id="Scale Inheritance-Implementing the Scale Inheritance Modes"><h2 id="Implementing the Scale Inheritance Modes" class="header"><a href="#Scale Inheritance-Implementing the Scale Inheritance Modes">Implementing the Scale Inheritance Modes</a></h2></div>

<p>
To use the different modes in a rig setup, the tutorial shows the steps to implement them.
</p>

<p>
Inside the <code>constraints</code> node (<code>Rig Attribute VOP</code>), we previously connected the <code>localxform</code> from the target to the <code>setpointtransform</code> node's <code>xform</code> input.
</p>
<ul>
<li>
To take advantage of the <code>Scale Inheritance</code> we use the <code>efflocalxform</code> output from the <code>target</code>:

<ul>
<li>
This is the <code>effective local xform</code>

<li>
It used the mode as set.

</ul>
</ul>
<div id="Scale Inheritance-To set the Scale Inheritance mode"><h2 id="To set the Scale Inheritance mode" class="header"><a href="#Scale Inheritance-To set the Scale Inheritance mode">To set the Scale Inheritance mode</a></h2></div>

<p>
To set the Scale Inheritance mode (which otherwise defaults to... <code>Default</code> mode):
</p>
<ul>
<li>
drop an <code>Attribute Wrangle</code> node after the <code>Rig Doctor</code> node:

<ul>
<li>
Add the following VEXpression:

<ul>
<li>
<code>i@scaleinheritance = chi('scale_inheritance');</code>

<li>
Then click on the little 'make slider' icon to its right

<li>
You'll now have a <code>Scale Inheritance</code> integer slider, where the values set:

<ul>
<li>
0 = <code>Default</code>

<li>
1 = <code>OffsetOnly</code>

<li>
2 = <code>OffsetAndScale</code>

<li>
3 = <code>ScaleOnly</code>

<li>
4 = <code>Ignore</code>

</ul>
</ul>
</ul>
</ul>
  
<div id="Scale Inheritance-To set the Scale Inheritance mode-Diagram - Local Transform with Scale Inheritance Modes Available"><h4 id="Diagram - Local Transform with Scale Inheritance Modes Available" class="header"><a href="#Scale Inheritance-To set the Scale Inheritance mode-Diagram - Local Transform with Scale Inheritance Modes Available">Diagram - Local Transform with Scale Inheritance Modes Available</a></h4></div>

<p>
Inside the <code>Geometry</code> node (<code>local_transforms</code>):
</p>
<pre>
                                 ┌────┐                ┌─────┐            ┌────────┐
                                 │add │                │ add │            │ sphere │
                                 └─┬──┘                └──┬──┘            └─────┬──┘
                                   │                      │                     │
                                ┌──┴────┐              ┌──┴───┐                 │
                                │ color │              │ name │                 │
                                └──┬────┘              └──┬───┘            ┌────┴──┐
                                   │                      │                │ color │
  ┌──────────────────────┐      ┌──┴───┐                  │                └────┬──┘
  │testgeometry_rubbertoy│      │ name │            ┌─────┴───────┐             │
  └────┬─────────────────┘      └──┬───┘            │parentjoints │        ┌────┴─┐
       │                           │                └─────┬───────┘        │ name │
       │                           │                      │                └────┬─┘
       │                           │                ┌─────┴─────────┐           │
       │                           │                │ attribwrangle │  ◄────────┼───  i@scaleinheritance=chi('scale_inheritance');
       │                           │                └─────┬─────────┘           │
       │                           │                      │                     │
       │                      ┌────┴──────┐          ┌────┴──────┐              │       The 'Attribute Wrangle' node is settin
       │                      │ rigdoctor │          │ rigdoctor │              │        the 'Scale Inheritance' mode.
       │                      └────┬──────┘          └────┬──────┘              │                   * 0 = `Default`
       │                           │                      │                     │                   * 1 = `OffsetOnly`
       │                  ┌────────┴─────────────┐ ┌──────┴─────────────┐  ┌────┴────┐              * 2 = `OffsetAndScale`
       │                  │       null           │ │       null         │  │  null   │              * 3 = `ScaleOnly`
       │                  │ REST_OBJECT_SKELETON │ │REST_TARGET_SKELETON│  │ CONTROL │              * 4 = `Ignore`
       │                  └──────┬─┬─┬───────────┘ └──────┬─────────────┘  └────┬────┘
       │      ┌──────────────────┘ │ │                    │     ┌───────────────┘       And the 'efflocalxform' output in the
       │      │                    │ └─────────┐          │     │                       'constraints' (Rig Attribute VOP) node is
 ┌─────┴──────┴──────┐             │           │    ┌─────┴─────┴──────┐                enabling it's use.
 │ capturecontrolgeo │             │           │    │ attachcontrolgeo │
 └─────────┬─────────┘             │           │    └─────┬────────────┘
           │                       │           │          │
           │                       │           │   ┌──────┴─────────┐
           │                       │           │   │     rigpose    │
           │                       │           │   │ rigpose_target │
           │                       │           │   └──────┬─────────┘
           │                       │           │          │
           │                       │        ┌──┴──────────┴─────┐
           │                       │        │ Rig Attribute VOP │
           │                       │        │   constraints     │
           │                       │        └─────────┬─────────┘
           │                       │                  │
           └────────────────────┐  │  ┌───────────────┘
                                │  │  │
                            ┌───┴──┴──┴──┐
                            │ bonedeform │
                            └────────────┘
</pre>

<div id="Scale Inheritance-To set the Scale Inheritance mode-Diagram - Using 'Effective Local Xforms' output to use local space (with Scale Inheritance modes available)"><h4 id="Diagram - Using 'Effective Local Xforms' output to use local space (with Scale Inheritance modes available)" class="header"><a href="#Scale Inheritance-To set the Scale Inheritance mode-Diagram - Using 'Effective Local Xforms' output to use local space (with Scale Inheritance modes available)">Diagram - Using 'Effective Local Xforms' output to use local space (with Scale Inheritance modes available)</a></h4></div>

<p>
Inside the <code>Rig Attribute VOP</code> (<code>constraints</code>):
</p>

<pre>
  Signature: By Name                                                 
  File: First Input                                                  
  Point Name: object                                                 
   ┌─────────────────────┐                                           
   │        object       │                                           
   │ Get Point Transform │                  ┌──────────────────────┐ 
   │                     │                  │  setpointtransform1  │ 
   │               ptnum ├─────────┐        │ Set Point Transform  │ 
   │                     │         │        │                      │ 
   │                     │         └────────┤ pt                   │ 
   └─────────────────────┘                  │                      │ 
                                   ┌────────┤ xform                │ 
   ┌─────────────────────┐         │        │                      │ 
   │        target       │         │        │ localxform           │ 
   │ Get Point Transform │         │        │                      │ 
   │                     │         │        │ active               │ 
   │               xform │         │        └──────────────────────┘ 
   │                     │         │                                 
   │       efflocalxform ├─────────┘                                 
   └─────────────────────┘                                           
   Signature: By Name                                                
   File: Second Input                                                
   Point Name: '$OS'                                                 
</pre>

<div id="Offset Transform"><h1 id="Offset Transform" class="header"><a href="#Offset Transform">Offset Transform</a></h1></div>
<div id="Offset Transform-[[https://www.youtube.com/watch?v=QGpOZP0dAJo&amp;t=983s|YouTube - Offset Transforms]]"><h4 id="[[https://www.youtube.com/watch?v=QGpOZP0dAJo&amp;t=983s|YouTube - Offset Transforms]]" class="header"><a href="#Offset Transform-[[https://www.youtube.com/watch?v=QGpOZP0dAJo&amp;t=983s|YouTube - Offset Transforms]]"><a href="https://www.youtube.com/watch?v=QGpOZP0dAJo&amp;t=983s">YouTube - Offset Transforms</a></a></h4></div>

<p>
For this part of the tutorial, the original <code>transforms</code> Geometry node was duplicated to for the basis of this <code>Offset Transform</code> example.
</p>

<p>
<span id="Offset Transform-[[https://www.youtube.com/watch?v=QGpOZP0dAJo&amp;t=983s|YouTube - Offset Transforms]]-<em>(We don't need the extra Geometry level setup as seen on the previous example - jump back to the simpler version for regular transforms.)</em>"></span><strong id="<em>(We don't need the extra Geometry level setup as seen on the previous example - jump back to the simpler version for regular transforms.)</em>"><em>(We don't need the extra Geometry level setup as seen on the previous example - jump back to the simpler version for regular transforms.)</em></strong>
</p>

<p>
Inside the Geometry network:
</p>
<ul>
<li>
Inside the <code>constraints</code> (<code>Rig Attribute VOP</code>):

<ul>
<li>
Drop an <code>Offset Transfrom</code> node:

<ul>
<li>
Connect this node between the <code>target</code> and the <code>setpointtransform</code> node:

<ul>
<li>
From <code>xform</code> output to <code>xform</code> input

<li>
From <code>outxform</code> to <code>xform</code> input

</ul>
</ul>
</ul>
</ul>
  
<div id="Offset Transform-Diagram - Offset Transform - Rig Attribute VOP nodes"><h4 id="Diagram - Offset Transform - Rig Attribute VOP nodes" class="header"><a href="#Offset Transform-Diagram - Offset Transform - Rig Attribute VOP nodes">Diagram - Offset Transform - Rig Attribute VOP nodes</a></h4></div>

<pre>
 Signature: By Name
 File: First Input
 Point Name: object
  ┌─────────────────────┐
  │        object       │
  │ Get Point Transform │                                        ┌──────────────────────┐
  │                     │                                        │  setpointtransform1  │
  │               ptnum ├───────────────────────────────┐        │ Set Point Transform  │
  │                     │                               │        │                      │
  │                     │                               └────────┤ pt                   │
  └─────────────────────┘                                        │                      │
                                                        ┌────────┤ xform                │
                                                        │        │                      │
                                                        │        │ localxform           │
                                                        │        │                      │
  ┌─────────────────────┐        ┌───────────────────┐  │        │ active               │
  │        target       │        │                   │  │        └──────────────────────┘
  │ Get Point Transform │        │  offsettransform  │  │
  │                     │        │                   │  │
  │               xform │        │                   │  │
  │                     │        │                   │  │
  │       efflocalxform ├────────┤  xform  outxform  ├──┘
  └─────────────────────┘        └───────────────────┘
  Signature: By Name
  File: Second Input
  Point Name: '$OS'
</pre>

<p>
Using the parameters of the <code>Offset Transform</code> node (inside the <code>Rig Attribute VOP</code>) we can 'offset' the child object using it's own transforms (Translate, Rotate &amp; Scale).
</p>

<div id="Offset Transform-Pre-Mulitply vs Post-Multiply"><h3 id="Pre-Mulitply vs Post-Multiply" class="header"><a href="#Offset Transform-Pre-Mulitply vs Post-Multiply">Pre-Mulitply vs Post-Multiply</a></h3></div>

<p>
By default, the <code>Offset Transform</code> node inside the <code>Rig Attribute VOP</code> is set to <code>Pre-Multiply</code>. You can also switch to <code>Post-Multiply</code>.
</p>

<ul>
<li>
<code>Pre-Multiply</code> - apply transforms in local space

<li>
<code>Post-Multiply</code> - apply transforms in parent space

</ul>
<div id="Blend Transform"><h1 id="Blend Transform" class="header"><a href="#Blend Transform">Blend Transform</a></h1></div>
<div id="Blend Transform-[[https://www.youtube.com/watch?v=QGpOZP0dAJo&amp;t=1107s|YouTube - Blend Transform]]"><h4 id="[[https://www.youtube.com/watch?v=QGpOZP0dAJo&amp;t=1107s|YouTube - Blend Transform]]" class="header"><a href="#Blend Transform-[[https://www.youtube.com/watch?v=QGpOZP0dAJo&amp;t=1107s|YouTube - Blend Transform]]"><a href="https://www.youtube.com/watch?v=QGpOZP0dAJo&amp;t=1107s">YouTube - Blend Transform</a></a></h4></div>

<p>
The <code>Blend Transform</code> constraint can blend between two targets.
</p>

<p>
Again, we copy the existing <code>transforms</code> geometry node (the first example). Rename to <code>blend_transforms</code>.
</p>

<p>
To prepare for our <code>Blend transform</code> setup:
Inside the Geometry network:
</p>
<ul>
<li>
Copy the vertical network from the <code>Add</code> to (and including) the <code>Rig Pose</code> 'Target' node (<code>rigpose_target</code>):

<ul>
<li>
(Move the <code>Sphere</code> target geo network to the right a bit to make room.)

<li>
Rename the <code>REST_TARGET_SKELETON</code> copy to <code>REST_TARGET_SKELETON_2</code>

<li>
Rename the <code>rigpose_target</code> nodes to:

<ul>
<li>
<code>rigpose_target1</code>

<li>
<code>rigpose_target2</code>

</ul>
</ul>
<li>
Plug the <code>rigpose_target2</code> into the 3rd input of the <code>Rig Attribute VOP</code> (<code>constraints</code>) node.

</ul>
<div id="Blend Transform-Diagram - Network for 'Blend Transform' constraint"><h4 id="Diagram - Network for 'Blend Transform' constraint" class="header"><a href="#Blend Transform-Diagram - Network for 'Blend Transform' constraint">Diagram - Network for 'Blend Transform' constraint</a></h4></div>
<pre>
                                 ┌────┐                ┌─────┐                     ┌─────┐                   ┌────────┐
                                 │add │                │ add │                     │ add │                   │ sphere │
                                 └─┬──┘                └──┬──┘                     └─────┘                   └─────┬──┘
  ┌──────────────────────┐         │                      │                           │                            │
  │testgeometry_rubbertoy│      ┌──┴────┐                 │                           │                            │
  └────┬─────────────────┘      │ color │                 │                           │                            │
       │                        └──┬────┘              ┌──┴───┐                    ┌──┴───┐                   ┌────┴──┐
       │                           │                   │ name │                    │ name │                   │ color │
       │                        ┌──┴───┐               └──┬───┘                    └──┬───┘                   └────┬──┘
       │                        │ name │                  │                           │                            │
       │                        └──┬───┘                  │                           │                            │
       │                           │                      │                           │                            │
       │                      ┌────┴──────┐          ┌────┴──────┐               ┌────┴──────┐                ┌────┴─┐
       │                      │ rigdoctor │          │ rigdoctor │               │ rigdoctor │                │ name │
       │                      └────┬──────┘          └────┬──────┘               └────┬──────┘                └────┬─┘
       │                           │                      │                           │                            │
       │                  ┌────────┴─────────────┐ ┌──────┴───────────────┐   ┌───────┴─────────────────┐     ┌────┴────┐
       │                  │       null           │ │       null           │   │        null             │     │  null   │
       │                  │ REST_OBJECT_SKELETON │ │REST_TARGET_SKELETON_1│   │ REST_TARGET_SKELETON_2  │     │ CONTROL │
       │                  └──────┬─┬─┬───────────┘ └──────┬───────────────┘   └───────┬─────────────────┘     └────┬────┘
       │      ┌──────────────────┘ │ │                    │     ┌─────────────────────┼─────┬──────────────────────┘
       │      │                    │ └─────────┐          │     │                     │     │
 ┌─────┴──────┴──────┐             │           │    ┌─────┴─────┴──────┐        ┌─────┴─────┴──────┐
 │ capturecontrolgeo │             │           │    │ attachcontrolgeo1│        │ attachcontrolgeo2│
 └─────────┬─────────┘             │           │    └─────┬────────────┘        └─────┬────────────┘
           │                       │           │          │                           │
           │                       │           │   ┌──────┴─────────┐          ┌──────┴─────────┐
           │                       │           │   │     rigpose    │          │     rigpose    │
           │                       │           │   │ rigpose_target1│          │ rigpose_target2│
           │                       │           │   └──────┬─────────┘          └──────┬─────────┘
           │                       │           │          │   ┌───────────────────────┘
           │                       │           │          │   │
           │                       │        ┌──┴──────────┴───┴─┐
           │                       │        │ Rig Attribute VOP │
           │                       │        │   constraints     │
           │                       │        └─────────┬─────────┘
           │                       │                  │
           └────────────────────┐  │  ┌───────────────┘
                                │  │  │
                            ┌───┴──┴──┴──┐
                            │ bonedeform │
                            └────────────┘
</pre>

<p>
Jump inside the <code>Rig Attribute VOP</code> network (<code>constraints</code>) node.
</p>

<p>
Duplicate the <code>target</code> node (<code>Get Point Transform</code>):
</p>
<ul>
<li>
Rename the original to <code>target1</code>

<li>
Rename the copy to <code>target2</code>

<li>
On <code>target2</code>, switch the <code>File</code> dropdown to <code>Third Input</code>.

<li>
Make sure the <code>Point Name</code> fields are set to <code>target</code> on both.

</ul>
<p>
Now drop a <code>Blend Transform</code> node:
</p>
<ul>
<li>
Leave the <code>object</code> connection between <code>ptnum</code> and <code>pt</code> on the <code>Set Point Transform</code> node.

<li>
First connect <code>target1</code> node's <code>xform</code> to <code>xform1</code>

<li>
Second, connect <code>target2</code> node's <code>xform</code> to <code>xform2</code> on the 'Blend Transform'.

<li>
Finish by connecting the <code>xform</code> output from the 'Blend Transform' to the <code>xform</code> input of the <code>Set Point Transform</code> node.

</ul>
<div id="Blend Transform-Diagram - Blend Transform inside the 'Rig Attribute VOP'"><h4 id="Diagram - Blend Transform inside the 'Rig Attribute VOP'" class="header"><a href="#Blend Transform-Diagram - Blend Transform inside the 'Rig Attribute VOP'">Diagram - Blend Transform inside the 'Rig Attribute VOP'</a></h4></div>
<pre>
  Signature: By Name                                                                       
  File: First Input                                                                        
  Point Name: object                                                                       
   ┌─────────────────────┐                                                                 
   │        object       │                                                                 
   │ Get Point Transform │                                        ┌──────────────────────┐ 
   │   First Input       │                                        │  setpointtransform1  │ 
   │               ptnum ├───────────────────────────────┐        │ Set Point Transform  │ 
   │                     │                               │        │                      │ 
   │                     │                               └────────┤ pt                   │ 
   └─────────────────────┘                                        │                      │ 
                                                         ┌────────┤ xform                │ 
                                                         │        │                      │ 
                                                         │        │ localxform           │ 
                                                         │        │                      │ 
   ┌─────────────────────┐        ┌───────────────────┐  │        │ active               │ 
   │        target1      │        │                   │  │        └──────────────────────┘ 
   │ Get Point Transform │        │  offsettransform  │  │                                 
   │    Second Input     │        │                   │  │                                 
   │                     │        │                   │  │                                 
   │                     │        │                   │  │                                 
   │               xform ├────────│  xform1   xform   │──┘                                 
   └─────────────────────┘        │                   │                                    
   Signature: By Name             │                   │                                    
   File: Second Input         ┌───┤  xform2           │                                    
   Point Name: '$OS'          │   └───────────────────┘                                    
                              │                                                            
                              │                                                            
   ┌─────────────────────┐    │                                                            
   │        target2      │    │                                                            
   │ Get Point Transform │    │                                                            
   │   Third Input       │    │                                                            
   │                     │    │                                                            
   │                     │    │                                                            
   │               xform ├────┘                                                            
   └─────────────────────┘                                                                 
   Signature: By Name                                                                      
   File: Third Input                                                                      
   Point Name: '$OS'                                                                       
</pre>

<p>
The <code>Blend Transform</code> node has a few options:
</p>
<ul>
<li>
On/Off Switches to constrain to:

<ul>
<li>
Translation

<li>
Rotation

<li>
Scale

</ul>
<li>
A <code>Bias</code> slider to control which targets to bias towards and how much:

<ul>
<li>
This can be 'promoted' to the <code>Rig Attribute VOP</code> level to adjust:

<ul>
<li>
Click on the cog at the end of the <code>Bias</code> slider and <code>Promote</code>

<li>
or

<li>
<code>MMB</code> on the <code>bias</code> input on the node in the editor, and choose <code>Promote</code>

</ul>
</ul>
</ul>
  
<p>
To illustrate the usage of this setup:
</p>
<ul>
<li>
Transform and adjust <code>rigpose_target1</code>.

<li>
Transform and adjust <code>rigpose_target2</code>.

</ul>
  
<table>
<tr>
<td>
NOTE: I found that the promoted bias slider was flaky and moving the original didn't reflect in the promoted slider and visa versa. Then it would crash the scene.
</td>
</tr>
</table>

<p>
Now, by adjusting the <code>Bias</code> on the <code>Blend Transform</code> node (on the 'promoted' slider on the <code>Rig Attribute VOP</code> node), you can bias the influence between the two targets.
</p>

<div id="Parent Constraint"><h1 id="Parent Constraint" class="header"><a href="#Parent Constraint">Parent Constraint</a></h1></div>
<div id="Parent Constraint-[[https://www.youtube.com/watch?v=QGpOZP0dAJo&amp;t=1272s|YouTube - Parent Constraint]]"><h4 id="[[https://www.youtube.com/watch?v=QGpOZP0dAJo&amp;t=1272s|YouTube - Parent Constraint]]" class="header"><a href="#Parent Constraint-[[https://www.youtube.com/watch?v=QGpOZP0dAJo&amp;t=1272s|YouTube - Parent Constraint]]"><a href="https://www.youtube.com/watch?v=QGpOZP0dAJo&amp;t=1272s">YouTube - Parent Constraint</a></a></h4></div>

<p>
The <code>Parent Constraint</code> can retain the original position.
</p>

<p>
Again, we copy the existing <code>transforms</code> geometry node (the first example). Rename the copy to <code>parent_constraint</code>
</p>

<div id="Parent Constraint-Diagram - Parent Constraint (same as original setup)"><h4 id="Diagram - Parent Constraint (same as original setup)" class="header"><a href="#Parent Constraint-Diagram - Parent Constraint (same as original setup)">Diagram - Parent Constraint (same as original setup)</a></h4></div>
<pre>
                                ┌────┐                ┌─────┐            ┌────────┐
                                │add │                │ add │            │ sphere │
                                └─┬──┘                └──┬──┘            └─────┬──┘
 ┌──────────────────────┐         │                      │                     │
 │testgeometry_rubbertoy│      ┌──┴────┐                 │                     │
 └────┬─────────────────┘      │ color │                 │                     │
      │                        └──┬────┘              ┌──┴───┐            ┌────┴──┐
      │                           │                   │ name │            │ color │
      │                        ┌──┴───┐               └──┬───┘            └────┬──┘
      │                        │ name │                  │                     │
      │                        └──┬───┘                  │                     │
      │                           │                      │                     │
      │                      ┌────┴──────┐          ┌────┴──────┐         ┌────┴─┐
      │                      │ rigdoctor │          │ rigdoctor │         │ name │
      │                      └────┬──────┘          └────┬──────┘         └────┬─┘
      │                           │                      │                     │
      │                  ┌────────┴─────────────┐ ┌──────┴─────────────┐  ┌────┴────┐
      │                  │       null           │ │       null         │  │  null   │
      │                  │ REST_OBJECT_SKELETON │ │REST_TARGET_SKELETON│  │ CONTROL │
      │                  └──────┬─┬─┬───────────┘ └──────┬─────────────┘  └────┬────┘
      │      ┌──────────────────┘ │ │                    │     ┌───────────────┘
      │      │                    │ └─────────┐          │     │
┌─────┴──────┴──────┐             │           │    ┌─────┴─────┴──────┐
│ capturecontrolgeo │             │           │    │ attachcontrolgeo │
└─────────┬─────────┘             │           │    └─────┬────────────┘
          │                       │           │          │
          │                       │           │   ┌──────┴─────────┐
          │                       │           │   │     rigpose    │
          │                       │           │   │ rigpose_target │
          │                       │           │   └──────┬─────────┘
          │                       │           │          │
          │                       │        ┌──┴──────────┴─────┐
          │                       │        │ Rig Attribute VOP │
          │                       │        │   constraints     │
          │                       │        └─────────┬─────────┘
          │                       │                  │
          └────────────────────┐  │  ┌───────────────┘
                               │  │  │
                           ┌───┴──┴──┴──┐
                           │ bonedeform │
                           └────────────┘
</pre>

<p>
To prepare for our <code>Parent Constraint</code> setup:
Inside the Geometry network:
</p>
<ul>
<li>
Jump into the <code>Rig Attribute VOP</code> node (<code>constraints</code>):

<ul>
<li>
Drop a <code>Parent Constraint</code> node:

<ul>
<li>
Change the wiring like so:

<ul>
<li>
The <code>ptnum</code> form the <code>object</code> node continues to be plugged into the <code>Set Point Transform</code> node's <code>pt</code> input.

<li>
From the <code>object</code> node, take a connection from <code>xform</code> to the <code>Parent Constraint</code> node's <code>xform</code>

<li>
Plug the <code>xform</code> from the <code>target</code> node to the <code>newparent</code> input of the <code>Parent Constraint</code>.

<li>
The <code>Parent Constraint</code> node's <code>outxform</code> plugs into the <code>Set Point Transform</code> node's <code>xform</code> input.

</ul>
</ul>
</ul>
</ul>
  
<div id="Parent Constraint-Diagram - Parent Constraint setup inside Rig Attribute VOP"><h4 id="Diagram - Parent Constraint setup inside Rig Attribute VOP" class="header"><a href="#Parent Constraint-Diagram - Parent Constraint setup inside Rig Attribute VOP">Diagram - Parent Constraint setup inside Rig Attribute VOP</a></h4></div>
<pre>
                                                                      ┌────────────────────┐     
    ┌────────────────┐                                                │ setpointtransform  │
    │     object     │                                                │                    │
    │                │                                                │                    │
    │                │                                                │                    │
    │         ptnum  ┼────────────────────────────────────────────────┤ pt                 │
    │                │                                                │                    │
    │         xform  ┼─────┐                                   ┌──────┼ xform              │
    │                │     │                                   │      └────────────────────┘
    └────────────────┘     │    ┌─────────────────────────┐    │
                           │    │       parentconstraint  │    │
                           │    │                         │    │
     ┌────────────────┐    └────┼ xform         outxform  ├────┘
     │                │         │                         │
     │   target       │         │                         │
     │                │         │                         │
     │                │         │                         │
     │         xform  ├─────────┤ newparent               │
     │                │         └─────────────────────────┘
     │                │
     └────────────────┘
</pre>

<p>
At this stage, the <code>Rubber Toy</code> (object) is attached to the <code>target</code> visually.
</p>
<ul>
<li>
Move the <code>target</code> point (select the <code>Rig Pose</code> node (<code>rigpose_target</code>) and move.

<li>
The 'object' follows along.

<li>
Click on the <code>Update Offset</code> on the <code>Parent Constraint</code> node's parameter panel:

<ul>
<li>
The 'object' (<code>Rubber Toy</code>) will snap back to its original position - which is at the origin.

</ul>
</ul>
<p>
From this point onwards, transforming the <code>target</code> point will affect the 'object' (the child) as a parent/child would normally.
</p>

<p>
To clear the offset:
</p>
<ul>
<li>
Click the <code>Clear Offset</code> button on the <code>Parent Constraint</code> node's parameters.

<li>
The 'object' will snap to the 'target'

</ul>
<p>
There is an option to <code>blend</code> between the offset and the original position. There is a <code>blend</code> slider on the <code>Parent Constraint</code> node, which can be promoted (using the cog icon on the field, or <code>MMB</code> on the node's <code>blend</code> input).
</p>

<table>
<tr>
<td>
NOTE: Promoting the 'Blend' slider and adjusting crashes my Houdini session.
</td>
</tr>
</table>

<p>
<span id="Parent Constraint-Diagram - Parent Constraint setup inside Rig Attribute VOP-<em>Summary</em>"></span><strong id="<em>Summary</em>"><em>Summary</em></strong>
</p>

<p>
<code>Update Offset</code> - Sends the 'object' (child) back to its original rest position.<br>
<code>Clear Offset</code> - Sends the 'object' (child) to the position of the parent or <code>target</code>.<br>
</p>

<div id="Re-Parent Constraint"><h1 id="Re-Parent Constraint" class="header"><a href="#Re-Parent Constraint">Re-Parent Constraint</a></h1></div>
<div id="Re-Parent Constraint-[[https://www.youtube.com/watch?v=QGpOZP0dAJo&amp;t=1434s|YouTube - Re-Parent Constraint]]"><h4 id="[[https://www.youtube.com/watch?v=QGpOZP0dAJo&amp;t=1434s|YouTube - Re-Parent Constraint]]" class="header"><a href="#Re-Parent Constraint-[[https://www.youtube.com/watch?v=QGpOZP0dAJo&amp;t=1434s|YouTube - Re-Parent Constraint]]"><a href="https://www.youtube.com/watch?v=QGpOZP0dAJo&amp;t=1434s">YouTube - Re-Parent Constraint</a></a></h4></div>

<p>
To illustrate this constraint setup, start by duplicating the previous set up; the <code>Parent Constraint</code> setup.
</p>

<p>
Rename the copy to <code>reparent_constraint</code>.
</p>

<p>
Next we'll create a point to create a hierarchy of joints:
</p>
<ul>
<li>
In the <code>Add</code> node (top of the <code>object</code> network), click to add a new point:

<ul>
<li>
Leave <code>Point 0</code> at <code>0, 0, 0</code>

<li>
Set <code>Point 1</code> to <code>0, -1, 0</code>

</ul>
<li>
Select the <code>Name</code> node:

<ul>
<li>
Add another <code>Nameing</code> (<code>+</code>)

<li>
<code>Group</code> to <code>1</code>

<li>
<code>Name</code> to <code>object_parent</code>

<li>
<code>Group</code> to <code>0</code>

<li>
<code>Name</code> to <code>object</code>

</ul>
<li>
After the <code>Name</code> node:

<ul>
<li>
Add a <code>Parent Joint</code> node (used to be called <code>Reparent Joint</code>):

<ul>
<li>
Click its <code>+</code> to add a parameter:

<ul>
<li>
<code>Joint 1</code> to <code>@name = object</code>

<li>
<code>Parent 1</code> to <code>@name = object_parent</code>

</ul>
</ul>
</ul>
<li>
Between the <code>REST_OBJECT_SKELETEON</code> node and the <code>constraints</code> node:

<ul>
<li>
Add a <code>Rig Pose</code> node:

<ul>
<li>
Rename to <code>rigpose_object</code>

<li>
The tutorial adds keyframes at zero for all transform (of <code>object</code> and <code>object_parent</code>)

<li>
The timeline is moved to frame 100, and it's adjusted and keyframes.

</ul>
</ul>
<li>
On the <code>target</code> network, repeat the setup, but for the target:

<ul>
<li>
Do all the setup, but change <code>object</code> to <code>target</code> and <code>object_parent</code> to <code>target_parent</code>

<li>
Add point, add name attribute and add a Parent Joint node.

<li>
Create a different animation on these points/joints as per <code>object</code> but for these <code>target</code> versions.

</ul>
</ul>
<p>
Let's create another visualizer for the new points:
</p>
<ul>
<li>
Duplicate the <code>color</code> and <code>name</code> nodes on the <code>Sphere</code> network to the right:

<ul>
<li>
Change the color to 'green'

<li>
Change the name to <code>sphere_green_ctrl</code>

<li>
Add a <code>Merge</code> node:

<ul>
<li>
plug in both the original <code>Name</code> node and the new duplicated <code>Name</code> node

</ul>
<li>
Plug the output from the <code>Merge</code> into the existing <code>Null</code> named <code>CONTROL</code>. 

</ul>
<li>
On the <code>Attach Control Geometry</code> node:

<ul>
<li>
Click the <code>+</code> for a new addition:

<ul>
<li>
<code>Group1</code> to <code>@name=target_parent</code>

<li>
<code>Control Name</code> to <code>sphere_red_ctrl</code>

<li>
<code>Group2</code> to <code>@name=target</code>

<li>
<code>Control Name</code> to <code>sphere_green_ctrl</code>

</ul>
</ul>
<li>
Duplicate this updated <code>Attach Control Geomtry</code> node:

<ul>
<li>
Place it between the <code>REST_OBJECT_SKELETON</code> node on the newish <code>rigpose_object</code> node.

<li>
Change the parameters from <code>target</code> to <code>object</code>:

<ul>
<li>
<code>Group1</code> to <code>@name=object_parent</code>

<li>
<code>Control Name</code> to <code>sphere_red_ctrl</code>

<li>
<code>Group2</code> to <code>@name=object</code>

<li>
<code>Control Name</code> to <code>sphere_green_ctrl</code>

</ul>
</ul>
</ul>
<div id="Re-Parent Constraint-Diagram - Re-parent Constraint"><h4 id="Diagram - Re-parent Constraint" class="header"><a href="#Re-Parent Constraint-Diagram - Re-parent Constraint">Diagram - Re-parent Constraint</a></h4></div>

<pre>
                                                                                                 ┌────────┐
                                                                                                 │ sphere │
                                                                                                 └─────┬──┘
                                                                                                       ├─────────────┐
                                                                                                       │             │
                                                                                                       │             │
                                                                               ┌────┐             ┌────┴──┐     ┌────┴──┐
                                ┌────┐                                         │add │             │ color │     │ color │
                                │add │                                         └─┬──┘             └────┬──┘     └────┬──┘
                                └─┬──┘                                           │                     │             │
 ┌──────────────────────┐         │                                           ┌──┴───┐                 │             │
 │testgeometry_rubbertoy│      ┌──┴────┐                                      │ name │            ┌────┴─┐      ┌────┴─┐
 └────┬─────────────────┘      │ color │                                      └──┬───┘            │ name │      │ name │
      │                        └──┬────┘                                         │                └────┬─┘      └────┬─┘
      │                           │                                     ┌────────┴───────┐             │    ┌────────┘
      │                        ┌──┴───┐                                 │  parentjoints  │             │    │
      │                        │ name │                                 └────────┬───────┘       ┌─────┴────┴┐
      │                        └──┬───┘                                          │               │   merge   │
      │                           │                                         ┌────┴──────┐        └─────┬─────┘
      │                    ┌──────┴────────┐                                │ rigdoctor │              │
      │                    │ parentjoints  │                                └────┬──────┘              │
      │                    └──────┬────────┘                                     │                     │
      │                           │                                       ┌──────┴─────────────┐  ┌────┴────┐
      │                      ┌────┴──────┐                                │       null         │  │  null   │
      │                      │ rigdoctor │                                │REST_TARGET_SKELETON│  │ CONTROL │
      │                      └────┬──────┘                                └──┬─────────────────┘  └────┬────┘
      │                           │                                          │                         │
      │                  ┌────────┴─────────────┐                            │                         │
      │                  │       null           │                        ┌───┴───┐                     │
      │                  │ REST_OBJECT_SKELETON │                        │       │                     │
      │                  └──────┬─┬─┬───────────┘                        │       │                     │
      │      ┌──────────────────┘ │ │                 ┌──────────────────┼───────┼──────┬──────────────┘
      │      │                    │ ├───────────┐     │                  │       │      │
┌─────┴──────┴──────┐             │ │     ┌─────┴─────┴──────┐           │ ┌─────┴──────┴─────┐
│ capturecontrolgeo │             │ │     │ attachcontrolgeo │           │ │ attachcontrolgeo │
└─────────┬─────────┘             │ │     └─────┬────────────┘           │ └─────┬────────────┘
          │                       │ │           │                        │       │
          │                       │ │        ┌──┘                        │┌──────┴─────────┐
          │                       │ │        │                           ││     rigpose    │
          │                       │ └────────┼──┐                        ││ rigpose_target │
          │                       │          │  │                        │└───────┬────────┘
          │                       │          │  │                        │        │
          │                       │          │  │       ┌────────────────┼────────┘
          │                       │          │  │       │    ┌───────────┘
          │                       │          │  │       │    │
          │                       │          │  └────┐  │    │
          │                       │┌─────────┴──────┐│  │    │
          │                       ││     rigpose    ││  │    │
          │                       ││ rigpose_target ││  │    │
          │                       │└─────────┬──────┘│  │    │
          │                       │          │       │  │    │
          │                       │        ┌─┴───────┴──┴────┴─┐
          │                       │        │ Rig Attribute VOP │
          │                       │        │   constraints     │
          │                       │        └─────────┬─────────┘
          │                       │                  │
          └────────────────────┐  │  ┌───────────────┘
                               │  │  │
                           ┌───┴──┴──┴──┐
                           │ bonedeform │
                           └────────────┘
</pre>

<p>
To setup the <code>Reparent Constraint</code>:
</p>
<ul>
<li>
Re-wire the outer network by changing the inputs on the <code>constraints</code> node (<code>Rig Attribute VOP</code>):

<ul>
<li>
Input 1 remains the <code>rigpose_object</code>

<li>
Input 2 should be the <code>REST_OBJECT_SKELETON</code> null.

<li>
Input 3 should be connected from <code>rigpose_target</code>

<li>
Input 4 should be connected from the <code>REST_TARGET_SKELETON</code> null.

</ul>
<li>
Inside the <code>constraints</code> node:

<ul>
<li>
Duplicate the <code>object</code> node (<code>Get Point Transform</code>)

<ul>
<li>
Rename to <code>object_parent</code>

<li>
Change the <code>Point Name</code> parameter to <code>object_parent</code>

<li>
<code>xform</code> out goes to the <code>Parent Constraint</code> node's <code>parent</code> input

</ul>
<li>
Duplicate this new <code>object_parent</code> node:

<ul>
<li>
Rename to <code>object_parent_bind</code>

<li>
Change the <code>File</code> dropdown to <code>Second Input</code>

<li>
<code>xform</code> output goes to the <code>Parent Constrain</code> node's <code>parentbind</code> input

</ul>
</ul>
<li>
Go to the <code>target</code> node:

<ul>
<li>
Change the <code>File</code> dropdown to <code>Third Input</code>

</ul>
<li>
Duplicated this <code>target</code> node:

<ul>
<li>
Rename to <code>target_bind</code>

<li>
Change the <code>File</code> dropdown to the <code>Fourth Input</code>

<li>
<code>xform</code> output goes to the <code>Parent Constrain</code> node's <code>newparentbind</code> input

</ul>
</ul>
<div id="Re-Parent Constraint-Diagram - Re-Parent Constraint inside the Rig Attribute VOP"><h4 id="Diagram - Re-Parent Constraint inside the Rig Attribute VOP" class="header"><a href="#Re-Parent Constraint-Diagram - Re-Parent Constraint inside the Rig Attribute VOP">Diagram - Re-Parent Constraint inside the Rig Attribute VOP</a></h4></div>
<pre>
  ┌───────────────┐                                                                          
  │     object    │                                                 ┌─────────────────────┐  
  │               │                                                 │   setpointtransform │  
  │               │                                                 │                     │  
  │          ptnum├─────────────────────────────────────────────────┼ pt                  │  
  │               │                                                 │                     │  
  │          xform├───────────┐                                     │                     │  
  │               │           │                               ┌─────┤ xform               │  
  └───────────────┘           │                               │     └─────────────────────┘  
                              │                               │                              
                              │                               │                              
  ┌───────────────┐           │                               │                              
  │object_parent  │           │                               │                              
  │               │           │                               │                              
  │               │           │                               │                              
  │          ptnum│           │                               │                              
  │               │           │                               │                              
  │          xform┼────────┐  │                               │                              
  │               │        │  │                               │                              
  └───────────────┘        │  │                               │                              
                           │  │                               │                              
  ┌───────────────┐        │  │   ┌─────────────────────────┐ │                              
  │object_bind    │        │  │   │     parentconstraint    │ │                              
  │               │        │  │   │                         │ │                              
  │               │        │  └───┤ xform          outxform ├─┘                              
  │          ptnum│        │      │                         │                                
  │               │        └──────┤ parent                  │                                
  │          xform┼─────┐         │                         │                                
  │               │     └─────────┤ parentbind              │                                
  └───────────────┘               │                         │                                
                           ┌──────┤ newparent               │                                
                           │      │                         │                                
 ┌────────────────┐        │  ┌───┤ newparentbind           │                                
 │                │        │  │   │                         │                                
 │   target       │        │  │   └─────────────────────────┘                                
 │                │        │  │                                                              
 │                │        │  │                                                              
 │          xform ├────────┘  │                                                              
 │                │           │                                                              
 │                │           │                                                              
 └────────────────┘           │                                                              
 ┌────────────────┐           │                                                              
 │                │           │                                                              
 │ target_bind    │           │                                                              
 │                │           │                                                              
 │                │           │                                                              
 │          xform ├───────────┘                                                              
 │                │                                                                          
 │                │                                                                          
 └────────────────┘                                                                          
</pre>

<p>
Now you can blend (using the <code>Blend</code> slider) between the two animations.
</p>

<table>
<tr>
<td>
I noticed on my setup and the tutorial version, that the 'object' doesn't revert to the target 100% at Blend of 1.
</td>
</tr>
</table>

<div id="Part II"><h1 id="Part II" class="header"><a href="#Part II">Part II</a></h1></div>

<div id="Part II-[[https://youtu.be/hpigyuZv784?si=Y0yDegj4W-isQh-y|YouTube - Introduction to Houdini KineFX Constraints - part II]]"><h4 id="[[https://youtu.be/hpigyuZv784?si=Y0yDegj4W-isQh-y|YouTube - Introduction to Houdini KineFX Constraints - part II]]" class="header"><a href="#Part II-[[https://youtu.be/hpigyuZv784?si=Y0yDegj4W-isQh-y|YouTube - Introduction to Houdini KineFX Constraints - part II]]"><a href="https://youtu.be/hpigyuZv784?si=Y0yDegj4W-isQh-y">YouTube - Introduction to Houdini KineFX Constraints - part II</a></a></h4></div>
<div id="Introduction"><h1 id="Introduction" class="header"><a href="#Introduction">Introduction</a></h1></div>
<div id="Introduction-[[https://www.youtube.com/watch?v=hpigyuZv784&amp;t=0s|YouTube - Introduction]]"><h4 id="[[https://www.youtube.com/watch?v=hpigyuZv784&amp;t=0s|YouTube - Introduction]]" class="header"><a href="#Introduction-[[https://www.youtube.com/watch?v=hpigyuZv784&amp;t=0s|YouTube - Introduction]]"><a href="https://www.youtube.com/watch?v=hpigyuZv784&amp;t=0s">YouTube - Introduction</a></a></h4></div>

<div id="Look At Constraint"><h1 id="Look At Constraint" class="header"><a href="#Look At Constraint">Look At Constraint</a></h1></div>
<div id="Look At Constraint-[[https://www.youtube.com/watch?v=hpigyuZv784&amp;t=22s|YouTube - Look At constraint]]"><h4 id="[[https://www.youtube.com/watch?v=hpigyuZv784&amp;t=22s|YouTube - Look At constraint]]" class="header"><a href="#Look At Constraint-[[https://www.youtube.com/watch?v=hpigyuZv784&amp;t=22s|YouTube - Look At constraint]]"><a href="https://www.youtube.com/watch?v=hpigyuZv784&amp;t=22s">YouTube - Look At constraint</a></a></h4></div>

<p>
The <code>Look At Constriant</code> involves an object facing a target.
</p>

<p>
Start by duplicating the <code>transforms</code> node we setup at the start (Geometry node).
</p>
<ul>
<li>
Rename it <code>lookat_constraint</code>

<li>
Move the target point to a position that the <code>Rubber Toy</code> object can 'look at'.

<li>
Inside the <code>constraints</code> (<code>Rig Attribute VOP</code>) node:

<ul>
<li>
Cut the wire between the <code>target</code> and the <code>setpointtransforms</code> node

<li>
Leave the <code>object</code> <code>ptnum</code> out to <code>setpointtransforms</code> <code>pt</code> input

<li>
Add a <code>Look At (KineFX)</code> node:

<ul>
<li>
Connect the <code>object</code> <code>xform</code> to the <code>Look At (KineFX)</code> node's <code>from</code>

<li>
Connect the <code>target</code> <code>xform</code> to the <code>Look At (KineFX)</code> node's <code>to</code> input.

<li>
Connect the <code>Look At</code> <code>outxform</code> to the <code>setpointtransforms</code> <code>xform</code> input.

</ul>
</ul>
</ul>
<p>
At this point, the object will look at the target, but the directionality (rotation) might be off (with the wrong axis pointing to the target).
</p>

<p>
Back in the <code>constraints</code> node:
</p>
<ul>
<li>
Review the settings on the <code>Look At</code> node:

<ul>
<li>
<code>Look At Axis</code>:

<ul>
<li>
<code>-X</code>

<li>
<code>-Y</code>

<li>
<code>-Z</code>

<li>
<code>X</code>

<li>
<code>Y</code>

<li>
<code>Z</code> (Try this for our case)

</ul>
<li>
<code>Up Axis</code>:

<ul>
<li>
<code>-X</code>

<li>
<code>-Y</code>

<li>
<code>X</code>

<li>
<code>Y</code> (Try this for our case)

</ul>
</ul>
</ul>
<p>
Now we should be good!
</p>

<div id="Look At Constraint-Alternate Up-Vector"><h2 id="Alternate Up-Vector" class="header"><a href="#Look At Constraint-Alternate Up-Vector">Alternate Up-Vector</a></h2></div>

<p>
There is a third input available on the <code>Look At (KineFX)</code> node; <code>up</code>, which is the up vector.
</p>

<p>
To illustrate this, we can make a control:
</p>
<ul>
<li>
Duplicate the <code>REST_TARGET_SKELETON</code> part of the setup:

<ul>
<li>
Change the <code>Name</code> node's <code>name</code> attribute to <code>up</code>

<li>
Change the <code>REST_TARGET_SKELETON</code> to <code>REST_UP_CONTROL</code>

<li>
Change the <code>rigpose_target</code> to <code>rigpose_up</code>

<li>
In the <code>Attach Control Geometry</code> node, change from <code>@name=target</code> to <code>@name=up</code>

</ul>
<li>
Add a green sphere control (as shown on previous lessons), and change the <code>name</code> to <code>sphere_green_ctrl</code> and <code>Merge</code> as before.

<li>
Connect the <code>REST_UP_SKELETON</code> to the <code>constraints</code> and make a new <code>Get Point transform</code> (by duplicating the <code>target</code> one)

<li>
Call it <code>up</code>:

<ul>
<li>
Set to <code>Third Input</code>

<li>
Change <code>Point Name</code> to <code>up</code>

<li>
Connect its <code>xform</code> to the <code>up</code> input on the <code>Look At</code> 

</ul>
<li>
Moving the <code>up</code> control point, using the corresponding <code>rigpose_up</code> (on the duplicated section of network) will determine the up vector.

</ul>
<div id="Look At Constraint-An Aside"><h2 id="An Aside" class="header"><a href="#Look At Constraint-An Aside">An Aside</a></h2></div>

<p>
At this stage in the tutorial, the <code>Rig Doctor</code> node was selected, and the <code>Joint Size</code> slider was tweaked on the <code>Visualize</code> section of the parameter panel. This allowed the viewer to see the joint axis a bit clearer.
</p>

<div id="Look At constraint with blend and offset"><h1 id="Look At constraint with blend and offset" class="header"><a href="#Look At constraint with blend and offset">Look At constraint with blend and offset</a></h1></div>
<div id="Look At constraint with blend and offset-[[https://www.youtube.com/watch?v=hpigyuZv784&amp;t=327s|YouTube - Look At constraint with blend and offset]]"><h4 id="[[https://www.youtube.com/watch?v=hpigyuZv784&amp;t=327s|YouTube - Look At constraint with blend and offset]]" class="header"><a href="#Look At constraint with blend and offset-[[https://www.youtube.com/watch?v=hpigyuZv784&amp;t=327s|YouTube - Look At constraint with blend and offset]]"><a href="https://www.youtube.com/watch?v=hpigyuZv784&amp;t=327s">YouTube - Look At constraint with blend and offset</a></a></h4></div>
<p>
We'll start by duplicating the Look At example (with the Up Vector option).
</p>

<ul>
<li>
Rename to <code>lookat_blend_and_offset_constraint</code>

<li>
Inside the <code>constraints</code> (<code>Rig Attribute VOP</code>) node:

<ul>
<li>
Add a <code>Look At Constraint</code> node:

<ul>
<li>
This has additional parameters (over the initial <code>Look At (KineFX)</code> node

<li>
It has <code>Update Offset</code>, <code>Clear Offset</code> and <code>Blend</code> options.

<li>
Replace the original <code>Look At (KineFX)</code> with this new one:

<ul>
<li>
Keep the <code>ptnum</code> to <code>pt</code> connection

<li>
<code>object</code> nodes' <code>xform</code> to <code>lookatconstraint</code> <code>xform</code>

<li>
<code>target</code> node's <code>xform</code> to the <code>lookat</code> input

<li>
<code>up</code> node's <code>xform</code> to the <code>lookup</code> input

<li>
<code>lookatconstraint</code> node's <code>xform_2</code> to the <code>setpointtransforms</code> <code>xform</code> input.

</ul>
</ul>
</ul>
</ul>
<p>
Now, if we adjust the <code>Blend</code> on the <code>Look At Constraint</code> node, the <code>object</code> (<code>Rubber Toy</code>) will revert to its default transform state.
</p>

<p>
If you click the <code>Update Offset</code> button with the <code>object</code> in a different state of <code>Blend</code>, this offset will be set.
</p>

<p>
<code>Clear Offset</code> will return control to the <code>Look At Constraint</code> and there will be no offset (provided the <code>Blend</code> is at 1.
</p>

<div id="Path constraint"><h1 id="Path constraint" class="header"><a href="#Path constraint">Path constraint</a></h1></div>
<div id="Path constraint-[[https://www.youtube.com/watch?v=hpigyuZv784&amp;t=481s|YouTube - Path constraint]]"><h4 id="[[https://www.youtube.com/watch?v=hpigyuZv784&amp;t=481s|YouTube - Path constraint]]" class="header"><a href="#Path constraint-[[https://www.youtube.com/watch?v=hpigyuZv784&amp;t=481s|YouTube - Path constraint]]"><a href="https://www.youtube.com/watch?v=hpigyuZv784&amp;t=481s">YouTube - Path constraint</a></a></h4></div>

<p>
To start this one, we can duplicate the <code>transforms</code> example. Rename to <code>path_constraint</code>
</p>

<p>
Disconnect all the vertical network branches from the second input of the <code>constraints</code> (<code>Rig Attribute VOP</code>) node (the target and control stuff), and move to the right. (We'll use it again in the example following this one.)
</p>

<p>
The tutorial selects a <code>Curve</code> tool from the <code>Create</code> shelf, but the tools in my version of Houdini (20.5) are not the same curve tools.
</p>
<ul>
<li>
Drop a <code>Curve</code> node, and click some points to form the curve. End with a <code>MMB</code> click.

<ul>
<li>
Set <code>Primitive</code> to <code>Nurbs Curve</code>.

<li>
I also checked the <code>Reinterpret Curves as Current Type and Order</code>.

</ul>
<li>
Add a <code>Rig Doctor</code> node:

<ul>
<li>
This will automatically create the <code>name</code> attribute (<code>point_0, point_1, point_2, etc</code>)

</ul>
<li>
Connect this up to the second input of the <code>constraints</code> VOP node.

</ul>
<div id="Path constraint-Diagram - Path Constraint setup (at obj/geom level)"><h4 id="Diagram - Path Constraint setup (at obj/geom level)" class="header"><a href="#Path constraint-Diagram - Path Constraint setup (at obj/geom level)">Diagram - Path Constraint setup (at obj/geom level)</a></h4></div>

<pre>
                                ┌────┐
                                │add │
                                └─┬──┘
 ┌──────────────────────┐         │
 │testgeometry_rubbertoy│      ┌──┴────┐
 └────┬─────────────────┘      │ color │
      │                        └──┬────┘
      │                           │              ┌───────────────┐
      │                        ┌──┴───┐          │     Curve     │
      │                        │ name │          │  NURBS Curve  │
      │                        └──┬───┘          └───────┬───────┘
      │                           │                      │
      │                      ┌────┴──────┐       ┌───────┴───────┐
      │                      │ rigdoctor │       │  rigdoctor    │
      │                      └────┬──────┘       └───────┬───────┘
      │                           │                      │
      │                  ┌────────┴─────────────┐        │
      │                  │       null           │        │
      │                  │ REST_OBJECT_SKELETON │        │
      │                  └──────┬─┬─┬───────────┘        │
      │      ┌──────────────────┘ │ │                    │
      │      │                    │ └─────────┐          │
┌─────┴──────┴──────┐             │           │          │
│ capturecontrolgeo │             │           │          │
└─────────┬─────────┘             │           │          │
          │                       │           │          │
          │                       │           │          │
          │                       │           │          │
          │                       │           │          │
          │                       │           │          │
          │                       │           │          │
          │                       │        ┌──┴──────────┴─────┐
          │                       │        │ Rig Attribute VOP │
          │                       │        │   constraints     │
          │                       │        └─────────┬─────────┘
          │                       │                  │
          └────────────────────┐  │  ┌───────────────┘
                               │  │  │
                           ┌───┴──┴──┴──┐
                           │ bonedeform │
                           └────────────┘
</pre>

<p>
Jump inside the <code>constraints</code> VOP node:
</p>
<ul>
<li>
Delete the <code>target</code> node (the <code>Get Point Transform</code>).

<li>
Instead, drop a <code>Transform From Path</code> node:

<ul>
<li>
Set the <code>File</code> dropdown to <code>Second Input</code>

<li>
Connect the <code>outxform</code> to the <code>setpointtransform</code> node's <code>xform</code> input.

</ul>
<li>
Now, if you adjust the <code>Curve Position</code> slider on the <code>Transform From Path</code> node, you should see our <code>Rubber Toy</code> move along the path.

<ul>
<li>
The <code>Primitive Number</code> can stay at 0 since we only have one curve and that first index is 0.

<li>
This is interesting - If you select <code>Get Look At From</code> <code>Look Along Curve</code>:

<ul>
<li>
Add a small offset on the <code>Look At Offset</code>; maybe 0.01.

<li>
This means the <code>Rubber Toy</code> will look slightly ahead of itself along the curve.

</ul>
</ul>
<li>
You could promote the <code>Curve Position</code>, but I've been getting crashes whenever I use a promoted value.

<li>
Another observation: The up-vector was flipping on my own example. The <code>Rubber Toy</code> flipped along the path. This could be tweaked with the up-vector options.

</ul>
<div id="Path constraint-Diagram - Path Constraint - Rig Attribute VOP (constraints)"><h4 id="Diagram - Path Constraint - Rig Attribute VOP (constraints)" class="header"><a href="#Path constraint-Diagram - Path Constraint - Rig Attribute VOP (constraints)">Diagram - Path Constraint - Rig Attribute VOP (constraints)</a></h4></div>

<pre>
 ┌─────────────────────┐
 │ Get Point Transform │
 │                     │            ┌────────────────────┐
 │ object              │            │ setpointtransform  │
 │                     │            │                    │
 │               ptnum ├────────────┤ pt                 │
 │                     │            │                    │
 └─────────────────────┘            │                    │
                            ┌───────┤ xform              │
                            │       └────────────────────┘
  ┌────────────────────┐    │
  │ Transform From Path│    │
  │  transformfrompath1│    │
  │                    │    │
  │           outxform ├────┘
  │                    │
  └────────────────────┘
</pre>

<div id="Path constraint with custom look at vector"><h1 id="Path constraint with custom look at vector" class="header"><a href="#Path constraint with custom look at vector">Path constraint with custom look at vector</a></h1></div>
<div id="Path constraint with custom look at vector-[[https://www.youtube.com/watch?v=hpigyuZv784&amp;t=672s|YouTube - Path constraint with custom look at vector]]"><h4 id="[[https://www.youtube.com/watch?v=hpigyuZv784&amp;t=672s|YouTube - Path constraint with custom look at vector]]" class="header"><a href="#Path constraint with custom look at vector-[[https://www.youtube.com/watch?v=hpigyuZv784&amp;t=672s|YouTube - Path constraint with custom look at vector]]"><a href="https://www.youtube.com/watch?v=hpigyuZv784&amp;t=672s">YouTube - Path constraint with custom look at vector</a></a></h4></div>

<p>
Duplicate the last example (the <code>path_constraint</code> node).
</p>
<ul>
<li>
Rename to <code>path_constraint_look_at_target</code>.

</ul>
<p>
We need a target, so we'll use the disconnected set up from the original <code>transforms</code> setup.
</p>

<p>
Connect the target network's <code>rigpose_target</code> node to the Third Input of the <code>constraints</code> node.
</p>

<div id="Path constraint with custom look at vector-Diagram - Path Constraint with Look At (obj/geometry level)"><h4 id="Diagram - Path Constraint with Look At (obj/geometry level)" class="header"><a href="#Path constraint with custom look at vector-Diagram - Path Constraint with Look At (obj/geometry level)">Diagram - Path Constraint with Look At (obj/geometry level)</a></h4></div>
<pre>
                                                                      ┌─────┐            ┌────────┐
                                                                      │ add │            │ sphere │
                                                                      └──┬──┘            └─────┬──┘
                                ┌────┐                                   │                     │
                                │add │                                   │                     │
                                └─┬──┘                                   │                     │
 ┌──────────────────────┐         │                                   ┌──┴───┐            ┌────┴──┐
 │testgeometry_rubbertoy│      ┌──┴────┐                              │ name │            │ color │
 └────┬─────────────────┘      │ color │                              └──┬───┘            └────┬──┘
      │                        └──┬────┘                                 │                     │
      │                           │          ┌───────────────┐           │                     │
      │                        ┌──┴───┐      │     Curve     │           │                     │
      │                        │ name │      │  NURBS Curve  │      ┌────┴──────┐         ┌────┴─┐
      │                        └──┬───┘      └───────┬───────┘      │ rigdoctor │         │ name │
      │                           │                  │              └────┬──────┘         └────┬─┘
      │                      ┌────┴──────┐   ┌───────┴───────┐           │                     │
      │                      │ rigdoctor │   │  rigdoctor    │    ┌──────┴─────────────┐  ┌────┴────┐
      │                      └────┬──────┘   └───────┬───────┘    │       null         │  │  null   │ 
      │                           │                  │            │REST_TARGET_SKELETON│  │ CONTROL │ 
      │                  ┌────────┴─────────────┐    │            └──────┬─────────────┘  └────┬────┘ 
      │                  │       null           │    │                   │     ┌───────────────┘
      │                  │ REST_OBJECT_SKELETON │    │                   │     │
      │                  └──────┬─┬─┬───────────┘    │             ┌─────┴─────┴──────┐
      │      ┌──────────────────┘ │ │                │             │ attachcontrolgeo │
      │      │                    │ └─────────┐      │             └─────┬────────────┘
┌─────┴──────┴──────┐             │           │      │                   │
│ capturecontrolgeo │             │           │      │            ┌──────┴─────────┐
└─────────┬─────────┘             │           │      │            │     rigpose    │
          │                       │           │      │            │ rigpose_target │
          │                       │           │      │            └──────┬─────────┘
          │                       │           │      │                   │
          │                       │           │      │                   │
          │                       │           │      │   ┌───────────────┘
          │                       │           │      │   │
          │                       │        ┌──┴──────┴───┴─────┐
          │                       │        │ Rig Attribute VOP │
          │                       │        │   constraints     │
          │                       │        └─────────┬─────────┘
          │                       │                  │
          └────────────────────┐  │  ┌───────────────┘
                               │  │  │
                           ┌───┴──┴──┴──┐
                           │ bonedeform │
                           └────────────┘
</pre>

<p>
Jump inside the <code>constriants</code> node (the <code>Rig Attribute VOP</code> node):
</p>
<ul>
<li>
On the <code>Transform From Path</code> node:

<ul>
<li>
Set <code>Get Look At From</code> to <code>Vector</code>

</ul>
<li>
Drop a <code>Get Point Transform</code> node:

<ul>
<li>
Rename to <code>target</code>

<li>
Set <code>Signature</code> to <code>By Name</code>

<li>
Set <code>File</code> to <code>Third Input</code>

<li>
Set <code>Point Name</code> to <code>target</code>

</ul>
<li>
Drop an <code>Extract Xform</code> node:

<ul>
<li>
Rename to <code>extractxform_target</code>

<li>
Connect the <code>xform</code> output from the <code>target</code> node to the <code>xform</code> input of the <code>extractxfrom_target</code>

</ul>
</ul>
<p>
The next bit is a little confusing to explain:
</p>
<ul>
<li>
Drop another freestanding <code>Transform From Path</code> node

<ul>
<li>
Set its <code>File</code> to <code>Second Input</code> 

</ul>
<li>
This is the tricky bit:

<ul>
<li>
On the original <code>Transform From Path</code> node, double-click on the (probably promoted) <code>curvepos</code> attribute input.

<li>
This should result in a new <code>curvepost</code> <code>Parameter</code> node already connected to the <code>curvepos</code> input.

<li>
Fork another wire from the <code>parameter</code> node's <code>curvepos</code> output to the <code>curvepos</code> input on the NEW <code>Transform From Path</code> node.

</ul>
<li>
Continue from the new <code>Transform From Path</code> node:

<ul>
<li>
Add an <code>Extract Xform</code> node:

<ul>
<li>
Rename to <code>extractxform_object</code>

<li>
<code>outxform</code> output from the new <code>Transform From Path</code> to the <code>xform</code> input on the <code>extractxform_object</code>

</ul>
</ul>
<li>
Drop a freestanding <code>Subtract</code> node:

<ul>
<li>
Plug the <code>trans</code> from the <code>extractxform_target</code> into the <code>subtract</code> node's <code>input1</code>

<li>
Plug the <code>trans</code> from the <code>extractxform_object</code> into the <code>subtract</code> node's <code>input2</code>

<li>
Plug the <code>diff</code> output from the <code>subtract</code> to the <code>lookatvector</code> on the original <code>Transform From Path</code> node

</ul>
</ul>
<p>
Diagram - Path Constraint with Look At - Rig Attribute VOP setup
</p>
<pre>
                                                                                                             ┌─────────────────────┐
                                                                                                             │ Get Point Transform │
                      ┌─────────────────────┐                                                                │                     │            ┌────────────────────┐
                      │                     │   ┌───────────────────────┐                                    │ object              │            │ setpointtransform  │
                      │  transformfrompath2 │   │  extractxform_object  │                                    │                     │            │                    │
                      │                     │   │                       │                                    │               ptnum ├────────────┤ pt                 │
                  ┌───┤curvepos    outxform ├───┤  xform         trans  ┼─┐                                  │                     │            │                    │
                  │   │                     │   └───────────────────────┘ │    ┌───────────────────┐         └─────────────────────┘            │                    │
                  │   └─────────────────────┘                             │    │ subtract          │                                    ┌───────┤ xform              │
                  │                                                       │    │                   │                                    │       └────────────────────┘
                  │                                                       │    │                   │          ┌────────────────────┐    │
  ┌────────────┐  │                                                       │ ┌──┼ input1            │          │ Transform From Path│    │
  │  PARAMETER │  │                                                       │ │  │            diff   ├─────┐    │  transformfrompath1│    │
  │   curvepos │  │                                                       └─┼──┤ input2            │     │    │                    │    │
  │            │  │                                                         │  └───────────────────┘     │    │           outxform │────┘
  │            │  │                                                         │                            │    │                    │
  │   curvepos ┼──┴─────────────────────────────────────────────────────────┼────────────────────────────┼────┤ curvepos           │
  └────────────┘                                                            │                            │    │                    │
                       ┌─────────────────────┐                              │                            │    │                    │
                       │ Get Point Transform │                              │                            └────┼ lookatvector       │
                       │                     │                              │                                 │                    │
                       │ target              │  ┌─────────────────────┐     │                                 └────────────────────┘
                       │                     │  │ extractxform_target │     │
                       │                     │  │                     │     │
                       │             xform   ├──┤ xform       trans   ├─────┘
                       └─────────────────────┘  └─────────────────────┘
</pre>

<p>
As you send the object along the path (with the <code>curve_position</code> slider), it should 'look at' the target joint/point.
</p>

<div id="Path constraint with roll"><h1 id="Path constraint with roll" class="header"><a href="#Path constraint with roll">Path constraint with roll</a></h1></div>
<div id="Path constraint with roll-[[https://www.youtube.com/watch?v=hpigyuZv784&amp;t=867s|YouTube - Path constraint with roll]]"><h4 id="[[https://www.youtube.com/watch?v=hpigyuZv784&amp;t=867s|YouTube - Path constraint with roll]]" class="header"><a href="#Path constraint with roll-[[https://www.youtube.com/watch?v=hpigyuZv784&amp;t=867s|YouTube - Path constraint with roll]]"><a href="https://www.youtube.com/watch?v=hpigyuZv784&amp;t=867s">YouTube - Path constraint with roll</a></a></h4></div>

<p>
In this example, we'll add an option to roll along the path. We need the Tangent to the path and Up Vector from the path.
</p>

<p>
Let's start by duplicating the <code>Path Constraint</code> example Geometry node.
</p>
<ul>
<li>
Rename to <code>path_constraint_with_roll</code>

</ul>
<p>
Inside:
</p>
<ul>
<li>
After the <code>curve</code> node:

<ul>
<li>
Add an <code>Orient Along Curve</code> node:

<ul>
<li>
Set the <code>Tangent (Z Axis)</code> parameter to <code>tangent</code>

</ul>
<li>
The <code>Orient Along Curve</code> node requires a polygon input (and we currently have a <code>NURBS</code> curve)

<li>
Drop a <code>Resample</code> node after the <code>curve</code> and before the <code>Orient Along Curve</code> nodes:

<ul>
<li>
Set <code>Treat Polygons As</code> to <code>Subdivision Curves</code>

<li>
Set <code>Length</code> to <code>0.2</code>

<li>
You can use the <code>Visualizer</code> icon on the right of the Viewport to turn on the <code>tanget</code> vector we made earlier:

<ul>
<li>
You might have to put the display flag on the <code>Orient Along Curve</code> node, and switch on the visualization on the <code>i</code> panel 

<li>
We should see the direction indicators from the curve. 

<li>
You can also turn on the <code>up vector</code> visualization.

</ul>
</ul>
</ul>
</ul>
<div id="Path constraint with roll-Diagram - Path Constraint with Roll - obj/geometry level"><h4 id="Diagram - Path Constraint with Roll - obj/geometry level" class="header"><a href="#Path constraint with roll-Diagram - Path Constraint with Roll - obj/geometry level">Diagram - Path Constraint with Roll - obj/geometry level</a></h4></div>
<pre>
                                                                      ┌─────┐            ┌────────┐
                                             ┌───────────────┐        │ add │            │ sphere │
                                             │     Curve     │        └──┬──┘            └─────┬──┘
                                ┌────┐       │  NURBS Curve  │           │                     │
                                │add │       └───────┬───────┘           │                     │
                                └─┬──┘               │                   │                     │
 ┌──────────────────────┐         │        ┌─────────┴─────────┐      ┌──┴───┐            ┌────┴──┐
 │testgeometry_rubbertoy│      ┌──┴────┐   │     resample      │      │ name │            │ color │
 └────┬─────────────────┘      │ color │   │subdivision curves │      └──┬───┘            └────┬──┘
      │                        └──┬────┘   └─────────┬─────────┘         │                     │
      │                           │                  │                   │                     │
      │                        ┌──┴───┐    ┌─────────┴─────────┐         │                     │
      │                        │ name │    │ orientalongcurves │    ┌────┴──────┐         ┌────┴─┐
      │                        └──┬───┘    └─────────┬─────────┘    │ rigdoctor │         │ name │
      │                           │                  │              └────┬──────┘         └────┬─┘
      │                      ┌────┴──────┐   ┌───────┴───────┐           │                     │
      │                      │ rigdoctor │   │  rigdoctor    │    ┌──────┴─────────────┐  ┌────┴────┐
      │                      └────┬──────┘   └───────┬───────┘    │       null         │  │  null   │
      │                           │                  │            │REST_TARGET_SKELETON│  │ CONTROL │
      │                  ┌────────┴─────────────┐    │            └──────┬─────────────┘  └────┬────┘
      │                  │       null           │    │                   │     ┌───────────────┘
      │                  │ REST_OBJECT_SKELETON │    │                   │     │
      │                  └──────┬─┬─┬───────────┘    │             ┌─────┴─────┴──────┐
      │      ┌──────────────────┘ │ │                │             │ attachcontrolgeo │
      │      │                    │ └─────────┐      │             └─────┬────────────┘
┌─────┴──────┴──────┐             │           │      │                   │
│ capturecontrolgeo │             │           │      │            ┌──────┴─────────┐
└─────────┬─────────┘             │           │      │            │     rigpose    │
          │                       │           │      │            │ rigpose_target │
          │                       │           │      │            └──────┬─────────┘
          │                       │           │      │                   │
          │                       │           │      │                   │
          │                       │           │      │   ┌───────────────┘
          │                       │           │      │   │
          │                       │        ┌──┴──────┴───┴─────┐
          │                       │        │ Rig Attribute VOP │
          │                       │        │   constraints     │
          │                       │        └─────────┬─────────┘
          │                       │                  │
          └────────────────────┐  │  ┌───────────────┘
                               │  │  │
                           ┌───┴──┴──┴──┐
                           │ bonedeform │
                           └────────────┘
</pre>

<p>
Inside the <code>contraints</code> node (<code>Rig Attribute VOP</code>):
</p>
<ul>
<li>
Add a freestanding <code>Primitive Attribute</code> node:

<ul>
<li>
Rename to <code>primuv_up</code>

<li>
Set its <code>Attribute</code> field to <code>up</code>

</ul>
<li>
Double-click on the <code>transformfrompath</code> node's <code>curvpos</code> input (it might be promoted):

<ul>
<li>
This will create a <code>Parameter</code> node, <code>curvepos</code>

<li>
Keep the connect to the <code>curvepos</code> on the <code>transformfrompath</code> node

<li>
Fork a connection to the <code>u</code> input on the <code>primuv_up</code> node.

</ul>
<li>
Add a <code>Geometry VOP Global Parameters</code> node:

<ul>
<li>
Connect the <code>OpInput2</code> into the <code>file</code> of the <code>primuv_up</code> node

</ul>
</ul>
<p>
We now have an up vector at the point along the curve.
</p>

<p>
Duplicate the <code>primuv_up</code> node:
</p>
<ul>
<li>
Rename to <code>primuv_tangent</code>

<li>
(This should have the existing connections like the <code>primuv_up</code>.)

<li>
Change the <code>Attribute</code> field to <code>tangent</code>

</ul>
<div id="Path constraint with roll-Creating the Roll"><h3 id="Creating the Roll" class="header"><a href="#Path constraint with roll-Creating the Roll">Creating the Roll</a></h3></div>

<ul>
<li>
Drop a freestanding <code>Parameter</code> node:

<ul>
<li>
Rename to <code>Roll</code>

<li>
Set the <code>Name</code> field to <code>roll</code>

<li>
Set the <code>Float Range</code> to <code>-360</code> and <code>360</code>

<li>
(This will be available as a value to adjust on the <code>constraints</code> VOP as if it's been promoted.)

</ul>
<li>
Add a <code>Rotate</code> node

<li>
Add a <code>Constant</code> node:

<ul>
<li>
Rename to <code>ident_matrix</code>

<li>
Set <code>Constant Type</code> to <code>9 Floats (Matrix)</code>:

<li>
Plug the output <code>value</code> into the <code>mat</code> on the <code>Rotate</code> node.

<li>
Plug the <code>roll</code> output of the <code>Parameter</code> node into the <code>angle</code> input on the <code>Rotate</code> node.

</ul>
<li>
Drop a <code>Degree to Radians</code> node:

<ul>
<li>
Connect the <code>roll</code> output from the <code>Roll</code> node to the <code>deg</code> input on the <code>Degree to Radians</code> node

<li>
Connect the <code>rad</code> output from the <code>Degree to Radians</code> node to the <code>angle</code> of the <code>Rotate</code> node.

</ul>
<li>
Pull a connection from the <code>primuv_tangent</code> <code>adata</code> output, plug it into the <code>Rotate</code> <code>axis</code> input.

</ul>
<p>
Drop a Freestanding <code>Multiply</code> node:
</p>
<ul>
<li>
Plug the <code>adata</code> of the <code>primuv_up</code> node into the <code>multiply</code> <code>input1</code>

<li>
Plug the <code>Rotate</code> node's <code>rmatrix</code> output into the <code>input2</code> of the <code>multiply</code>

</ul>
<p>
Plug the <code>product</code> output from the <code>Multiply</code> into the <code>transformpath</code> <code>lookupvector</code> slot.
</p>

<div id="Path constraint with roll-Creating the Roll-Diagram - Path Constraint with Roll - Rig Attribute VOP"><h4 id="Diagram - Path Constraint with Roll - Rig Attribute VOP" class="header"><a href="#Path constraint with roll-Creating the Roll-Diagram - Path Constraint with Roll - Rig Attribute VOP">Diagram - Path Constraint with Roll - Rig Attribute VOP</a></h4></div>
<pre>
  ┌────────────────────┐
  │                    │
  │ geometryvopglobal  │
  │                    │
  │                    │
  │                    │
  │                    │
  │                    │
  │                    │
  │                    │
  │                    │         attribute: up
  │                    │        ┌─────────────────┐
  │         OpInput1   │        │   primuv_up     │                                                         Signature: ByName
  │                    │        │                 │                                                         Point Name: object
  │         OpInput2   ┼─┬──────┤ file     adada  ┼────────────────────────────────┐
  │                    │ │      │                 │                                │                       ┌───────────────────────┐
  │                    │ │      │                 │                                │                       │  object               │
  └────────────────────┘ │      │                 │                                │                       │  Get Point Transform  │
                         │      │ uv              │                                │                       │                       │
                         │      │                 │                                │                       │             ptnum     ├────┐        ┌─────────────────────┐
                         │  ┌───┤ u               │                                │                       │                       │    │        │                     │
                         │  │   │                 │                                │                       └───────────────────────┘    │        │ setpointtransform   │
                         │  │   └─────────────────┘                                │                                                    │        │                     │
                         │  │                                                      │                                                    │        │                     │
                         │  │                                                      │                                                    └────────┤  pt                 │
                         │  │                                                      │                                                             │                     │
                         │  │                                                      │                                                             │                     │
   name: curvepos        │  │                                                      │                                                    ┌────────┤  xform              │
  ┌───────────────────┐  │  │                                                      │                  File:  second input               │        │                     │
  │      curvepos     │  │  │                                                      │                        ┌─────────────────────────┐ │        └─────────────────────┘
  │   parameter       │  │  │                                                      │                        │   transformfrompath     │ │
  │                   │──┼──┘                                                      │                        │                         │ │
  │          curvepos │──┼─────────────────────────────────────────────────────────┼────────────────────────┤  curvepos               │ │
  │                   │──┼──┐                                                      │                        │                outxform ├─┘
  │                   │  │  │                                                      │                        │                         │
  └───────────────────┘  │  │   attribute: tangent                                 │                        │                         │
                         │  │  ┌──────────────────┐                                │                     ┌──┼  lookupvector           │
                         │  │  │     primuv_up    │                                │                     │  └─────────────────────────┘
                         │  │  │                  │                                │                     │
                         └──┼──┤   file     adada ┼────────┐                       │                     │
                            │  │                  │        │                       │                     │
                            │  │                  │        │                       │                     │
                            │  │                  │        │                       │                     │
                            │  │   uv             │        │                       │                     │
                            │  │                  │        │                       │                     │
                            └──┤   u              │        │                       │  ┌───────────────┐  │
                               └──────────────────┘        │                       │  │  multiply     │  │
                                                           │                       │  │               │  │
                               ┌─────────────────┐         │                       └──┤input1         │  │
                               │  ident_matrix   │         │                          │        product├──┘
                               │  Constant       │         │                       ┌──┤input2         │
                               │  9 float matrix │         │                       │  └───────────────┘
                               │                 │         │                       │
                               │                 │         │                       │
                               │           value ├────┐    │  ┌──────────────────┐ │
                               └─────────────────┘    │    │  │    rotate        │ │
                                                      │    │  │                  │ │
                                                      └────┼──┤  mat      matrix ┼─┘
   name: roll                                              │  │                  │
   float range: -360 360                               ┌───┼──┤  angle           │
     ┌──────────────┐           ┌──────────────────┐   │   │  │                  │
     │ parameter    │           │  degreetoradians │   │   │  │                  │
     │ roll         │           │                  │   │   └──┤  axis            │
     │              │           │                  │   │      └──────────────────┘
     │        roll  ┼───────────┤  deg       rad   ├───┘
     └──────────────┘           │                  │
                                └──────────────────┘
</pre>


<div id="Primitive on surface constraint"><h1 id="Primitive on surface constraint" class="header"><a href="#Primitive on surface constraint">Primitive on surface constraint</a></h1></div>
<div id="Primitive on surface constraint-[[https://www.youtube.com/watch?v=hpigyuZv784&amp;t=1228s|YouTube - Primitive on surface constraint]]"><h4 id="[[https://www.youtube.com/watch?v=hpigyuZv784&amp;t=1228s|YouTube - Primitive on surface constraint]]" class="header"><a href="#Primitive on surface constraint-[[https://www.youtube.com/watch?v=hpigyuZv784&amp;t=1228s|YouTube - Primitive on surface constraint]]"><a href="https://www.youtube.com/watch?v=hpigyuZv784&amp;t=1228s">YouTube - Primitive on surface constraint</a></a></h4></div>

<div id="Closest primitive on surface constraint"><h1 id="Closest primitive on surface constraint" class="header"><a href="#Closest primitive on surface constraint">Closest primitive on surface constraint</a></h1></div>
<div id="Closest primitive on surface constraint-[[https://www.youtube.com/watch?v=hpigyuZv784&amp;t=1455s|YouTube - Closest primitive on surface constraint]]"><h4 id="[[https://www.youtube.com/watch?v=hpigyuZv784&amp;t=1455s|YouTube - Closest primitive on surface constraint]]" class="header"><a href="#Closest primitive on surface constraint-[[https://www.youtube.com/watch?v=hpigyuZv784&amp;t=1455s|YouTube - Closest primitive on surface constraint]]"><a href="https://www.youtube.com/watch?v=hpigyuZv784&amp;t=1455s">YouTube - Closest primitive on surface constraint</a></a></h4></div>

<p>
<br>
<a href="Houdini.html">Houdini</a>
</p>

<p>
<a href="index.html">index</a>
</p>

</body>
</html>
