<!DOCTYPE html>
<html>
<head>
<link rel="Stylesheet" type="text/css" href="style.css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<title>houdini_kinefx_constraints</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<p>
<a href="index.html">index</a>
</p>

<p>
<a href="Houdini.html">Houdini</a>
</p>

<div id="KineFX - Constraints"><h1 id="KineFX - Constraints" class="header"><a href="#KineFX - Constraints">KineFX - Constraints</a></h1></div>

<div id="Part I"><h1 id="Part I" class="header"><a href="#Part I">Part I</a></h1></div>
<div id="Part I-[[https://youtu.be/QGpOZP0dAJo?si=biGTCvCWGHh3YXEP|YouTube - Introduction to Houdini KineFX Constraints - part I]]"><h4 id="[[https://youtu.be/QGpOZP0dAJo?si=biGTCvCWGHh3YXEP|YouTube - Introduction to Houdini KineFX Constraints - part I]]" class="header"><a href="#Part I-[[https://youtu.be/QGpOZP0dAJo?si=biGTCvCWGHh3YXEP|YouTube - Introduction to Houdini KineFX Constraints - part I]]"><a href="https://youtu.be/QGpOZP0dAJo?si=biGTCvCWGHh3YXEP">YouTube - Introduction to Houdini KineFX Constraints - part I</a></a></h4></div>

<p>
This tutorial was about how to set up KineFX networks for constraints in Houdini.
</p>

<p>
All constraints are a mix of one or more of the following:
</p>
<ul>
<li>
Position

<li>
Rotation

<li>
Scale

</ul>
<div id="Part I-Scene Setup"><h2 id="Scene Setup" class="header"><a href="#Part I-Scene Setup">Scene Setup</a></h2></div>

<ul>
<li>
Inside a <code>Geometry</code> node in SOPs:

<ul>
<li>
Add a <code>Rubber Toy</code> node

<li>
Add a freestanding (not connected) point, using an <code>Add</code> node.

<ul>
<li>
<code>Number of Points</code> to 1

<li>
Check on and leave values at 0,0,0

</ul>
<li>
Add a <code>Color</code> node:

<ul>
<li>
This is required as the capture object turns black without it!

<li>
Leave as default 'white'.

</ul>
<li>
Add a <code>Name</code> node:

<ul>
<li>
<code>Class</code> to point

<li>
<code>Group</code> to 0

<li>
<code>Name</code> to <code>object</code>

</ul>
<li>
We need to introduce 'KineFX Transform Attributes', and the easiest way to add these is with the    <code>Rig Doctor</code> node:

<ul>
<li>
Check 'on' <code>Initialize Transforms</code>

</ul>
<li>
End with a <code>Null</code> node:

<ul>
<li>
Rename to <code>REST_OBJECT_SKELETON</code>

</ul>
</ul>
</ul>
<p>
To capture the Rubber Toy:
</p>
<ul>
<li>
Drop a <code>Capture Packed Geometry</code>:

<ul>
<li>
<code>rubbertoy</code> to input 1

<li>
<code>REST_OBJECT_SKELETON</code> into input 2

<li>
<code>Pack Input</code> to 'on'

<li>
<code>Manual Capture</code> to 1 (<code>+</code>)

<ul>
<li>
<code>Capture Geo</code> to <code>*</code>

<li>
<code>Joint</code> to <code>object</code> (the point)

</ul>
</ul>
</ul>
<p>
To make the bone deformation work:
</p>
<ul>
<li>
Add a <code>Bone Deform</code> node:

<ul>
<li>
Input 1 takes the <code>Capture Packed Geometry</code> node

<li>
Input 2 takes the <code>REST_OBJECT_SKELETON</code>

<li>
Input 3:

<ul>
<li>
Add a <code>Rig Pose</code> node between the <code>REST_OBJECT_SKELETON</code> and the input 3

</ul>
</ul>
</ul>
<p>
At this stage, moving the point at the <code>Rig Pose</code> node (selected, but with the <code>Bone Deform</code> holding the Display Flags), you should be able to see the point moving the <code>Rubber Toy</code> as a captured object.
</p>

<p>
Once you've tried the <code>Rig Pose</code> node to move the initial point (essentially the 'bone' in this setup), you can exchange it for a <code>Rig Attribute VOP</code>, within which we'll be setting constraints.
Rename the <code>Rig Attribute VOP</code> to <code>constraints</code>.
</p>


<p>
Add a freestanding <code>Add</code> node:
</p>
<ul>
<li>
Add a point at 0,0,0

</ul>
<li>
Add a <code>Name</code> node:

<ul>
<li>
Set <code>Class</code> to <code>Point</code>

<li>
<code>Group</code> to 0

<li>
<code>Name</code> to <code>target</code>

</ul>
<li>
Add a <code>Rig Doctor</code> node:

<ul>
<li>
Check 'on' <code>Initialize Transforms</code>

</ul>
<li>
Add a <code>Null</code>:

<ul>
<li>
Rename to <code>REST_TARGET_SKELETON</code>

</ul>
<li>
Add a <code>Rig Pose</code> node:

<ul>
<li>
Rename to <code>rigpose_target</code>

</ul>
<div id="Part I-Create Better Target Controls"><h2 id="Create Better Target Controls" class="header"><a href="#Part I-Create Better Target Controls">Create Better Target Controls</a></h2></div>

<ul>
<li>
Add a freestanding <code>Sphere</code> node:

<ul>
<li>
<code>Uniform Scale</code> to 0.1

</ul>
<li>
Add a <code>Color</code> node:

<ul>
<li>
Set color to red

</ul>
<li>
Add a <code>Name</code> node:

<ul>
<li>
<code>Name</code> to <code>sphere_red_ctrl</code>

</ul>
<li>
Add a <code>Null</code>:

<ul>
<li>
Rename to <code>CONTROL</code>

</ul>
</ul>
<p>
Between the <code>REST_TARGET_SKELETON</code> and the <code>rigpose_target</code>:
</p>
<ul>
<li>
Add an <code>Attach Control Geometry</code> node:

<ul>
<li>
Plug the <code>CONTROL</code> into input 2

<li>
<code>Assign Shapes</code> to 1 (<code>+</code>)

<ul>
<li>
<code>Group</code> to <code>@name=target</code>

<li>
<code>Control Name</code> to <code>sphere_red_ctrl</code>

</ul>
</ul>
</ul>
<p>
Now we can modify the positions by selecting and moving the sphere control object.
</p>

<ul>
<li>
Template the <code>rigpose_target</code> node

<li>
Set the Display Flag on the <code>Bone Deform</code>

</ul>
<p>
Move up to the Obj level and rename the Geometry node to <code>base_setup</code>
</p>

<div id="Part I-Create Better Target Controls-Diagram - Initial Setup"><h4 id="Diagram - Initial Setup" class="header"><a href="#Part I-Create Better Target Controls-Diagram - Initial Setup">Diagram - Initial Setup</a></h4></div>
<pre>
                                ┌────┐                ┌─────┐            ┌────────┐
                                │add │                │ add │            │ sphere │
                                └─┬──┘                └──┬──┘            └─────┬──┘
 ┌──────────────────────┐         │                      │                     │
 │testgeometry_rubbertoy│      ┌──┴────┐                 │                     │
 └────┬─────────────────┘      │ color │                 │                     │
      │                        └──┬────┘              ┌──┴───┐            ┌────┴──┐
      │                           │                   │ name │            │ color │
      │                        ┌──┴───┐               └──┬───┘            └────┬──┘
      │                        │ name │                  │                     │
      │                        └──┬───┘                  │                     │
      │                           │                      │                     │
      │                      ┌────┴──────┐          ┌────┴──────┐         ┌────┴─┐
      │                      │ rigdoctor │          │ rigdoctor │         │ name │
      │                      └────┬──────┘          └────┬──────┘         └────┬─┘
      │                           │                      │                     │
      │                  ┌────────┴─────────────┐ ┌──────┴─────────────┐  ┌────┴────┐
      │                  │       null           │ │       null         │  │  null   │
      │                  │ REST_OBJECT_SKELETON │ │REST_TARGET_SKELETON│  │ CONTROL │
      │                  └──────┬─┬─┬───────────┘ └──────┬─────────────┘  └────┬────┘
      │      ┌──────────────────┘ │ │                    │     ┌───────────────┘
      │      │                    │ └─────────┐          │     │
┌─────┴──────┴──────┐             │           │    ┌─────┴─────┴──────┐
│ capturecontrolgeo │             │           │    │ attachcontrolgeo │
└─────────┬─────────┘             │           │    └─────┬────────────┘
          │                       │           │          │
          │                       │           │   ┌──────┴─────────┐
          │                       │           │   │     rigpose    │
          │                       │           │   │ rigpose_target │
          │                       │           │   └──────┬─────────┘
          │                       │           │          │
          │                       │        ┌──┴──────────┴─────┐
          │                       │        │ Rig Attribute VOP │
          │                       │        │   constraints     │
          │                       │        └─────────┬─────────┘
          │                       │                  │
          └────────────────────┐  │  ┌───────────────┘
                               │  │  │
                           ┌───┴──┴──┴──┐
                           │ bonedeform │
                           └────────────┘
</pre>

<div id="Transforms"><h1 id="Transforms" class="header"><a href="#Transforms">Transforms</a></h1></div>

<div id="Part II"><h1 id="Part II" class="header"><a href="#Part II">Part II</a></h1></div>
<div id="Part II-[[https://youtu.be/hpigyuZv784?si=Y0yDegj4W-isQh-y|YouTube - Introduction to Houdini KineFX Constraints - part II]]"><h4 id="[[https://youtu.be/hpigyuZv784?si=Y0yDegj4W-isQh-y|YouTube - Introduction to Houdini KineFX Constraints - part II]]" class="header"><a href="#Part II-[[https://youtu.be/hpigyuZv784?si=Y0yDegj4W-isQh-y|YouTube - Introduction to Houdini KineFX Constraints - part II]]"><a href="https://youtu.be/hpigyuZv784?si=Y0yDegj4W-isQh-y">YouTube - Introduction to Houdini KineFX Constraints - part II</a></a></h4></div>


<p>
<br>
<a href="Houdini.html">Houdini</a>
</p>

<p>
<a href="index.html">index</a>
</p>

</body>
</html>
